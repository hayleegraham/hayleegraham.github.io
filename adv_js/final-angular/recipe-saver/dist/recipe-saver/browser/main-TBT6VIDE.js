import{a as A,b as fe,c as Bf,d as m,e as gE,f as _c,g as mE,h as yE,i as vE,j as Uf,k as _E,l as wc,m as wE,n as Ec,o as EE,p as IE,q as Se,r as ai,s as En,t as Ic,u as Zs,v as DE,w as CE,x as mr,y as St}from"./chunk-HGM2WKID.js";var TE=null;var $f=1;function Ot(t){let e=TE;return TE=t,e}var bE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nR(t){if(!(zf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===$f)){if(!t.producerMustRecompute(t)&&!Hf(t)){t.dirty=!1,t.lastCleanEpoch=$f;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=$f}}function AE(t){return t&&(t.nextProducerIndex=0),Ot(t)}function SE(t,e){if(Ot(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(zf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Hf(t){Dc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(nR(n),r!==n.version))return!0}return!1}function xE(t){if(Dc(t),zf(t))for(let e=0;e<t.producerNode.length;e++)qf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function qf(t,e){if(rR(t),Dc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)qf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Dc(i),i.producerIndexOfThis[r]=e}}function zf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function rR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function iR(){throw new Error}var oR=iR;function ME(t){oR=t}function G(t){return typeof t=="function"}function co(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Cc=co(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(o){e=o instanceof Cc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{RE(o)}catch(s){e=e??[],s instanceof Cc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Cc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)RE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ui(n,e)}remove(e){let{_finalizers:n}=this;n&&ui(n,e),e instanceof t&&e._removeParent(this)}};Ue.EMPTY=(()=>{let t=new Ue;return t.closed=!0,t})();var Gf=Ue.EMPTY;function Tc(t){return t instanceof Ue||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function RE(t){G(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={setTimeout(t,e,...n){let{delegate:r}=lo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function bc(t){lo.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function Xs(){}var NE=(()=>Wf("C",void 0,void 0))();function PE(t){return Wf("E",void 0,t)}function OE(t){return Wf("N",t,void 0)}function Wf(t,e,n){return{kind:t,value:e,error:n}}var ci=null;function ho(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ci;if(ci=null,n)throw r}}else t()}function kE(t){on.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=t)}var li=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tc(e)&&e.add(this)):this.destination=uR}static create(e,n,r){return new Wn(e,n,r)}next(e){this.isStopped?Qf(OE(e),this):this._next(e)}error(e){this.isStopped?Qf(PE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qf(NE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sR=Function.prototype.bind;function Kf(t,e){return sR.call(t,e)}var Yf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ac(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ac(r)}else Ac(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ac(n)}}},Wn=class extends li{constructor(e,n,r){super();let i;if(G(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kf(e.next,o),error:e.error&&Kf(e.error,o),complete:e.complete&&Kf(e.complete,o)}):i=e}this.destination=new Yf(i)}};function Ac(t){on.useDeprecatedSynchronousErrorHandling?kE(t):bc(t)}function aR(t){throw t}function Qf(t,e){let{onStoppedNotification:n}=on;n&&lo.setTimeout(()=>n(t,e))}var uR={closed:!0,next:Xs,error:aR,complete:Xs};var fo=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function _t(t){return t}function Zf(...t){return Xf(t)}function Xf(t){return t.length===0?_t:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lR(n)?n:new Wn(n,r,i);return ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=FE(r),new r((i,o)=>{let s=new Wn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fo](){return this}pipe(...n){return Xf(n)(this)}toPromise(n){return n=FE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function FE(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function cR(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function lR(t){return t&&t instanceof li||cR(t)&&Tc(t)}function Jf(t){return G(t?.lift)}function ee(t){return e=>{if(Jf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(t,e,n,r,i){return new ep(t,e,n,r,i)}var ep=class extends li{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function po(){return ee((t,e)=>{let n=null;t._refCount++;let r=te(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var go=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Jf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let n=this.getSubject();e.add(this.source.subscribe(te(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return po()(this)}};var VE=co(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Sc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new VE}next(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Gf:(this.currentObservers=null,o.push(n),new Ue(()=>{this.currentObservers=null,ui(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Sc(e,n),t})(),Sc=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Gf}};var at=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Js={now(){return(Js.delegate||Date).now()},delegate:void 0};var xc=class extends $e{constructor(e=1/0,n=1/0,r=Js){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Mc=class extends Ue{constructor(e,n){super()}schedule(e,n=0){return this}};var ea={setInterval(t,e,...n){let{delegate:r}=ea;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ea;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var mo=class extends Mc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ea.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ea.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var yo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};yo.now=Js.now;var vo=class extends yo{constructor(e,n=yo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ta=new vo(mo);var Rc=class extends mo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Nc=class extends vo{};var tp=new Nc(Rc);var xt=new J(t=>t.complete());function LE(t){return t&&G(t.schedule)}function np(t){return t[t.length-1]}function Pc(t){return G(np(t))?t.pop():void 0}function In(t){return LE(np(t))?t.pop():void 0}function jE(t,e){return typeof np(t)=="number"?t.pop():e}var Oc=t=>t&&typeof t.length=="number"&&typeof t!="function";function kc(t){return G(t?.then)}function Fc(t){return G(t[fo])}function Vc(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function Lc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jc=dR();function Bc(t){return G(t?.[jc])}function Uc(t){return mE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield _c(n.read());if(i)return yield _c(void 0);yield yield _c(r)}}finally{n.releaseLock()}})}function $c(t){return G(t?.getReader)}function Ie(t){if(t instanceof J)return t;if(t!=null){if(Fc(t))return hR(t);if(Oc(t))return fR(t);if(kc(t))return pR(t);if(Vc(t))return BE(t);if(Bc(t))return gR(t);if($c(t))return mR(t)}throw Lc(t)}function hR(t){return new J(e=>{let n=t[fo]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fR(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function pR(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,bc)})}function gR(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function BE(t){return new J(e=>{yR(t,e).catch(n=>e.error(n))})}function mR(t){return BE(Uc(t))}function yR(t,e){var n,r,i,o;return gE(this,void 0,void 0,function*(){try{for(n=yE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ht(t,e=0){return ee((n,r)=>{n.subscribe(te(r,i=>Mt(r,t,()=>r.next(i),e),()=>Mt(r,t,()=>r.complete(),e),i=>Mt(r,t,()=>r.error(i),e)))})}function sn(t,e=0){return ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UE(t,e){return Ie(t).pipe(sn(e),Ht(e))}function $E(t,e){return Ie(t).pipe(sn(e),Ht(e))}function HE(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qE(t,e){return new J(n=>{let r;return Mt(n,e,()=>{r=t[jc](),Mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}function Hc(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{Mt(n,e,()=>{let r=t[Symbol.asyncIterator]();Mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zE(t,e){return Hc(Uc(t),e)}function GE(t,e){if(t!=null){if(Fc(t))return UE(t,e);if(Oc(t))return HE(t,e);if(kc(t))return $E(t,e);if(Vc(t))return Hc(t,e);if(Bc(t))return qE(t,e);if($c(t))return zE(t,e)}throw Lc(t)}function de(t,e){return e?GE(t,e):Ie(t)}function j(...t){let e=In(t);return de(t,e)}function _o(t,e){let n=G(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function rp(t){return!!t&&(t instanceof J||G(t.lift)&&G(t.subscribe))}var Kn=co(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function $(t,e){return ee((n,r)=>{let i=0;n.subscribe(te(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:vR}=Array;function _R(t,e){return vR(e)?t(...e):t(e)}function qc(t){return $(e=>_R(t,e))}var{isArray:wR}=Array,{getPrototypeOf:ER,prototype:IR,keys:DR}=Object;function zc(t){if(t.length===1){let e=t[0];if(wR(e))return{args:e,keys:null};if(CR(e)){let n=DR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function CR(t){return t&&typeof t=="object"&&ER(t)===IR}function Gc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function na(...t){let e=In(t),n=Pc(t),{args:r,keys:i}=zc(t);if(r.length===0)return de([],e);let o=new J(TR(r,e,i?s=>Gc(i,s):_t));return n?o.pipe(qc(n)):o}function TR(t,e,n=_t){return r=>{WE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)WE(e,()=>{let c=de(t[u],e),l=!1;c.subscribe(te(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function WE(t,e,n){t?Mt(n,t,e):e()}function KE(t,e,n,r,i,o,s,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=v=>c<r?y(v):u.push(v),y=v=>{o&&e.next(v),c++;let _=!1;Ie(n(v,l++)).subscribe(te(e,T=>{i?.(T),o?f(T):e.next(T)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){let T=u.shift();s?Mt(e,s,()=>y(T)):y(T)}h()}catch(T){e.error(T)}}))};return t.subscribe(te(e,f,()=>{d=!0,h()})),()=>{a?.()}}function He(t,e,n=1/0){return G(e)?He((r,i)=>$((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),ee((r,i)=>KE(r,i,t,n)))}function yr(t=1/0){return He(_t,t)}function QE(){return yr(1)}function wo(...t){return QE()(de(t,In(t)))}function Wc(t){return new J(e=>{Ie(t()).subscribe(e)})}function ip(...t){let e=Pc(t),{args:n,keys:r}=zc(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,c=s;for(let l=0;l<s;l++){let d=!1;Ie(n[l]).subscribe(te(o,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||o.next(r?Gc(r,a):a),o.complete())}))}});return e?i.pipe(qc(e)):i}function ra(...t){let e=In(t),n=jE(t,1/0),r=t;return r.length?r.length===1?Ie(r[0]):yr(n)(de(r,e)):xt}function ut(t,e){return ee((n,r)=>{let i=0;n.subscribe(te(r,o=>t.call(e,o,i++)&&r.next(o)))})}function vr(t){return ee((e,n)=>{let r=null,i=!1,o;r=e.subscribe(te(n,void 0,void 0,s=>{o=Ie(t(s,vr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function YE(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(te(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function di(t,e){return G(e)?He(t,e,1):He(t,1)}function _r(t){return ee((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qn(t){return t<=0?()=>xt:ee((e,n)=>{let r=0;e.subscribe(te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function op(t){return $(()=>t)}function ia(t,e=_t){return t=t??bR,ee((n,r)=>{let i,o=!0;n.subscribe(te(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function bR(t,e){return t===e}function Kc(t=AR){return ee((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function AR(){return new Kn}function oa(t){return ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):_t,Qn(1),n?_r(e):Kc(()=>new Kn))}function Eo(t){return t<=0?()=>xt:ee((e,n)=>{let r=[];e.subscribe(te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function sp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):_t,Eo(1),n?_r(e):Kc(()=>new Kn))}function sa(){return ee((t,e)=>{let n,r=!1;t.subscribe(te(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function hi(t,e){return ee(YE(t,e,arguments.length>=2,!0))}function aa(t={}){let{connector:e=()=>new $e,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},y=()=>{let v=s;f(),v?.unsubscribe()};return ee((v,_)=>{c++,!d&&!l&&h();let T=u=u??e();_.add(()=>{c--,c===0&&!d&&!l&&(a=ap(y,i))}),T.subscribe(_),!s&&c>0&&(s=new Wn({next:L=>T.next(L),error:L=>{d=!0,h(),a=ap(f,n,L),T.error(L)},complete:()=>{l=!0,h(),a=ap(f,r),T.complete()}}),Ie(v).subscribe(s))})(o)}}function ap(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Wn({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function Qc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,aa({connector:()=>new xc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function fi(...t){let e=In(t);return ee((n,r)=>{(e?wo(t,n,e):wo(t,n)).subscribe(r)})}function Te(t,e){return ee((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(te(r,u=>{i?.unsubscribe();let c=0,l=o++;Ie(t(u,l)).subscribe(i=te(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Yc(t,e){return G(e)?Te(()=>t,e):Te(()=>t)}function up(t){return ee((e,n)=>{Ie(t).subscribe(te(n,()=>n.complete(),Xs)),!n.closed&&e.subscribe(n)})}function qe(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(te(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):_t}function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("Could not find renamed property on target object.")}function Zc(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ZE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var SR=_e({__forward_ref__:_e});function Xn(t){return t.__forward_ref__=Xn,t.toString=function(){return ft(this())},t}function wt(t){return FI(t)?t():t}function FI(t){return typeof t=="function"&&t.hasOwnProperty(SR)&&t.__forward_ref__===Xn}function VI(t){return t&&!!t.\u0275providers}var LI="https://g.co/ng/security#xss",V=class extends Error{constructor(e,n){super(ug(e,n)),this.code=e}};function ug(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var xR=_e({\u0275cmp:_e}),MR=_e({\u0275dir:_e}),RR=_e({\u0275pipe:_e}),NR=_e({\u0275mod:_e}),ul=_e({\u0275fac:_e}),ua=_e({__NG_ELEMENT_ID__:_e}),XE=_e({__NG_ENV_ID__:_e});function Ml(t){return typeof t=="string"?t:t==null?"":String(t)}function PR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ml(t)}function OR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new V(-200,`Circular dependency in DI detected for ${t}${n}`)}function cg(t,e){let n=e?` in ${e}`:"";throw new V(-201,!1)}function kR(t,e){t==null&&FR(e,t,null,"!=")}function FR(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function k(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fe(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rl(t){return JE(t,BI)||JE(t,UI)}function jI(t){return Rl(t)!==null}function JE(t,e){return t.hasOwnProperty(e)?t[e]:null}function VR(t){let e=t&&(t[BI]||t[UI]);return e||null}function eI(t){return t&&(t.hasOwnProperty(tI)||t.hasOwnProperty(LR))?t[tI]:null}var BI=_e({\u0275prov:_e}),tI=_e({\u0275inj:_e}),UI=_e({ngInjectableDef:_e}),LR=_e({ngInjectorDef:_e}),ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),Dp;function $I(){return Dp}function zt(t){let e=Dp;return Dp=t,e}function HI(t,e,n){let r=Rl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;cg(ft(t),"Injector")}var Et=globalThis;var P=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=k({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var jR={},la=jR,Cp="__NG_DI_FLAG__",cl="ngTempTokenPath",BR="ngTokenPath",UR=/\n/gm,$R="\u0275",nI="__source",bo;function HR(){return bo}function wr(t){let e=bo;return bo=t,e}function qR(t,e=ne.Default){if(bo===void 0)throw new V(-203,!1);return bo===null?HI(t,void 0,e):bo.get(t,e&ne.Optional?null:void 0,e)}function I(t,e=ne.Default){return($I()||qR)(wt(t),e)}function N(t,e=ne.Default){return I(t,Nl(e))}function Nl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tp(t){let e=[];for(let n=0;n<t.length;n++){let r=wt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=ne.Default;for(let s=0;s<r.length;s++){let a=r[s],u=zR(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(I(i,o))}else e.push(I(r))}return e}function qI(t,e){return t[Cp]=e,t.prototype[Cp]=e,t}function zR(t){return t[Cp]}function GR(t,e,n,r){let i=t[cl];throw e[nI]&&i.unshift(e[nI]),t.message=WR(`
`+t.message,i,n,r),t[BR]=i,t[cl]=null,t}function WR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==$R?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(UR,`
  `)}`}function _a(t){return{toString:t}.toString()}var zI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(zI||{}),Tn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Tn||{}),So={},Gt=[];function GI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function bp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];KR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function WI(t){return t===3||t===4||t===6}function KR(t){return t.charCodeAt(0)===64}function da(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rI(t,n,i,null,e[++r]):rI(t,n,i,null,null))}}return t}function rI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var KI="ng-template";function QR(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&GI(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function QI(t){return t.type===4&&t.value!==KI}function YR(t,e,n){let r=t.type===4&&!n?KI:t.value;return e===r}function ZR(t,e,n){let r=4,i=t.attrs||[],o=eN(i),s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!an(r)&&!an(u))return!1;if(s&&an(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!YR(t,u,n)||u===""&&e.length===1){if(an(r))return!1;s=!0}}else{let c=r&8?u:e[++a];if(r&8&&t.attrs!==null){if(!QR(t.attrs,c,n)){if(an(r))return!1;s=!0}continue}let l=r&8?"class":u,d=XR(l,i,QI(t),n);if(d===-1){if(an(r))return!1;s=!0;continue}if(c!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&GI(f,c,0)!==-1||r&2&&c!==h){if(an(r))return!1;s=!0}}}}return an(r)||s}function an(t){return(t&1)===0}function XR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return tN(e,t)}function JR(t,e,n=!1){for(let r=0;r<e.length;r++)if(ZR(t,e[r],n))return!0;return!1}function eN(t){for(let e=0;e<t.length;e++){let n=t[e];if(WI(n))return e}return t.length}function tN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function iI(t,e){return t?":not("+e.trim()+")":e}function nN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!an(s)&&(e+=iI(o,i),i=""),r=s,o=o||!an(r);n++}return i!==""&&(e+=iI(o,i)),e}function rN(t){return t.map(nN).join(",")}function iN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!an(i))break;i=o}r++}return{attrs:e,classes:n}}function nt(t){return _a(()=>{let e=e0(t),n=fe(A({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===zI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tn.Emulated,styles:t.styles||Gt,_:null,schemas:t.schemas||null,tView:null,id:""});t0(n);let r=t.dependencies;return n.directiveDefs=sI(r,!1),n.pipeDefs=sI(r,!0),n.id=aN(n),n})}function oN(t){return Dr(t)||YI(t)}function sN(t){return t!==null}function Ve(t){return _a(()=>({type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oI(t,e){if(t==null)return So;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Je(t){return _a(()=>{let e=e0(t);return t0(e),e})}function Dr(t){return t[xR]||null}function YI(t){return t[MR]||null}function ZI(t){return t[RR]||null}function XI(t){let e=Dr(t)||YI(t)||ZI(t);return e!==null?e.standalone:!1}function JI(t,e){let n=t[NR]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function e0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||So,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oI(t.inputs,e),outputs:oI(t.outputs),debugInfo:null}}function t0(t){t.features?.forEach(e=>e(t))}function sI(t,e){if(!t)return null;let n=e?ZI:oN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(sN)}function aN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Jn=0,oe=1,W=2,Ze=3,un=4,dn=5,ll=6,ha=7,cn=8,xo=9,Mo=10,Xe=11,fa=12,aI=13,Vo=14,bn=15,Pl=16,Io=17,pa=18,Ol=19,n0=20,Er=21,cp=22,gi=23,Cr=25,r0=1;var mi=7,dl=8,hl=9,Wt=10,Ro=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Ro||{});function Ir(t){return Array.isArray(t)&&typeof t[r0]=="object"}function ln(t){return Array.isArray(t)&&t[r0]===!0}function i0(t){return(t.flags&4)!==0}function kl(t){return t.componentOffset>-1}function lg(t){return(t.flags&1)===1}function Tr(t){return!!t.template}function uN(t){return(t[W]&512)!==0}function No(t,e){let n=t.hasOwnProperty(ul);return n?t[ul]:null}var Ap=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hn(){return o0}function o0(t){return t.type.prototype.ngOnChanges&&(t.setInput=lN),cN}hn.ngInherit=!0;function cN(){let t=a0(this),e=t?.current;if(e){let n=t.previous;if(n===So)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lN(t,e,n,r){let i=this.declaredInputs[n],o=a0(t)||dN(t,{previous:So,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Ap(u&&u.currentValue,e,a===So),t[r]=e}var s0="__ngSimpleChanges__";function a0(t){return t[s0]||null}function dN(t,e){return t[s0]=e}var uI=null;var Dn=function(t,e,n){uI?.(t,e,n)},hN="svg",fN="math";function An(t){for(;Array.isArray(t);)t=t[Jn];return t}function u0(t,e){return An(e[t])}function Kt(t,e){return An(e[t.index])}function c0(t,e){return t.data[e]}function Ar(t,e){let n=e[t];return Ir(n)?n:n[Jn]}function dg(t){return(t[W]&128)===128}function pN(t){return ln(t[Ze])}function fl(t,e){return e==null?null:t[e]}function l0(t){t[Io]=0}function gN(t){t[W]&1024||(t[W]|=1024,dg(t)&&Fl(t))}function mN(t,e){for(;t>0;)e=e[Vo],t--;return e}function d0(t){return t[W]&9216||t[gi]?.dirty}function h0(t){d0(t)&&Fl(t)}function Fl(t){let e=t[Ze];for(;e!==null&&!(ln(e)&&e[W]&Ro.HasChildViewsToRefresh||Ir(e)&&e[W]&8192);){if(ln(e))e[W]|=Ro.HasChildViewsToRefresh;else if(e[W]|=8192,!dg(e))break;e=e[Ze]}}function f0(t,e){if((t[W]&256)===256)throw new V(911,!1);t[Er]===null&&(t[Er]=[]),t[Er].push(e)}function yN(t,e){if(t[Er]===null)return;let n=t[Er].indexOf(e);n!==-1&&t[Er].splice(n,1)}var re={lFrame:w0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vN(){return re.lFrame.elementDepthCount}function _N(){re.lFrame.elementDepthCount++}function wN(){re.lFrame.elementDepthCount--}function p0(){return re.bindingsEnabled}function EN(){return re.skipHydrationRootTNode!==null}function IN(t){return re.skipHydrationRootTNode===t}function DN(){re.skipHydrationRootTNode=null}function be(){return re.lFrame.lView}function Qt(){return re.lFrame.tView}function Me(t){return re.lFrame.contextLView=t,t[cn]}function Re(t){return re.lFrame.contextLView=null,t}function Ft(){let t=g0();for(;t!==null&&t.type===64;)t=t.parent;return t}function g0(){return re.lFrame.currentTNode}function CN(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function wa(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function m0(){return re.lFrame.isParent}function TN(){re.lFrame.isParent=!1}function bN(t){return re.lFrame.bindingIndex=t}function hg(){return re.lFrame.bindingIndex++}function AN(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function SN(){return re.lFrame.inI18n}function xN(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Sp(e)}function MN(){return re.lFrame.currentDirectiveIndex}function Sp(t){re.lFrame.currentDirectiveIndex=t}function RN(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function y0(t){re.lFrame.currentQueryIndex=t}function NN(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[dn]:null}function v0(t,e,n){if(n&ne.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=NN(o),i===null||(o=o[Vo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=_0();return r.currentTNode=e,r.lView=t,!0}function fg(t){let e=_0(),n=t[oe];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _0(){let t=re.lFrame,e=t===null?null:t.child;return e===null?w0(t):e}function w0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function E0(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var I0=E0;function pg(){let t=E0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function PN(t){return(re.lFrame.contextLView=mN(t,re.lFrame.contextLView))[cn]}function Lo(){return re.lFrame.selectedIndex}function yi(t){re.lFrame.selectedIndex=t}function gg(){let t=re.lFrame;return c0(t.tView,t.selectedIndex)}function ON(){return re.lFrame.currentNamespace}var D0=!0;function mg(){return D0}function yg(t){D0=t}function kN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=o0(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function vg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function rl(t,e,n){C0(t,e,3,n)}function il(t,e,n,r){(t[W]&3)===n&&C0(t,e,n,r)}function lp(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function C0(t,e,n,r){let i=r!==void 0?t[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Io]+=65536),(a<o||o==-1)&&(FN(t,n,e,u),t[Io]=(t[Io]&4294901760)+u+2),u++}function cI(t,e){Dn(4,t,e);let n=Ot(null);try{e.call(t)}finally{Ot(n),Dn(5,t,e)}}function FN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[W]>>14<t[Io]>>16&&(t[W]&3)===e&&(t[W]+=16384,cI(a,o)):cI(a,o)}var Ao=-1,vi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function VN(t){return t instanceof vi}function LN(t){return(t.flags&8)!==0}function jN(t){return(t.flags&16)!==0}function T0(t){return t!==Ao}function pl(t){let e=t&32767;return t&32767}function BN(t){return t>>16}function gl(t,e){let n=BN(t),r=e;for(;n>0;)r=r[Vo],n--;return r}var xp=!0;function lI(t){let e=xp;return xp=t,e}var UN=256,b0=UN-1,A0=5,$N=0,Cn={};function HN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ua)&&(r=n[ua]),r==null&&(r=n[ua]=$N++);let i=r&b0,o=1<<i;e.data[t+(i>>A0)]|=o}function ml(t,e){let n=S0(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,dp(r.data,t),dp(e,null),dp(r.blueprint,null));let i=_g(t,e),o=t.injectorIndex;if(T0(i)){let s=pl(i),a=gl(i,e),u=a[oe].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function dp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function S0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _g(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=P0(i),r===null)return Ao;if(n++,i=i[Vo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ao}function Mp(t,e,n){HN(t,e,n)}function qN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(WI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function x0(t,e,n){if(n&ne.Optional||t!==void 0)return t;cg(e,"NodeInjector")}function M0(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[xo],o=zt(void 0);try{return i?i.get(e,r,n&ne.Optional):HI(e,r,n&ne.Optional)}finally{zt(o)}}return x0(r,e,n)}function R0(t,e,n,r=ne.Default,i){if(t!==null){if(e[W]&2048&&!(r&ne.Self)){let s=QN(t,e,n,r,Cn);if(s!==Cn)return s}let o=N0(t,e,n,r,Cn);if(o!==Cn)return o}return M0(e,n,r,i)}function N0(t,e,n,r,i){let o=WN(n);if(typeof o=="function"){if(!v0(e,t,r))return r&ne.Host?x0(i,n,r):M0(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ne.Optional))cg(n);else return s}finally{I0()}}else if(typeof o=="number"){let s=null,a=S0(t,e),u=Ao,c=r&ne.Host?e[bn][dn]:null;for((a===-1||r&ne.SkipSelf)&&(u=a===-1?_g(t,e):e[a+8],u===Ao||!hI(r,!1)?a=-1:(s=e[oe],a=pl(u),e=gl(u,e)));a!==-1;){let l=e[oe];if(dI(o,a,l.data)){let d=zN(a,e,n,s,r,c);if(d!==Cn)return d}u=e[a+8],u!==Ao&&hI(r,e[oe].data[a+8]===c)&&dI(o,a,e)?(s=l,a=pl(u),e=gl(u,e)):a=-1}}return i}function zN(t,e,n,r,i,o){let s=e[oe],a=s.data[t+8],u=r==null?kl(a)&&xp:r!=s&&(a.type&3)!==0,c=i&ne.Host&&o===a,l=GN(a,s,n,u,c);return l!==null?Po(e,s,l,a):Cn}function GN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let y=s[f];if(f<u&&n===y||f>=u&&y.type===n)return f}if(i){let f=s[u];if(f&&Tr(f)&&f.type===n)return u}return null}function Po(t,e,n,r){let i=t[n],o=e.data;if(VN(i)){let s=i;s.resolving&&OR(PR(o[n]));let a=lI(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?zt(s.injectImpl):null,l=v0(t,r,ne.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&kN(n,o[n],e)}finally{c!==null&&zt(c),lI(a),s.resolving=!1,I0()}}return i}function WN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ua)?t[ua]:void 0;return typeof e=="number"?e>=0?e&b0:KN:e}function dI(t,e,n){let r=1<<t;return!!(n[e+(t>>A0)]&r)}function hI(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var pi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return R0(this._tNode,this._lView,e,Nl(r),n)}};function KN(){return new pi(Ft(),be())}function Ii(t){return _a(()=>{let e=t.prototype.constructor,n=e[ul]||Rp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ul]||Rp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rp(t){return FI(t)?()=>{let e=Rp(wt(t));return e&&e()}:No(t)}function QN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[W]&2048&&!(s[W]&512);){let a=N0(o,s,n,r|ne.Self,Cn);if(a!==Cn)return a;let u=o.parent;if(!u){let c=s[n0];if(c){let l=c.get(n,Cn,r);if(l!==Cn)return l}u=P0(s),s=s[Vo]}o=u}return i}function P0(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[dn]:null}function wg(t){return qN(Ft(),t)}var Xc="__parameters__";function YN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function O0(t,e,n){return _a(()=>{let r=YN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(Xc)?u[Xc]:Object.defineProperty(u,Xc,{value:[]})[Xc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function ZN(t){let e=Et.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function XN(t){return typeof t=="function"}function Eg(t,e){t.forEach(n=>Array.isArray(n)?Eg(n,e):e(n))}function k0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function yl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function JN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function eP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function tP(t,e,n){let r=Ea(t,e);return r>=0?t[r|1]=n:(r=~r,eP(t,r,e,n)),r}function hp(t,e){let n=Ea(t,e);if(n>=0)return t[n|1]}function Ea(t,e){return nP(t,e,1)}function nP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var jo=qI(O0("Optional"),8);var Ig=qI(O0("SkipSelf"),4);function rP(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(aP))}return o}return vl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>uP(o));e.push(u)}),oP(),Promise.all(e).then(()=>{})}var vl=new Map,iP=new Set;function oP(){let t=vl;return vl=new Map,t}function sP(){return vl.size===0}function aP(t){return typeof t=="string"?t:t.text()}function uP(t){iP.delete(t)}var Ia=new P("ENVIRONMENT_INITIALIZER"),F0=new P("INJECTOR",-1),V0=new P("INJECTOR_DEF_TYPES"),_l=class{get(e,n=la){if(n===la){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}};function cP(...t){return{\u0275providers:L0(!0,t),\u0275fromNgModule:!0}}function L0(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Eg(e,s=>{let a=s;Np(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&j0(i,o),n}function j0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Dg(i,o=>{e(o,r)})}}function Np(t,e,n,r){if(t=wt(t),!t)return!1;let i=null,o=eI(t),s=!o&&Dr(t);if(!o&&!s){let u=t.ngModule;if(o=eI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)Np(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Eg(o.imports,l=>{Np(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&j0(c,e)}if(!a){let c=No(i)||(()=>new i);e({provide:i,useFactory:c,deps:Gt},i),e({provide:V0,useValue:i,multi:!0},i),e({provide:Ia,useValue:()=>I(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;Dg(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Dg(t,e){for(let n of t)VI(n)&&(n=n.\u0275providers),Array.isArray(n)?Dg(n,e):e(n)}var lP=_e({provide:String,useValue:_e});function B0(t){return t!==null&&typeof t=="object"&&lP in t}function dP(t){return!!(t&&t.useExisting)}function hP(t){return!!(t&&t.useFactory)}function Oo(t){return typeof t=="function"}function fP(t){return!!t.useClass}var Vl=new P("Set Injector scope."),ol={},pP={},fp;function Cg(){return fp===void 0&&(fp=new _l),fp}var kt=class{},ga=class extends kt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Op(e,s=>this.processProvider(s)),this.records.set(F0,Do(void 0,this)),i.has("environment")&&this.records.set(kt,Do(void 0,this));let o=this.records.get(Vl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(V0,Gt,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=wr(this),r=zt(void 0),i;try{return e()}finally{wr(n),zt(r)}}get(e,n=la,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(XE))return e[XE](this);r=Nl(r);let i,o=wr(this),s=zt(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=_P(e)&&Rl(e);c&&this.injectableDefInScope(c)?u=Do(Pp(e),ol):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ne.Self?Cg():this.parent;return n=r&ne.Optional&&n===la?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[cl]=a[cl]||[]).unshift(ft(e)),o)throw a;return GR(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(s),wr(o)}}resolveInjectorInitializers(){let e=wr(this),n=zt(void 0),r;try{let i=this.get(Ia,Gt,ne.Self);for(let o of i)o()}finally{wr(e),zt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(e){e=wt(e);let n=Oo(e)?e:wt(e&&e.provide),r=mP(e);if(!Oo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Do(void 0,ol,!0),i.factory=()=>Tp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===ol&&(n.value=pP,n.value=n.factory()),typeof n.value=="object"&&n.value&&vP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=wt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pp(t){let e=Rl(t),n=e!==null?e.factory:No(t);if(n!==null)return n;if(t instanceof P)throw new V(204,!1);if(t instanceof Function)return gP(t);throw new V(204,!1)}function gP(t){let e=t.length;if(e>0){let r=JN(e,"?");throw new V(204,!1)}let n=VR(t);return n!==null?()=>n.factory(t):()=>new t}function mP(t){if(B0(t))return Do(void 0,t.useValue);{let e=U0(t);return Do(e,ol)}}function U0(t,e,n){let r;if(Oo(t)){let i=wt(t);return No(i)||Pp(i)}else if(B0(t))r=()=>wt(t.useValue);else if(hP(t))r=()=>t.useFactory(...Tp(t.deps||[]));else if(dP(t))r=()=>I(wt(t.useExisting));else{let i=wt(t&&(t.useClass||t.provide));if(yP(t))r=()=>new i(...Tp(t.deps));else return No(i)||Pp(i)}return r}function Do(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yP(t){return!!t.deps}function vP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function _P(t){return typeof t=="function"||typeof t=="object"&&t instanceof P}function Op(t,e){for(let n of t)Array.isArray(n)?Op(n,e):n&&VI(n)?Op(n.\u0275providers,e):e(n)}function Sr(t,e){t instanceof ga&&t.assertNotDestroyed();let n,r=wr(t),i=zt(void 0);try{return e()}finally{wr(r),zt(i)}}function wP(t){if(!$I()&&!HR())throw new V(-203,!1)}function fI(t,e=null,n=null,r){let i=$0(t,e,n,r);return i.resolveInjectorInitializers(),i}function $0(t,e=null,n=null,r,i=new Set){let o=[n||Gt,cP(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new ga(o,e||Cg(),r||null,i)}var Yt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return fI({name:""},i,r,"");{let o=r.name??"";return fI({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=la,e.NULL=new _l,e.\u0275prov=k({token:e,providedIn:"any",factory:()=>I(F0)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var kp;function H0(t){kp=t}function EP(){if(kp!==void 0)return kp;if(typeof document<"u")return document;throw new V(210,!1)}var Ll=new P("AppId",{providedIn:"root",factory:()=>IP}),IP="ng",Tg=new P("Platform Initializer"),Vt=new P("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var bg=new P("CSP nonce",{providedIn:"root",factory:()=>EP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function q0(t){return t instanceof Function?t():t}function DP(t){return(t??N(Yt)).get(Vt)==="browser"}function z0(t){return(t.flags&128)===128}var Yn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Yn||{});var G0=new Map,CP=0;function TP(){return CP++}function bP(t){G0.set(t[Ol],t)}function AP(t){G0.delete(t[Ol])}var pI="__ngContext__";function _i(t,e){Ir(e)?(t[pI]=e[Ol],bP(e)):t[pI]=e}var SP;function Ag(t,e){return SP(t,e)}function Sg(t){let e=t[Ze];return ln(e)?e[Ze]:e}function W0(t){return Q0(t[fa])}function K0(t){return Q0(t[un])}function Q0(t){for(;t!==null&&!ln(t);)t=t[un];return t}function Co(t,e,n,r,i){if(r!=null){let o,s=!1;ln(r)?o=r:Ir(r)&&(s=!0,r=r[Jn]);let a=An(r);t===0&&n!==null?i==null?J0(e,n,a):wl(e,n,a,i||null,!0):t===1&&n!==null?wl(e,n,a,i||null,!0):t===2?GP(e,a,s):t===3&&e.destroyNode(a),o!=null&&KP(e,t,o,n,i)}}function xP(t,e){return t.createText(e)}function MP(t,e,n){t.setValue(e,n)}function Y0(t,e,n){return t.createElement(e,n)}function RP(t,e){let n=e[Xe];Da(t,e,n,2,null,null),e[Jn]=null,e[dn]=null}function NP(t,e,n,r,i,o){r[Jn]=i,r[dn]=e,Da(t,r,n,1,i,o)}function PP(t,e){Da(t,e,e[Xe],2,null,null)}function OP(t){let e=t[fa];if(!e)return pp(t[oe],t);for(;e;){let n=null;if(Ir(e))n=e[fa];else{let r=e[Wt];r&&(n=r)}if(!n){for(;e&&!e[un]&&e!==t;)Ir(e)&&pp(e[oe],e),e=e[Ze];e===null&&(e=t),Ir(e)&&pp(e[oe],e),n=e&&e[un]}e=n}}function kP(t,e,n,r){let i=Wt+r,o=n.length;r>0&&(n[i-1][un]=e),r<o-Wt?(e[un]=n[i],k0(n,Wt+r,e)):(n.push(e),e[un]=null),e[Ze]=n;let s=e[Pl];s!==null&&n!==s&&FP(s,e);let a=e[pa];a!==null&&a.insertView(t),h0(e),e[W]|=128}function FP(t,e){let n=t[hl],i=e[Ze][Ze][bn];e[bn]!==i&&(t[W]|=Ro.HasTransplantedViews),n===null?t[hl]=[e]:n.push(e)}function Z0(t,e){let n=t[hl],r=n.indexOf(e),i=e[Ze];n.splice(r,1)}function Fp(t,e){if(t.length<=Wt)return;let n=Wt+e,r=t[n];if(r){let i=r[Pl];i!==null&&i!==t&&Z0(i,r),e>0&&(t[n-1][un]=r[un]);let o=yl(t,Wt+e);RP(r[oe],r);let s=o[pa];s!==null&&s.detachView(o[oe]),r[Ze]=null,r[un]=null,r[W]&=-129}return r}function X0(t,e){if(!(e[W]&256)){let n=e[Xe];n.destroyNode&&Da(t,e,n,3,null,null),OP(e)}}function pp(t,e){if(!(e[W]&256)){e[W]&=-129,e[W]|=256,e[gi]&&xE(e[gi]),LP(t,e),VP(t,e),e[oe].type===1&&e[Xe].destroy();let n=e[Pl];if(n!==null&&ln(e[Ze])){n!==e[Ze]&&Z0(n,e);let r=e[pa];r!==null&&r.detachView(t)}AP(e)}}function VP(t,e){let n=t.cleanup,r=e[ha];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[ha]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function LP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof vi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Dn(4,a,u);try{u.call(a)}finally{Dn(5,a,u)}}else{Dn(4,i,o);try{o.call(i)}finally{Dn(5,i,o)}}}}}function jP(t,e,n){return BP(t,e.parent,n)}function BP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Jn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Tn.None||o===Tn.Emulated)return null}return Kt(r,n)}}function wl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function J0(t,e,n){t.appendChild(e,n)}function gI(t,e,n,r,i){r!==null?wl(t,e,n,r,i):J0(t,e,n)}function UP(t,e,n,r){t.removeChild(e,n,r)}function xg(t,e){return t.parentNode(e)}function $P(t,e){return t.nextSibling(e)}function HP(t,e,n){return zP(t,e,n)}function qP(t,e,n){return t.type&40?Kt(t,n):null}var zP=qP,mI;function Mg(t,e,n,r){let i=jP(t,r,e),o=e[Xe],s=r.parent||e[dn],a=HP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)gI(o,i,n[u],a,!1);else gI(o,i,n,a,!1);mI!==void 0&&mI(o,r,e,n,i)}function sl(t,e){if(e!==null){let n=e.type;if(n&3)return Kt(e,t);if(n&4)return Vp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return sl(t,r);{let i=t[e.index];return ln(i)?Vp(-1,i):An(i)}}else{if(n&32)return Ag(e,t)()||An(t[e.index]);{let r=eD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Sg(t[bn]);return sl(i,r)}else return sl(t,e.next)}}}return null}function eD(t,e){if(e!==null){let r=t[bn][dn],i=e.projection;return r.projection[i]}return null}function Vp(t,e){let n=Wt+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return sl(r,i)}return e[mi]}function GP(t,e,n){let r=xg(t,e);r&&UP(t,r,e,n)}function Rg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&_i(An(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Rg(t,e,n.child,r,i,o,!1),Co(e,t,i,a,o);else if(u&32){let c=Ag(n,r),l;for(;l=c();)Co(e,t,i,l,o);Co(e,t,i,a,o)}else u&16?WP(t,e,r,n,i,o):Co(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Da(t,e,n,r,i,o){Rg(n,r,t.firstChild,e,i,o,!1)}function WP(t,e,n,r,i,o){let s=n[bn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];Co(e,t,i,l,o)}else{let c=u,l=s[Ze];z0(r)&&(c.flags|=128),Rg(t,e,c,l,i,o,!0)}}function KP(t,e,n,r,i){let o=n[mi],s=An(n);o!==s&&Co(e,t,r,o,i);for(let a=Wt;a<n.length;a++){let u=n[a];Da(u[oe],u,t,e,r,o)}}function QP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),t.setStyle(n,r,i,o))}}function YP(t,e,n){t.setAttribute(e,"style",n)}function tD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function nD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&bp(t,e,r),i!==null&&tD(t,e,i),o!==null&&YP(t,e,o)}var Jc;function ZP(){if(Jc===void 0&&(Jc=null,Et.trustedTypes))try{Jc=Et.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Jc}function yI(t){return ZP()?.createScriptURL(t)||t}var El=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LI})`}};function Ca(t){return t instanceof El?t.changingThisBreaksApplicationSecurity:t}function Ng(t,e){let n=XP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${LI})`)}return n===e}function XP(t){return t instanceof El&&t.getTypeName()||null}var JP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rD(t){return t=String(t),t.match(JP)?t:"unsafe:"+t}var jl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jl||{});function er(t){let e=oD();return e?e.sanitize(jl.URL,t)||"":Ng(t,"URL")?Ca(t):rD(Ml(t))}function e1(t){let e=oD();if(e)return yI(e.sanitize(jl.RESOURCE_URL,t)||"");if(Ng(t,"ResourceURL"))return yI(Ca(t));throw new V(904,!1)}function t1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?e1:er}function iD(t,e,n){return t1(e,n)(t)}function oD(){let t=be();return t&&t[Mo].sanitizer}var n1="h",r1="b";var i1=(t,e,n)=>null;function Pg(t,e,n=!1){return i1(t,e,n)}var Lp=class{},Il=class{};function o1(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[s1]=t,e}var s1="ngComponent";var jp=class{resolveComponentFactory(e){throw o1(e)}},Bl=(()=>{let e=class e{};e.NULL=new jp;let t=e;return t})();function a1(){return Ul(Ft(),be())}function Ul(t,e){return new xr(Kt(t,e))}var xr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=a1;let t=e;return t})();var ma=class{},Di=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>u1();let t=e;return t})();function u1(){let t=be(),e=Ft(),n=Ar(e.index,t);return(Ir(n)?n:t)[Xe]}var c1=(()=>{let e=class e{};e.\u0275prov=k({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Zn=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},Og=new Zn("17.0.7"),gp={};function sD(t){return d1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function l1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function d1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Bp=class{constructor(){}supports(e){return sD(e)}create(e){return new Up(e)}},h1=(t,e)=>e,Up=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||h1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<vI(r,i,o)?n:r,a=vI(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,y=f+h;l<=y&&y<c&&(o[h]=f+1)}let d=s.previousIndex;o[d]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!sD(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,l1(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new $p(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},$p=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Hp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Dl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Hp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function vI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function _I(){return new kg([new Bp])}var kg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||_I()),deps:[[e,new Ig,new jo]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new V(901,!1)}};e.\u0275prov=k({token:e,providedIn:"root",factory:_I});let t=e;return t})();function Cl(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(An(o)),ln(o)&&f1(o,r);let s=n.type;if(s&8)Cl(t,e,n.child,r);else if(s&32){let a=Ag(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=eD(e,n);if(Array.isArray(a))r.push(...a);else{let u=Sg(e[bn]);Cl(u[oe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function f1(t,e){for(let n=Wt;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&Cl(r[oe],r,i,e)}t[mi]!==t[Jn]&&e.push(t[mi])}var aD=[];function p1(t){return t[gi]??g1(t)}function g1(t){let e=aD.pop()??Object.create(y1);return e.lView=t,e}function m1(t){t.lView[gi]!==t&&(t.lView=null,aD.push(t))}var y1=fe(A({},bE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Fl(t.lView)},consumerOnSignalRead(){this.lView[gi]=this}}),v1="ngOriginalError";function mp(t){return t[v1]}var Sn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&mp(e);for(;n&&mp(n);)n=mp(n);return n||null}},uD=new P("",{providedIn:"root",factory:()=>N(Sn).handleError.bind(void 0)});var cD=!1,_1=new P("",{providedIn:"root",factory:()=>cD});var Ci={};function B(t){lD(Qt(),be(),Lo()+t,!1)}function lD(t,e,n,r){if(!r)if((e[W]&3)===3){let o=t.preOrderCheckHooks;o!==null&&rl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&il(e,o,0,n)}yi(n)}function q(t,e=ne.Default){let n=be();if(n===null)return I(t,e);let r=Ft();return R0(r,n,wt(t),e)}function dD(){let t="invalid";throw new Error(t)}function w1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)yi(~i);else{let o=i,s=n[++r],a=n[++r];xN(s,o);let u=e[o];a(2,u)}}}finally{yi(-1)}}function $l(t,e,n,r,i,o,s,a,u,c,l){let d=e.blueprint.slice();return d[Jn]=i,d[W]=r|4|128|8,(c!==null||t&&t[W]&2048)&&(d[W]|=2048),l0(d),d[Ze]=d[Vo]=t,d[cn]=n,d[Mo]=s||t&&t[Mo],d[Xe]=a||t&&t[Xe],d[xo]=u||t&&t[xo]||null,d[dn]=o,d[Ol]=TP(),d[ll]=l,d[n0]=c,d[bn]=e.type==2?t[bn]:d,d}function Hl(t,e,n,r,i){let o=t.data[e];if(o===null)o=E1(t,e,n,r,i),SN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=CN();o.injectorIndex=s===null?-1:s.injectorIndex}return wa(o,!0),o}function E1(t,e,n,r,i){let o=g0(),s=m0(),a=s?o:o&&o.parent,u=t.data[e]=b1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function hD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fD(t,e,n,r,i){let o=Lo(),s=r&2;try{yi(-1),s&&e.length>Cr&&lD(t,e,Cr,!1),Dn(s?2:0,i),n(r,i)}finally{yi(o),Dn(s?3:1,i)}}function pD(t,e,n){if(i0(e)){let r=Ot(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ot(r)}}}function gD(t,e,n){p0()&&(N1(t,e,n,Kt(n,e)),(n.flags&64)===64&&ED(t,e,n))}function mD(t,e,n=Kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function yD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Fg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Fg(t,e,n,r,i,o,s,a,u,c,l){let d=Cr+r,h=d+i,f=I1(d,h),y=typeof c=="function"?c():c;return f[oe]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:y,incompleteFirstPass:!1,ssrId:l}}function I1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ci);return n}function D1(t,e,n,r){let o=r.get(_1,cD)||n===Tn.ShadowDom,s=t.selectRootElement(e,o);return C1(s),s}function C1(t){T1(t)}var T1=t=>null;function b1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return EN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function wI(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let o=t[i];r===null?EI(n,e,i,o):r.hasOwnProperty(i)&&EI(n,e,r[i],o)}return n}function EI(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function A1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,y=h?h.outputs:null;u=wI(d.inputs,l,u,f),c=wI(d.outputs,l,c,y);let v=u!==null&&s!==null&&!QI(e)?H1(u,l,s):null;a.push(v)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function S1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vD(t,e,n,r,i,o,s,a){let u=Kt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(Vg(t,n,l,r,i),kl(e)&&x1(n,e.index)):e.type&3?(r=S1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function x1(t,e){let n=Ar(e,t);n[W]&16||(n[W]|=64)}function _D(t,e,n,r){if(p0()){let i=r===null?null:{"":-1},o=O1(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&wD(t,e,n,s,i,a),i&&k1(n,r,i)}n.mergedAttrs=da(n.mergedAttrs,n.attrs)}function wD(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Mp(ml(n,e),t,r[c].type);V1(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=hD(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=da(n.mergedAttrs,l.hostAttrs),L1(t,n,e,u,l),F1(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}A1(t,n,o)}function M1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;R1(s)!=a&&s.push(a),s.push(n,r,o)}}function R1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function N1(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;kl(n)&&j1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ml(n,e),_i(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=Po(e,t,a,n);if(_i(c,e),s!==null&&$1(e,a-i,c,u,n,s),Tr(u)){let l=Ar(n.index,e);l[cn]=Po(e,t,a,n)}}}function ED(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=MN();try{yi(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Sp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&P1(u,c)}}finally{yi(-1),Sp(s)}}function P1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function O1(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(JR(e,s.selectors,!1))if(r||(r=[]),Tr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;qp(t,e,u)}else r.unshift(s),qp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function qp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function k1(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}}function F1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Tr(e)&&(n[""]=t)}}function V1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function L1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=No(i.type,!0)),s=new vi(o,Tr(i),q);t.blueprint[r]=s,n[r]=s,M1(t,e,r,hD(t,n,i.hostVars,Ci),i)}function j1(t,e,n){let r=Kt(e,t),i=yD(n),o=t[Mo].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ql(t,$l(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function B1(t,e,n,r,i,o){let s=Kt(t,e);U1(e[Xe],s,o,t.value,n,r,i)}function U1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Ml(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function $1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++];ID(r,n,u,c,l)}}function ID(t,e,n,r,i){let o=Ot(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{Ot(o)}}function H1(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}return r}function DD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function CD(t,e){let n=t.contentQueries;if(n!==null){let r=Ot(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];y0(o),a.contentQueries(2,e[s],s)}}}finally{Ot(r)}}}function ql(t,e){return t[fa]?t[aI][un]=e:t[fa]=e,t[aI]=e,e}function zp(t,e,n){y0(0);let r=Ot(null);try{e(t,n)}finally{Ot(r)}}function q1(t){return t[ha]||(t[ha]=[])}function z1(t){return t.cleanup||(t.cleanup=[])}function TD(t,e){let n=t[xo],r=n?n.get(Sn,null):null;r&&r.handleError(e)}function Vg(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=e[s],c=t.data[s];ID(c,u,r,a,i)}}function G1(t,e,n){let r=u0(e,t);MP(t[Xe],r,n)}var W1=100;function K1(t,e=!0){let n=t[Mo],r=n.rendererFactory,i=n.afterRenderEventManager,o=!1;o||(r.begin?.(),i?.begin());try{Q1(t)}catch(s){throw e&&TD(t,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function Q1(t){Gp(t,0);let e=0;for(;d0(t);){if(e===W1)throw new V(103,!1);e++,Gp(t,1)}}function Y1(t,e,n,r){let i=e[W];if((i&256)===256)return;let o=!1;!o&&e[Mo].inlineEffectRunner?.flush(),fg(e);let s=null,a=null;!o&&Z1(t)&&(a=p1(e),s=AE(a));try{l0(e),bN(t.bindingStartIndex),n!==null&&fD(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let d=t.preOrderCheckHooks;d!==null&&rl(e,d,null)}else{let d=t.preOrderHooks;d!==null&&il(e,d,0,null),lp(e,0)}if(X1(e),bD(e,0),t.contentQueries!==null&&CD(t,e),!o)if(u){let d=t.contentCheckHooks;d!==null&&rl(e,d)}else{let d=t.contentHooks;d!==null&&il(e,d,1),lp(e,1)}w1(t,e);let c=t.components;c!==null&&SD(e,c,0);let l=t.viewQuery;if(l!==null&&zp(2,l,r),!o)if(u){let d=t.viewCheckHooks;d!==null&&rl(e,d)}else{let d=t.viewHooks;d!==null&&il(e,d,2),lp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[cp]){for(let d of e[cp])d();e[cp]=null}o||(e[W]&=-73)}catch(u){throw Fl(e),u}finally{a!==null&&(SE(a,s),m1(a)),pg()}}function Z1(t){return t.type!==2}function bD(t,e){for(let n=W0(t);n!==null;n=K0(n)){n[W]&=~Ro.HasChildViewsToRefresh;for(let r=Wt;r<n.length;r++){let i=n[r];AD(i,e)}}}function X1(t){for(let e=W0(t);e!==null;e=K0(e)){if(!(e[W]&Ro.HasTransplantedViews))continue;let n=e[hl];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ze];gN(i)}}}function J1(t,e,n){let r=Ar(e,t);AD(r,n)}function AD(t,e){dg(t)&&Gp(t,e)}function Gp(t,e){let r=t[oe],i=t[W],o=t[gi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Hf(o)),o&&(o.dirty=!1),t[W]&=-9217,s)Y1(r,t,r.template,t[cn]);else if(i&8192){bD(t,1);let a=r.components;a!==null&&SD(t,a,1)}}function SD(t,e,n){for(let r=0;r<e.length;r++)J1(t,e[r],n)}function Lg(t){for(;t;){t[W]|=64;let e=Sg(t);if(uN(t)&&!e)return t;t=e}return null}var wi=class{get rootNodes(){let e=this._lView,n=e[oe];return Cl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return(this._lView[W]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ze];if(ln(e)){let n=e[dl],r=n?n.indexOf(this):-1;r>-1&&(Fp(e,r),yl(n,r))}this._attachedToViewContainer=!1}X0(this._lView[oe],this._lView)}onDestroy(e){f0(this._lView,e)}markForCheck(){Lg(this._cdRefInjectingView||this._lView)}detach(){this._lView[W]&=-129}reattach(){h0(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,K1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,PP(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e}},Bo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eO;let t=e;return t})();function eO(t){return tO(Ft(),be(),(t&16)===16)}function tO(t,e,n){if(kl(t)&&!n){let r=Ar(t.index,e);return new wi(r,r)}else if(t.type&47){let r=e[bn];return new wi(r,e)}return null}var xD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Wp=class extends xD{constructor(e){super(),this._lView=e}onDestroy(e){return f0(this._lView,e),()=>yN(this._lView,e)}};function nO(){return new Wp(be())}var II=new Set;function jg(t){II.has(t)||(II.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Kp=class extends $e{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=yp(o),i&&(i=yp(i)),s&&(s=yp(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}};function yp(t){return e=>{setTimeout(t,void 0,e)}}var xe=Kp;function DI(...t){}function rO(){let t=typeof Et.requestAnimationFrame=="function",e=Et[t?"requestAnimationFrame":"setTimeout"],n=Et[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ae=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xe(!1),this.onMicrotaskEmpty=new xe(!1),this.onStable=new xe(!1),this.onError=new xe(!1),typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=rO().nativeRequestAnimationFrame,sO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,iO,DI,DI);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},iO={};function Bg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function oO(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Et,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Qp(t),t.isCheckStableRunning=!0,Bg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Qp(t))}function sO(t){let e=()=>{oO(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(aO(a))return n.invokeTask(i,o,s,a);try{return CI(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),TI(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return CI(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),TI(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Qp(t),Bg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Qp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function CI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function TI(t){t._nesting--,Bg(t)}var Yp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xe,this.onMicrotaskEmpty=new xe,this.onStable=new xe,this.onError=new xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}},MD=new P("",{providedIn:"root",factory:RD});function RD(){let t=N(ae),e=!0,n=new J(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),r=new J(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});let s=t.onUnstable.subscribe(()=>{ae.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}});return ra(n,r.pipe(aa()))}function aO(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function uO(t="zone.js",e){return t==="noop"?new Yp:t==="zone.js"?new ae(e):t}var To=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(To||{}),cO={destroy(){}};function Ug(t,e){!e&&wP(Ug);let n=e?.injector??N(Yt);if(!DP(n))return cO;jg("NgAfterNextRender");let r=n.get(ND),i=r.handler??=new Xp,o=e?.phase??To.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(xD).onDestroy(s),u=new Zp(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}var Zp=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ae),this.errorHandler=e.get(Sn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Xp=class{constructor(){this.executingCallbacks=!1,this.buckets={[To.EarlyRead]:new Set,[To.Write]:new Set,[To.MixedReadWrite]:new Set,[To.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new V(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},ND=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=k({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function lO(t,e){let n=Ar(e,t),r=n[oe];dO(r,n);let i=n[Jn];i!==null&&n[ll]===null&&(n[ll]=Pg(i,n[xo])),$g(r,n,n[cn])}function dO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function $g(t,e,n){fg(e);try{let r=t.viewQuery;r!==null&&zp(1,r,n);let i=t.template;i!==null&&fD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&CD(t,e),t.staticViewQueries&&zp(2,t.viewQuery,n);let o=t.components;o!==null&&hO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,pg()}}function hO(t,e){for(let n=0;n<e.length;n++)lO(t,e[n])}function Jp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ZE(i,a);else if(o==2){let u=a,c=e[++s];r=ZE(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Tl=class extends Bl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Dr(e);return new ko(n,this.ngModule)}};function bI(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function fO(t){let e=t.toLowerCase();return e==="svg"?hN:e==="math"?fN:null}var eg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Nl(r);let i=this.injector.get(e,gp,r);return i!==gp||n===gp?i:this.parentInjector.get(e,n,r)}},ko=class extends Il{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=bI(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return bI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=rN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof kt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new eg(e,o):e,a=s.get(ma,null);if(a===null)throw new V(407,!1);let u=s.get(c1,null),c=s.get(ND,null),l={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=r?D1(d,r,this.componentDef.encapsulation,s):Y0(d,h,fO(h)),y=4608,v=this.componentDef.onPush?576:528,_=this.componentDef.signals?y:v,T=null;f!==null&&(T=Pg(f,s,!0));let L=Fg(0,null,null,1,0,null,null,null,null,null,null),b=$l(null,L,null,_,null,null,l,d,s,null,T);fg(b);let H,z;try{let Q=this.componentDef,ve,At=null;Q.findHostDirectiveDefs?(ve=[],At=new Map,Q.findHostDirectiveDefs(Q,ve,At),ve.push(Q)):ve=[Q];let jf=pO(b,f),vc=gO(jf,f,Q,ve,b,l,d);z=c0(L,Cr),f&&vO(d,Q,f,r),n!==void 0&&_O(z,this.ngContentSelectors,n),H=yO(vc,Q,ve,At,b,[wO]),$g(L,b,null)}finally{pg()}return new tg(this.componentType,H,Ul(z,b),b,z)}},tg=class extends Lp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Vg(o[oe],o,i,e,n),this.previousInputValues.set(e,n);let s=Ar(this._tNode.index,o);Lg(s)}}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function pO(t,e){let n=t[oe],r=Cr;return t[r]=e,Hl(n,r,2,"#host",null)}function gO(t,e,n,r,i,o,s){let a=i[oe];mO(r,t,e,s);let u=null;e!==null&&(u=Pg(e,i[xo]));let c=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=$l(i,yD(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&qp(a,t,r.length-1),ql(i,d),i[t.index]=d}function mO(t,e,n,r){for(let i of t)e.mergedAttrs=da(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Jp(e,e.mergedAttrs,!0),n!==null&&nD(r,n,e))}function yO(t,e,n,r,i,o){let s=Ft(),a=i[oe],u=Kt(s,i);wD(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Po(i,a,d,s);_i(h,i)}ED(a,i,s),u&&_i(u,i);let c=Po(i,a,s.directiveStart+s.componentOffset,s);if(t[cn]=i[cn]=c,o!==null)for(let l of o)l(c,e);return pD(a,s,t),c}function vO(t,e,n,r){if(r)bp(t,n,["ng-version",Og.full]);else{let{attrs:i,classes:o}=iN(e.selectors[0]);i&&bp(t,n,i),o&&o.length>0&&tD(t,n,o.join(" "))}}function _O(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function wO(){let t=Ft();vg(be()[oe],t)}function EO(t){return Object.getPrototypeOf(t.prototype).constructor}function fn(t){let e=EO(t.type),n=!0,r=[t];for(;e;){let i;if(Tr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=el(t.inputs),s.inputTransforms=el(t.inputTransforms),s.declaredInputs=el(t.declaredInputs),s.outputs=el(t.outputs);let a=i.hostBindings;a&&TO(t,a);let u=i.viewQuery,c=i.contentQueries;if(u&&DO(t,u),c&&CO(t,c),Zc(t.inputs,i.inputs),Zc(t.declaredInputs,i.declaredInputs),Zc(t.outputs,i.outputs),i.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),Zc(s.inputTransforms,i.inputTransforms)),Tr(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===fn&&(n=!1)}}e=Object.getPrototypeOf(e)}IO(r)}function IO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=da(i.hostAttrs,n=da(n,i.hostAttrs))}}function el(t){return t===So?{}:t===Gt?[]:t}function DO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function CO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function TO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Hg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function zl(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ta(t,e,n,r){let i=be(),o=hg();if(zl(i,o,e)){let s=Qt(),a=gg();B1(a,i,t,e,n,r)}return Ta}function PD(t,e,n,r){return zl(t,hg(),n)?e+Ml(n)+r:Ci}function tl(t,e){return t<<17|e<<2}function Ei(t){return t>>17&32767}function bO(t){return(t&2)==2}function AO(t,e){return t&131071|e<<17}function ng(t){return t|2}function Fo(t){return(t&131068)>>2}function vp(t,e){return t&-131069|e<<2}function SO(t){return(t&1)===1}function rg(t){return t|1}function xO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ei(s),u=Fo(s);t[r]=n;let c=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Ea(d,l)>0)&&(c=!0)}else l=n;if(i)if(u!==0){let h=Ei(t[a+1]);t[r+1]=tl(h,a),h!==0&&(t[h+1]=vp(t[h+1],r)),t[a+1]=AO(t[a+1],r)}else t[r+1]=tl(a,0),a!==0&&(t[a+1]=vp(t[a+1],r)),a=r;else t[r+1]=tl(u,0),a===0?a=r:t[u+1]=vp(t[u+1],r),u=r;c&&(t[r+1]=ng(t[r+1])),AI(t,l,r,!0,o),AI(t,l,r,!1,o),MO(e,l,t,r,o),s=tl(a,u),o?e.classBindings=s:e.styleBindings=s}function MO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ea(o,e)>=0&&(n[r+1]=rg(n[r+1]))}function AI(t,e,n,r,i){let o=t[n+1],s=e===null,a=r?Ei(o):Fo(o),u=!1;for(;a!==0&&(u===!1||s);){let c=t[a],l=t[a+1];RO(c,e)&&(u=!0,t[a+1]=r?rg(l):ng(l)),a=r?Ei(l):Fo(l)}u&&(t[n+1]=r?ng(o):rg(o))}function RO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ea(t,e)>=0:!1}function se(t,e,n){let r=be(),i=hg();if(zl(r,i,e)){let o=Qt(),s=gg();vD(o,s,r,t,e,r[Xe],n,!1)}return se}function SI(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Vg(t,n,o[s],s,r)}function tr(t,e){return NO(t,e,null,!0),tr}function NO(t,e,n,r){let i=be(),o=Qt(),s=AN(2);if(o.firstUpdatePass&&OO(o,t,s,r),e!==Ci&&zl(i,s,e)){let a=o.data[Lo()];jO(o,a,i,i[Xe],t,i[s+1]=BO(e,n),r,s)}}function PO(t,e){return e>=t.expandoStartIndex}function OO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Lo()],s=PO(t,n);UO(o,r)&&e===null&&!s&&(e=!1),e=kO(i,o,e,r),xO(i,o,e,n,s,r)}}function kO(t,e,n,r){let i=RN(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=_p(null,t,e,n,r),n=ya(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=_p(i,t,e,n,r),o===null){let u=FO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=_p(null,t,e,u[1],r),u=ya(u,e.attrs,r),VO(t,e,r,u))}else o=LO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function FO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Fo(r)!==0)return t[Ei(r)]}function VO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ei(i)]=r}function LO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ya(r,s,n)}return ya(r,e.attrs,n)}function _p(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ya(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ya(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),tP(t,s,n?!0:e[++o]))}return t===void 0?null:t}function jO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,c=u[a+1],l=SO(c)?xI(u,e,n,i,Fo(c),s):void 0;if(!bl(l)){bl(o)||bO(c)&&(o=xI(u,null,n,i,a,s));let d=u0(Lo(),n);QP(r,s,d,i,o)}}function xI(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=l===null,h=n[i+1];h===Ci&&(h=d?Gt:void 0);let f=d?hp(h,r):l===r?h:void 0;if(c&&!bl(f)&&(f=hp(u,r)),bl(f)&&(a=f,s))return a;let y=t[i+1];i=s?Ei(y):Fo(y)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=hp(u,r))}return a}function bl(t){return t!==void 0}function BO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(Ca(t)))),t}function UO(t,e){return(t.flags&(e?8:16))!==0}var HG=new RegExp(`^(\\d+)*(${r1}|${n1})*(.*)`);var $O=(t,e)=>null;function MI(t,e){return $O(t,e)}function HO(t,e,n,r){let i=e.tView,s=t[W]&4096?4096:16,a=$l(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),u=t[e.index];a[Pl]=u;let c=t[pa];return c!==null&&(a[pa]=c.createEmbeddedView(i)),$g(i,a,n),a}function RI(t,e){return!e||e.firstChild===null||z0(t)}function qO(t,e,n,r=!0){let i=e[oe];if(kP(i,e,t,n),r){let s=Vp(n,t),a=e[Xe],u=xg(a,t[mi]);u!==null&&NP(i,t[dn],a,e,u,s)}let o=e[ll];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Uo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=zO;let t=e;return t})();function zO(){let t=Ft();return WO(t,be())}var GO=Uo,OD=class extends GO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=_g(this._hostTNode,this._hostLView);if(T0(e)){let n=gl(e,this._hostLView),r=pl(e),i=n[oe].data[r+8];return new pi(i,n)}else return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=NI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=MI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,RI(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!XN(e),a;if(s)a=n;else{let y=n||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let u=s?e:new ko(Dr(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let v=(s?c:this.parentInjector).get(kt,null);v&&(o=v)}let l=Dr(u.componentType??{}),d=MI(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,o);return this.insertImpl(f.hostView,a,RI(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(pN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ze],c=new OD(u,u[dn],u[Ze]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return qO(s,i,o,r),e.attachToViewContainerRef(),k0(wp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=NI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Fp(this._lContainer,n);r&&(yl(wp(this._lContainer),n),X0(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Fp(this._lContainer,n);return r&&yl(wp(this._lContainer),n)!=null?new wi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function NI(t){return t[dl]}function wp(t){return t[dl]||(t[dl]=[])}function WO(t,e){let n,r=e[t.index];return ln(r)?n=r:(n=DD(r,e,null,t),e[t.index]=n,ql(e,n)),QO(n,e,t,r),new OD(n,t,e)}function KO(t,e){let n=t[Xe],r=n.createComment(""),i=Kt(e,t),o=xg(n,i);return wl(n,o,r,$P(n,i),!1),r}var QO=XO,YO=(t,e,n)=>!1;function ZO(t,e,n){return YO(t,e,n)}function XO(t,e,n,r){if(t[mi])return;let i;n.type&8?i=An(r):i=KO(e,n),t[mi]=i}function JO(t,e,n,r,i,o,s,a,u){let c=e.consts,l=Hl(e,t,4,s||null,fl(c,a));_D(e,n,l,fl(c,u)),vg(e,l);let d=l.tView=Fg(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function pt(t,e,n,r,i,o,s,a){let u=be(),c=Qt(),l=t+Cr,d=c.firstCreatePass?JO(l,c,u,e,n,r,i,o,s):c.data[l];wa(d,!1);let h=ek(c,u,d,t);mg()&&Mg(c,u,h,d),_i(h,u);let f=DD(h,u,h,d);return u[l]=f,ql(u,f),ZO(f,d,u),lg(d)&&gD(c,u,d),s!=null&&mD(u,d,a),pt}var ek=tk;function tk(t,e,n,r){return yg(!0),e[Xe].createComment("")}function nk(t,e,n,r,i,o){let s=e.consts,a=fl(s,i),u=Hl(e,t,2,r,a);return _D(e,n,u,fl(s,o)),u.attrs!==null&&Jp(u,u.attrs,!1),u.mergedAttrs!==null&&Jp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function D(t,e,n,r){let i=be(),o=Qt(),s=Cr+t,a=i[Xe],u=o.firstCreatePass?nk(s,o,i,e,n,r):o.data[s],c=rk(o,i,u,a,e,t);i[s]=c;let l=lg(u);return wa(u,!0),nD(a,c,u),(u.flags&32)!==32&&mg()&&Mg(o,i,c,u),vN()===0&&_i(c,i),_N(),l&&(gD(o,i,u),pD(o,u,i)),r!==null&&mD(i,u),D}function C(){let t=Ft();m0()?TN():(t=t.parent,wa(t,!1));let e=t;IN(e)&&DN(),wN();let n=Qt();return n.firstCreatePass&&(vg(n,t),i0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&LN(e)&&SI(n,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&jN(e)&&SI(n,e,be(),e.stylesWithoutHost,!1),C}function ze(t,e,n,r){return D(t,e,n,r),C(),ze}var rk=(t,e,n,r,i,o)=>(yg(!0),Y0(r,i,ON()));function Lt(){return be()}var Al="en-US";var ik=Al;function ok(t){kR(t,"Expected localeId to be defined"),typeof t=="string"&&(ik=t.toLowerCase().replace(/_/g,"-"))}function Ti(t){return!!t&&typeof t.then=="function"}function kD(t){return!!t&&typeof t.subscribe=="function"}function ue(t,e,n,r){let i=be(),o=Qt(),s=Ft();return ak(o,i,i[Xe],s,t,e,r),ue}function sk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ha],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function ak(t,e,n,r,i,o,s){let a=lg(r),c=t.firstCreatePass&&z1(t),l=e[cn],d=q1(e),h=!0;if(r.type&3||s){let v=Kt(r,e),_=s?s(v):v,T=d.length,L=s?H=>s(An(H[r.index])):r.index,b=null;if(!s&&a&&(b=sk(t,e,i,r.index)),b!==null){let H=b.__ngLastListenerFn__||b;H.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1}else{o=OI(r,e,l,o,!1);let H=n.listen(_,i,o);d.push(o,H),c&&c.push(i,L,T,T+1)}}else o=OI(r,e,l,o,!1);let f=r.outputs,y;if(h&&f!==null&&(y=f[i])){let v=y.length;if(v)for(let _=0;_<v;_+=2){let T=y[_],L=y[_+1],z=e[T][L].subscribe(o),Q=d.length;d.push(o,z),c&&c.push(i,r.index,Q,-(Q+1))}}}function PI(t,e,n,r){try{return Dn(6,e,n),n(r)!==!1}catch(i){return TD(t,i),!1}finally{Dn(7,e,n)}}function OI(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Ar(t.index,e):e;Lg(a);let u=PI(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=PI(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function he(t=1){return PN(t)}function nr(t,e,n){return Gl(t,"",e,"",n),nr}function Gl(t,e,n,r,i){let o=be(),s=PD(o,e,n,r);if(s!==Ci){let a=Qt(),u=gg();vD(a,u,o,t,s,o[Xe],i,!1)}return Gl}function O(t,e=""){let n=be(),r=Qt(),i=t+Cr,o=r.firstCreatePass?Hl(r,i,1,e,null):r.data[i],s=uk(r,n,o,e,t);n[i]=s,mg()&&Mg(r,n,s,o),wa(o,!1)}var uk=(t,e,n,r,i)=>(yg(!0),xP(e[Xe],r));function Rt(t){return ct("",t,""),Rt}function ct(t,e,n){let r=be(),i=PD(r,t,e,n);return i!==Ci&&G1(r,Lo(),i),ct}function ck(t,e,n){let r=Qt();if(r.firstCreatePass){let i=Tr(t);ig(n,r.data,r.blueprint,i,!0),ig(e,r.data,r.blueprint,i,!1)}}function ig(t,e,n,r,i){if(t=wt(t),Array.isArray(t))for(let o=0;o<t.length;o++)ig(t[o],e,n,r,i);else{let o=Qt(),s=be(),a=Ft(),u=Oo(t)?t:wt(t.provide),c=U0(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Oo(t)||!t.multi){let f=new vi(c,i,q),y=Ip(u,e,i?l:l+h,d);y===-1?(Mp(ml(a,s),o,u),Ep(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[y]=f,s[y]=f)}else{let f=Ip(u,e,l+h,d),y=Ip(u,e,l,l+h),v=f>=0&&n[f],_=y>=0&&n[y];if(i&&!_||!i&&!v){Mp(ml(a,s),o,u);let T=hk(i?dk:lk,n.length,i,r,c);!i&&_&&(n[y].providerFactory=T),Ep(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(T),s.push(T)}else{let T=FD(n[i?y:f],c,!i&&r);Ep(o,t,f>-1?f:y,T)}!i&&r&&_&&n[y].componentProviders++}}}function Ep(t,e,n,r){let i=Oo(e),o=fP(e);if(i||o){let u=(o?wt(e.useClass):e).prototype.ngOnDestroy;if(u){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=c.indexOf(n);l===-1?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function FD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ip(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function lk(t,e,n,r){return og(this.multi,[])}function dk(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Po(n,n[oe],this.providerFactory.index,r);o=a.slice(0,s),og(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],og(i,o);return o}function og(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function hk(t,e,n,r,i){let o=new vi(t,n,q);return o.multi=[],o.index=e,o.componentProviders=0,FD(o,i,r&&!n),o}function bi(t,e=[]){return n=>{n.providersResolver=(r,i)=>ck(r,i?i(t):t,e)}}var br=class{},va=class{};var Sl=class extends br{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tl(this);let i=JI(e);this._bootstrapComponents=q0(i.bootstrap),this._r3Injector=$0(e,n,[{provide:br,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xl=class extends va{constructor(e){super(),this.moduleType=e}create(e){return new Sl(this.moduleType,e,[])}};function fk(t,e,n){return new Sl(t,e,n)}var sg=class extends br{constructor(e){super(),this.componentFactoryResolver=new Tl(this),this.instance=null;let n=new ga([...e.providers,{provide:br,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver}],e.parent||Cg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wl(t,e,n=null){return new sg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var pk=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=L0(!1,r.type),o=i.length>0?Wl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=k({token:e,providedIn:"environment",factory:()=>new e(I(kt))});let t=e;return t})();function VD(t){jg("NgStandalone"),t.getStandaloneInjector=e=>e.get(pk).getOrCreateStandaloneInjector(t)}var Kl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=yk;let t=e;return t})(),gk=Kl,mk=class extends gk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=HO(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new wi(i)}};function yk(){return vk(Ft(),be())}function vk(t,e){return t.type&4?new mk(e,t,Ul(t,e)):null}var nl=null;function _k(t){nl!==null&&(t.defaultEncapsulation!==nl.defaultEncapsulation||t.preserveWhitespaces!==nl.preserveWhitespaces)||(nl=t)}var Ql=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),qg=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new at(!1)}add(){this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ag=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Yl=(()=>{let e=class e{compileModuleSync(r){return new xl(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=JI(r),s=q0(o.declarations).reduce((a,u)=>{let c=Dr(u);return c&&a.push(new ko(c)),a},[]);return new ag(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wk=new P("compilerOptions");var zg=new P(""),ba=new P(""),Zl=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gg||(Ek(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(I(ae),I(Xl),I(ba))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),Xl=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Gg?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function Ek(t){Gg=t}var Gg,Jl=new P("Application Initializer"),LD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=N(Jl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Ti(s))r.push(s);else if(kD(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wg=new P("appBootstrapListener");function Ik(t,e,n){let r=new xl(n);return Promise.resolve(r)}function Dk(){ME(()=>{throw new V(600,!1)})}function Ck(t){return t.isBoundToModule}function Tk(t,e,n){try{let r=n();return Ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function jD(t,e){return Array.isArray(e)?e.reduce(jD,t):A(A({},t),e)}var $o=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(uD),this.zoneIsStable=N(MD),this.componentTypes=[],this.components=[],this.isStable=N(qg).hasPendingTasks.pipe(Te(r=>r?j(!1):this.zoneIsStable),ia()),this._injector=N(kt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Il;if(!this._injector.get(LD).done){let y="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&XI(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new V(405,!1)}let a;o?a=r:a=this._injector.get(Bl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=Ck(a)?void 0:this._injector.get(br),c=i||a.selector,l=a.create(Yt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(zg,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),al(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new V(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;al(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Wg,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>al(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new V(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function al(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kI(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var bk=(()=>{let e=class e{constructor(){this.zone=N(ae),this.applicationRef=N($o)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ak(t){return[{provide:ae,useFactory:t},{provide:Ia,multi:!0,useFactory:()=>{let e=N(bk,{optional:!0});return()=>e.initialize()}},{provide:uD,useFactory:Sk},{provide:MD,useFactory:RD}]}function Sk(){let t=N(ae),e=N(Sn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function xk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}function Mk(){return typeof $localize<"u"&&$localize.locale||Al}var Kg=new P("LocaleId",{providedIn:"root",factory:()=>N(Kg,ne.Optional|ne.SkipSelf)||Mk()});var BD=new P("PlatformDestroyListeners"),UD=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=uO(i?.ngZone,xk({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=fk(r.moduleType,this.injector,Ak(()=>o)),a=s.injector.get(Sn,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{al(this._modules,s),u.unsubscribe()})}),Tk(a,o,()=>{let u=s.injector.get(LD);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(Kg,Al);return ok(c||Al),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=jD({},i);return Ik(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get($o);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new V(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new V(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(BD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(I(Yt))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ca=null,$D=new P("AllowMultipleToken");function Rk(t){if(ca&&!ca.get($D,!1))throw new V(400,!1);Dk(),ca=t;let e=t.get(UD);return Ok(t),e}function Qg(t,e,n=[]){let r=`Platform: ${e}`,i=new P(r);return(o=[])=>{let s=HD();if(!s||s.injector.get($D,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):Rk(Nk(a,r))}return Pk(i)}}function Nk(t=[],e){return Yt.create({name:e,providers:[{provide:Vl,useValue:"platform"},{provide:BD,useValue:new Set([()=>ca=null])},...t]})}function Pk(t){let e=HD();if(!e)throw new V(401,!1);return e}function HD(){return ca?.get(UD)??null}function Ok(t){t.get(Tg,null)?.forEach(n=>n())}function Yg(){return!1}var qD=Qg(null,"core",[]),zD=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(I($o))},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({});let t=e;return t})();function Mr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function GD(t){let e=Dr(t);if(!e)return null;let n=new ko(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Zg=null;function xn(){return Zg}function ZD(t){Zg||(Zg=t)}var ed=class{},It=new P("DocumentToken"),tm=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>N(kk))(),providedIn:"platform"});let t=e;return t})(),XD=new P("Location Initialized"),kk=(()=>{let e=class e extends tm{constructor(){super(),this._doc=N(It),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xn().getBaseHref(this._doc)}onPopState(r){let i=xn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=xn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function nm(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function WD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function rr(t){return t&&t[0]!=="?"?"?"+t:t}var ir=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>N(rm))(),providedIn:"root"});let t=e;return t})(),JD=new P("appBaseHref"),rm=(()=>{let e=class e extends ir{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??N(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return nm(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+rr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+rr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+rr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(I(tm),I(JD,8))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eC=(()=>{let e=class e extends ir{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=nm(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+rr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+rr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(I(tm),I(JD,8))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),Ho=(()=>{let e=class e{constructor(r){this._subject=new xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Lk(WD(KD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+rr(i))}normalize(r){return e.stripTrailingSlash(Vk(this._basePath,KD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+rr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+rr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=rr,e.joinWithSlash=nm,e.stripTrailingSlash=WD,e.\u0275fac=function(i){return new(i||e)(I(ir))},e.\u0275prov=k({token:e,factory:()=>Fk(),providedIn:"root"});let t=e;return t})();function Fk(){return new Ho(I(ir))}function Vk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function KD(t){return t.replace(/\/index.html$/,"")}function Lk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function tC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Xg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mn=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Xg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),QD(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);QD(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Uo),q(Kl),q(kg))},e.\u0275dir=Je({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function QD(t,e){t.context.$implicit=e.item}var Rr=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Jg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){YD("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){YD("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Uo),q(Kl))},e.\u0275dir=Je({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Jg=class{constructor(){this.$implicit=null,this.ngIf=null}};function YD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}var nC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({});let t=e;return t})(),rC="browser",jk="server";function Ai(t){return t===jk}var iC=(()=>{let e=class e{};e.\u0275prov=k({token:e,providedIn:"root",factory:()=>new em(I(It),window)});let t=e;return t})(),em=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=Bk(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function Bk(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var td=class{};var sm=class extends ed{constructor(){super(...arguments),this.supportsDOMEvents=!0}},am=class t extends sm{static makeCurrent(){ZD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=$k();return n==null?null:Hk(n)}resetBaseElement(){Aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tC(document.cookie,e)}},Aa=null;function $k(){return Aa=Aa||document.querySelector("base"),Aa?Aa.getAttribute("href"):null}function Hk(t){return new URL(t,document.baseURI).pathname}var um=class{addToWindow(e){Et.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new V(5103,!1);return o},Et.getAllAngularTestabilities=()=>e.getAllTestabilities(),Et.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Et.getAllAngularTestabilities(),o=i.length,s=!1,a=function(u){s=s||u,o--,o==0&&r(s)};i.forEach(u=>{u.whenStable(a)})};Et.frameworkStabilizers||(Et.frameworkStabilizers=[]),Et.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?xn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},qk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),cm=new P("EventManagerPlugins"),uC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new V(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(I(cm),I(ae))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),nd=class{constructor(e){this._doc=e}},im="ng-app-id",cC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ai(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${im}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(im),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(im,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(I(It),I(Ll),I(bg,8),I(Vt))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),om={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dm=/%COMP%/g,lC="%COMP%",zk=`_nghost-${lC}`,Gk=`_ngcontent-${lC}`,Wk=!0,Kk=new P("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>Wk});function Qk(t){return Gk.replace(dm,t)}function Yk(t){return zk.replace(dm,t)}function dC(t,e){return e.map(n=>n.replace(dm,t))}var oC=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ai(u),this.defaultRenderer=new Sa(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Tn.ShadowDom&&(i=fe(A({},i),{encapsulation:Tn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof rd?o.applyToHost(r):o instanceof xa&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Tn.Emulated:s=new rd(c,l,i,this.appId,d,a,u,h);break;case Tn.ShadowDom:return new lm(c,l,r,i,a,u,this.nonce,h);default:s=new xa(c,l,i,d,a,u,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(I(uC),I(cC),I(Ll),I(Kk),I(It),I(Vt),I(ae),I(bg))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),Sa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(om[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=om[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=om[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yn.DashCase|Yn.Important)?e.style.setProperty(n,r,i&Yn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=xn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function sC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var lm=class extends Sa{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=dC(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xa=class extends Sa{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?dC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rd=class extends xa{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=Qk(c),this.hostAttr=Yk(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Zk=(()=>{let e=class e extends nd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(I(It))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),aC=["alt","control","meta","shift"],Xk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},eF=(()=>{let e=class e extends nd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),aC.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=Xk[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),aC.forEach(a=>{if(a!==o){let u=Jk[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(I(It))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function tF(){am.makeCurrent()}function nF(){return new Sn}function rF(){return H0(document),document}var iF=[{provide:Vt,useValue:rC},{provide:Tg,useValue:tF,multi:!0},{provide:It,useFactory:rF,deps:[]}],hC=Qg(qD,"browser",iF),oF=new P(""),sF=[{provide:ba,useClass:um,deps:[]},{provide:zg,useClass:Zl,deps:[ae,Xl,ba]},{provide:Zl,useClass:Zl,deps:[ae,Xl,ba]}],aF=[{provide:Vl,useValue:"root"},{provide:Sn,useFactory:nF,deps:[]},{provide:cm,useClass:Zk,multi:!0,deps:[It,ae,Vt]},{provide:cm,useClass:eF,multi:!0,deps:[It]},oC,cC,uC,{provide:ma,useExisting:oC},{provide:td,useClass:qk,deps:[]},[]],fC=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Ll,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(I(oF,12))},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({providers:[...aF,...sF],imports:[nC,zD]});let t=e;return t})();function uF(){return new hm(I(It))}var hm=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(I(It))},e.\u0275prov=k({token:e,factory:function(i){let o=null;return i?o=new i:o=uF(),o},providedIn:"root"});let t=e;return t})();var CC=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(q(Di),q(xr))},e.\u0275dir=Je({type:e});let t=e;return t})(),TC=(()=>{let e=class e extends CC{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ii(e)))(o||e)}})(),e.\u0275dir=Je({type:e,features:[fn]});let t=e;return t})(),mm=new P("NgValueAccessor");var cF={provide:mm,useExisting:Xn(()=>dd),multi:!0};function lF(){let t=xn()?xn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var dF=new P("CompositionEventMode"),dd=(()=>{let e=class e extends CC{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!lF())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(q(Di),q(xr),q(dF,8))},e.\u0275dir=Je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&ue("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[bi([cF]),fn]});let t=e;return t})();function hF(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var hd=new P("NgValidators"),ym=new P("NgAsyncValidators");function fF(t){return hF(t.value)?{required:!0}:null}function gC(t){return null}function bC(t){return t!=null}function AC(t){return Ti(t)?de(t):t}function SC(t){let e={};return t.forEach(n=>{e=n!=null?A(A({},e),n):e}),Object.keys(e).length===0?null:e}function xC(t,e){return e.map(n=>n(t))}function pF(t){return!t.validate}function MC(t){return t.map(e=>pF(e)?e:n=>e.validate(n))}function gF(t){if(!t)return null;let e=t.filter(bC);return e.length==0?null:function(n){return SC(xC(n,e))}}function vm(t){return t!=null?gF(MC(t)):null}function mF(t){if(!t)return null;let e=t.filter(bC);return e.length==0?null:function(n){let r=xC(n,e).map(AC);return ip(r).pipe($(SC))}}function _m(t){return t!=null?mF(MC(t)):null}function mC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function RC(t){return t._rawValidators}function NC(t){return t._rawAsyncValidators}function fm(t){return t?Array.isArray(t)?t:[t]:[]}function od(t,e){return Array.isArray(t)?t.includes(e):t===e}function yC(t,e){let n=fm(e);return fm(t).forEach(i=>{od(n,i)||n.push(i)}),n}function vC(t,e){return fm(e).filter(n=>!od(t,n))}var sd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_m(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Nr=class extends sd{get formDirective(){return null}get path(){return null}},Pa=class extends sd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ad=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},yF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},X9=fe(A({},yF),{"[class.ng-submitted]":"isSubmitted"}),PC=(()=>{let e=class e extends ad{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(Pa,2))},e.\u0275dir=Je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&tr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[fn]});let t=e;return t})(),fd=(()=>{let e=class e extends ad{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(Nr,10))},e.\u0275dir=Je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&tr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[fn]});let t=e;return t})();var Ma="VALID",id="INVALID",zo="PENDING",Ra="DISABLED";function wm(t){return(pd(t)?t.validators:t)||null}function vF(t){return Array.isArray(t)?vm(t):t||null}function Em(t,e){return(pd(e)?e.asyncValidators:t)||null}function _F(t){return Array.isArray(t)?_m(t):t||null}function pd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function OC(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")}function kC(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new V(1002,"")})}var Go=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ma}get invalid(){return this.status===id}get pending(){return this.status==zo}get disabled(){return this.status===Ra}get enabled(){return this.status!==Ra}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vC(e,this._rawAsyncValidators))}hasValidator(e){return od(this._rawValidators,e)}hasAsyncValidator(e){return od(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ra,this.errors=null,this._forEachChild(r=>{r.disable(fe(A({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(A({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ma,this._forEachChild(r=>{r.enable(fe(A({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(A({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ma||this.status===zo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ra:Ma}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zo,this._hasOwnPendingAsyncValidator=!0;let n=AC(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new xe,this.statusChanges=new xe}_calculateStatus(){return this._allControlsDisabled()?Ra:this.errors?id:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zo)?zo:this._anyControlsHaveStatus(id)?id:Ma}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_F(this._rawAsyncValidators)}},Wo=class extends Go{constructor(e,n,r){super(wm(n),Em(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){kC(this,!0,e),Object.keys(e).forEach(r=>{OC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pm=class extends Wo{};var Oa=new P("CallSetDisabledState",{providedIn:"root",factory:()=>gd}),gd="always";function wF(t,e){return[...e.path,t]}function ud(t,e,n=gd){Im(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),IF(t,e),CF(t,e),DF(t,e),EF(t,e)}function _C(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ld(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function cd(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function EF(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Im(t,e){let n=RC(t);e.validator!==null?t.setValidators(mC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=NC(t);e.asyncValidator!==null?t.setAsyncValidators(mC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();cd(e._rawValidators,i),cd(e._rawAsyncValidators,i)}function ld(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=RC(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=NC(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return cd(e._rawValidators,r),cd(e._rawAsyncValidators,r),n}function IF(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&FC(t,e)})}function DF(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&FC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function FC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function CF(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function VC(t,e){t==null,Im(t,e)}function TF(t,e){return ld(t,e)}function bF(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function AF(t){return Object.getPrototypeOf(t.constructor)===TC}function LC(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function SF(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===dd?n=o:AF(o)?r=o:i=o}),i||r||n||null}function xF(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var MF={provide:Nr,useExisting:Xn(()=>Dm)},Na=(()=>Promise.resolve())(),Dm=(()=>{let e=class e extends Nr{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new xe,this.form=new Wo({},vm(r),_m(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Na.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),ud(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Na.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Na.then(()=>{let i=this._findContainer(r.path),o=new Wo({});VC(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Na.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Na.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,LC(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(q(hd,10),q(ym,10),q(Oa,8))},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&ue("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bi([MF]),fn]});let t=e;return t})();function wC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function EC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var or=class extends Go{constructor(e=null,n,r){super(wm(n),Em(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(EC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){EC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var RF=t=>t instanceof or;var NF={provide:Pa,useExisting:Xn(()=>Cm)},IC=(()=>Promise.resolve())(),Cm=(()=>{let e=class e extends Pa{constructor(r,i,o,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new or,this._registered=!1,this.name="",this.update=new xe,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=SF(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),bF(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ud(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){IC.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Mr(i);IC.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?wF(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(q(Nr,9),q(hd,10),q(ym,10),q(mm,10),q(Bo,8),q(Oa,8))},e.\u0275dir=Je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bi([NF]),fn,hn]});let t=e;return t})(),md=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),PF={provide:mm,useExisting:Xn(()=>Tm),multi:!0},Tm=(()=>{let e=class e extends TC{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ii(e)))(o||e)}})(),e.\u0275dir=Je({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&ue("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[bi([PF]),fn]});let t=e;return t})();var OF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({});let t=e;return t})();var kF=new P("NgModelWithFormControlWarning");var FF={provide:Nr,useExisting:Xn(()=>ka)},ka=(()=>{let e=class e extends Nr{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new xe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ld(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return ud(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){_C(r.control||null,r,!1),xF(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,LC(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(_C(i||null,r),RF(o)&&(ud(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);VC(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&TF(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Im(this.form,this),this._oldForm&&ld(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(q(hd,10),q(ym,10),q(Oa,8))},e.\u0275dir=Je({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&ue("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bi([FF]),fn,hn]});let t=e;return t})();var VF=(()=>{let e=class e{constructor(){this._validator=gC}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):gC,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,features:[hn]});let t=e;return t})();var LF={provide:hd,useExisting:Xn(()=>bm),multi:!0};var bm=(()=>{let e=class e extends VF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Mr,this.createValidator=r=>fF}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ii(e)))(o||e)}})(),e.\u0275dir=Je({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Ta("required",o._enabled?"":null)},inputs:{required:"required"},features:[bi([LF]),fn]});let t=e;return t})();var jC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({imports:[OF]});let t=e;return t})(),gm=class extends Go{constructor(e,n,r){super(wm(n),Em(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){kC(this,!1,e),e.forEach((r,i)=>{OC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function DC(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var yd=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let o=this._reduceControls(r),s={};return DC(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Wo(o,s)}record(r,i=null){let o=this._reduceControls(r);return new pm(o,i)}control(r,i,o){let s={};return this.useNonNullable?(DC(i)?s=i:(s.validators=i,s.asyncValidators=o),new or(r,fe(A({},s),{nonNullable:!0}))):new or(r,i,o)}array(r,i,o){let s=r.map(a=>this._createControl(a));return new gm(s,i,o)}_reduceControls(r){let i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){if(r instanceof or)return r;if(r instanceof Go)return r;if(Array.isArray(r)){let i=r[0],o=r.length>1?r[1]:null,s=r.length>2?r[2]:null;return this.control(i,o,s)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var BC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Oa,useValue:r.callSetDisabledState??gd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({imports:[jC]});let t=e;return t})(),UC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:kF,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Oa,useValue:r.callSetDisabledState??gd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({imports:[jC]});let t=e;return t})();var jF="firebase",BF="10.7.1";mr(jF,BF,"app");var Ko=new Zn("ANGULARFIRE2_VERSION");var UF=(t,e)=>{let n=e?[e]:CE(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Si=class{constructor(){return UF($F)}},$F="app-check";function Am(){}var vd=class{zone;delegate;constructor(e,n=tp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Sm=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Am,{},Am,Am)),n.pipe(qe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_d=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new vd(Zone.current)),this.insideAngular=n.run(()=>new vd(Zone.current,ta)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(I(ae))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function HF(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Nt(t){return qF(HF())(t)}function qF(t){return function(n){return n=n.lift(new Sm(t.ngZone)),n.pipe(sn(t.outsideAngular),Ht(t.insideAngular))}}var zF="firebase",GF="10.7.1";St.registerVersion(zF,GF,"app-compat");var WF=["ngOnDestroy"],zC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(WF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var wd=class{constructor(e){return e}},Qo=new P("angularfire2.app.options"),Yo=new P("angularfire2.app.name");function Fa(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=St.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>St.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;KF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new wd(s)}var KF=(t,...e)=>{Yg()&&typeof console<"u"&&console[t](...e)},QF={provide:wd,useFactory:Fa,deps:[Qo,ae,[new jo,Yo]]},GC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Qo,useValue:n},{provide:Yo,useValue:r}]}}constructor(n){St.registerVersion("angularfire",Ko.full,"core"),St.registerVersion("angularfire",Ko.full,"app-compat"),St.registerVersion("angular",Og.full,n.toString())}static \u0275fac=function(r){return new(r||t)(I(Vt))};static \u0275mod=Ve({type:t});static \u0275inj=Fe({providers:[QF]})}return t})();function Ed(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return YF(i,s)||(qC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${ZF?" You may need to reload as Firebase is not HMR aware.":""}`),qC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function YF(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var ZF=typeof module<"u"&&!!module.hot,qC=(t,...e)=>{Yg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var eV=new Map,tV={activated:!1,tokenObservers:[]},nV={initialized:!1,enabled:!1};function pn(t){return eV.get(t)||Object.assign({},tV)}function ZC(){return nV}var rV="https://content-firebaseappcheck.googleapis.com/v1";var iV="exchangeDebugToken",WC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},b5=24*60*60*1e3;var Mm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return m(this,null,function*(){this.stop();try{this.pending=new Uf,this.pending.promise.catch(n=>{}),yield oV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Uf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function oV(t){return new Promise(e=>{setTimeout(e,t)})}var sV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Pr=new IE("appCheck","AppCheck",sV);function XC(t){if(!pn(t).activated)throw Pr.create("use-before-activation",{appName:t.name})}function JC(r,i){return m(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(f){throw Pr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw Pr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw Pr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function eT(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${rV}/projects/${n}/apps/${r}:${iV}?key=${i}`,body:{debug_token:e}}}var aV="firebase-app-check-database",uV=1,Rm="firebase-app-check-store";var Id=null;function cV(){return Id||(Id=new Promise((t,e)=>{try{let n=indexedDB.open(aV,uV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Pr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Rm,{keyPath:"compositeKey"})}}}catch(n){e(Pr.create("storage-open",{originalErrorMessage:n?.message}))}}),Id)}function lV(t,e){return dV(hV(t),e)}function dV(t,e){return m(this,null,function*(){let r=(yield cV()).transaction(Rm,"readwrite"),o=r.objectStore(Rm).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(Pr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function hV(t){return`${t.options.appId}-${t.name}`}var Nm=new Ic("@firebase/app-check");function xm(t,e){return Ec()?lV(t,e).catch(n=>{Nm.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function tT(){return ZC().enabled}function nT(){return m(this,null,function*(){let t=ZC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var fV={error:"UNKNOWN_ERROR"};function pV(t){return vE.encodeString(JSON.stringify(t),!1)}function Pm(t,e=!1){return m(this,null,function*(){let n=t.app;XC(n);let r=pn(n),i=r.token,o;if(i&&!Va(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Va(u)?i=u:yield xm(n,void 0))}if(!e&&i&&Va(i))return{token:i.token};let s=!1;if(tT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=JC(eT(n,yield nT()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield xm(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield pn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Nm.warn(u.message):Nm.error(u),o=u}let a;return i?o?Va(i)?a={token:i.token,internalError:o}:a=QC(o):(a={token:i.token},r.token=i,yield xm(n,i)):a=QC(o),s&&vV(n,a),a})}function gV(t){return m(this,null,function*(){let e=t.app;XC(e);let{provider:n}=pn(e);if(tT()){let r=yield nT(),{token:i}=yield JC(eT(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function mV(t,e,n,r){let{app:i}=t,o=pn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Va(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),KC(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>KC(t))}function rT(t,e){let n=pn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function KC(t){let{app:e}=t,n=pn(e),r=n.tokenRefresher;r||(r=yV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function yV(t){let{app:e}=t;return new Mm(()=>m(this,null,function*(){let n=pn(e),r;if(n.token?r=yield Pm(t,!0):r=yield Pm(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=pn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},WC.RETRIAL_MIN_WAIT,WC.RETRIAL_MAX_WAIT)}function vV(t,e){let n=pn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Va(t){return t.expireTimeMillis-Date.now()>0}function QC(t){return{token:pV(fV),error:t}}var Om=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=pn(this.app);for(let n of e)rT(this.app,n.next);return Promise.resolve()}};function _V(t,e){return new Om(t,e)}function wV(t){return{getToken:e=>Pm(t,e),getLimitedUseToken:()=>gV(t),addTokenListener:e=>mV(t,"INTERNAL",e),removeTokenListener:e=>rT(t.app,e)}}var EV="@firebase/app-check",IV="0.8.1";var DV="app-check",YC="app-check-internal";function CV(){Zs(new ai(DV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return _V(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(YC).initialize()})),Zs(new ai(YC,t=>{let e=t.getProvider("app-check").getImmediate();return wV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mr(EV,IV)}CV();var TV=["localhost","0.0.0.0","127.0.0.1"],L5=typeof window<"u"&&TV.includes(window.location.hostname);var km=new P("angularfire2.auth.use-emulator"),Fm=new P("angularfire2.auth.settings"),Vm=new P("angularfire2.auth.tenant-id"),Lm=new P("angularfire2.auth.langugage-code"),jm=new P("angularfire2.auth.use-device-language"),Bm=new P("angularfire.auth.persistence"),Um=(t,e,n,r,i,o,s,a)=>Ed(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,l]of Object.entries(s))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),oT=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,l,d,h,f){let y=new $e,v=j(void 0).pipe(Ht(s.outsideAngular),Te(()=>o.runOutsideAngular(()=>import("./chunk-CWNBPQXD.js"))),$(()=>Fa(n,o,r)),$(_=>Um(_,o,a,c,l,d,u,h)),Qc({bufferSize:1,refCount:!1}));if(Ai(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=j(null);else{v.pipe(qt()).subscribe();let _=v.pipe(Te(b=>b.getRedirectResult().then(H=>H,()=>null)),Nt,Qc({bufferSize:1,refCount:!1})),T=v.pipe(Te(b=>new J(H=>({unsubscribe:o.runOutsideAngular(()=>b.onAuthStateChanged(z=>H.next(z),z=>H.error(z),()=>H.complete()))})))),L=v.pipe(Te(b=>new J(H=>({unsubscribe:o.runOutsideAngular(()=>b.onIdTokenChanged(z=>H.next(z),z=>H.error(z),()=>H.complete()))}))));this.authState=_.pipe(Yc(T),sn(s.outsideAngular),Ht(s.insideAngular)),this.user=_.pipe(Yc(L),sn(s.outsideAngular),Ht(s.insideAngular)),this.idToken=this.user.pipe(Te(b=>b?de(b.getIdToken()):j(null))),this.idTokenResult=this.user.pipe(Te(b=>b?de(b.getIdTokenResult()):j(null))),this.credential=ra(_,y,this.authState.pipe(ut(b=>!b))).pipe($(b=>b?.user?b:null),sn(s.outsideAngular),Ht(s.insideAngular))}return zC(this,v,o,{spy:{apply:(_,T,L)=>{(_.startsWith("signIn")||_.startsWith("createUser"))&&L.then(b=>y.next(b))}}})}static \u0275fac=function(r){return new(r||t)(I(Qo),I(Yo,8),I(Vt),I(ae),I(_d),I(km,8),I(Fm,8),I(Vm,8),I(Lm,8),I(jm,8),I(Bm,8),I(Si,8))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var AV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mn={},x,cy=cy||{},K=AV||self;function Fd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Za(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function SV(t){return Object.prototype.hasOwnProperty.call(t,$m)&&t[$m]||(t[$m]=++xV)}var $m="closure_uid_"+(1e9*Math.random()>>>0),xV=0;function MV(t,e,n){return t.call.apply(t.bind,arguments)}function RV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function gt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?gt=MV:gt=RV,gt.apply(null,arguments)}function Dd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function it(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Or(){this.s=this.s,this.o=this.o}var NV=0;Or.prototype.s=!1;Or.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),NV!=0)&&SV(this)};Or.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ly(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function sT(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Fd(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var PV=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};K.addEventListener("test",n,e),K.removeEventListener("test",n,e)}catch{}return t}();function Ha(t){return/^[\s\xa0]*$/.test(t)}function Vd(){var t=K.navigator;return t&&(t=t.userAgent)?t:""}function Rn(t){return Vd().indexOf(t)!=-1}function dy(t){return dy[" "](t),t}dy[" "]=function(){};function OV(t,e){var n=IL;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var kV=Rn("Opera"),es=Rn("Trident")||Rn("MSIE"),_T=Rn("Edge"),Wm=_T||es,wT=Rn("Gecko")&&!(Vd().toLowerCase().indexOf("webkit")!=-1&&!Rn("Edge"))&&!(Rn("Trident")||Rn("MSIE"))&&!Rn("Edge"),FV=Vd().toLowerCase().indexOf("webkit")!=-1&&!Rn("Edge");function ET(){var t=K.document;return t?t.documentMode:void 0}var Km;e:{if(Cd="",Td=function(){var t=Vd();if(wT)return/rv:([^\);]+)(\)|;)/.exec(t);if(_T)return/Edge\/([\d\.]+)/.exec(t);if(es)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(FV)return/WebKit\/(\S+)/.exec(t);if(kV)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Td&&(Cd=Td?Td[1]:""),es&&(bd=ET(),bd!=null&&bd>parseFloat(Cd))){Km=String(bd);break e}Km=Cd}var Cd,Td,bd,Qm;K.document&&es?(Hm=ET(),Qm=Hm||parseInt(Km,10)||void 0):Qm=void 0;var Hm,VV=Qm;function qa(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wT){e:{try{dy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:LV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qa.$.h.call(this)}}it(qa,mt);var LV={2:"touch",3:"pen",4:"mouse"};qa.prototype.h=function(){qa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Xa="closure_listenable_"+(1e6*Math.random()|0),jV=0;function BV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++jV,this.fa=this.ia=!1}function Ld(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function hy(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function UV(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function IT(t){let e={};for(let n in t)e[n]=t[n];return e}var aT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<aT.length;o++)n=aT[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function jd(t){this.src=t,this.g={},this.h=0}jd.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Zm(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new BV(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Ym(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=vT(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Ld(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Zm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var fy="closure_lm_"+(1e6*Math.random()|0),qm={};function CT(t,e,n,r,i){if(r&&r.once)return bT(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)CT(t,e[o],n,r,i);return null}return n=my(n),t&&t[Xa]?t.O(e,n,Za(r)?!!r.capture:!!r,i):TT(t,e,n,!1,r,i)}function TT(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Za(i)?!!i.capture:!!i,a=gy(t);if(a||(t[fy]=a=new jd(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=$V(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)PV||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ST(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function $V(){function t(n){return e.call(t.src,t.listener,n)}let e=HV;return t}function bT(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bT(t,e[o],n,r,i);return null}return n=my(n),t&&t[Xa]?t.P(e,n,Za(r)?!!r.capture:!!r,i):TT(t,e,n,!0,r,i)}function AT(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)AT(t,e[o],n,r,i);else r=Za(r)?!!r.capture:!!r,n=my(n),t&&t[Xa]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Zm(o,n,r,i),-1<n&&(Ld(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=gy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zm(e,n,r,i)),(n=-1<t?e[t]:null)&&py(n))}function py(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Xa])Ym(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ST(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gy(e))?(Ym(n,t),n.h==0&&(n.src=null,e[fy]=null)):Ld(t)}}}function ST(t){return t in qm?qm[t]:qm[t]="on"+t}function HV(t,e){if(t.fa)t=!0;else{e=new qa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&py(t),t=n.call(r,e)}return t}function gy(t){return t=t[fy],t instanceof jd?t:null}var zm="__closure_events_fn_"+(1e9*Math.random()>>>0);function my(t){return typeof t=="function"?t:(t[zm]||(t[zm]=function(e){return t.handleEvent(e)}),t[zm])}function rt(){Or.call(this),this.i=new jd(this),this.S=this,this.J=null}it(rt,Or);rt.prototype[Xa]=!0;rt.prototype.removeEventListener=function(t,e,n,r){AT(this,t,e,n,r)};function dt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new mt(e,t);else if(e instanceof mt)e.target=e.target||t;else{var i=e;e=new mt(r,t),DT(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ad(s,r,!0,e)&&i}if(s=e.g=t,i=Ad(s,r,!0,e)&&i,i=Ad(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Ad(s,r,!1,e)&&i}rt.prototype.N=function(){if(rt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ld(n[r]);delete t.g[e],t.h--}}this.J=null};rt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};rt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ad(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&Ym(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var yy=K.JSON.stringify,Xm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function qV(){var t=vy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Jm=class{constructor(){this.h=this.g=null}add(e,n){let r=xT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},xT=new Xm(()=>new ey,t=>t.reset()),ey=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function zV(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function GV(t){K.setTimeout(()=>{throw t},0)}var za,Ga=!1,vy=new Jm,MT=()=>{let t=K.Promise.resolve(void 0);za=()=>{t.then(WV)}},WV=()=>{for(var t;t=qV();){try{t.h.call(t.g)}catch(n){GV(n)}var e=xT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ga=!1};function Bd(t,e){rt.call(this),this.h=t||1,this.g=e||K,this.j=gt(this.qb,this),this.l=Date.now()}it(Bd,rt);x=Bd.prototype;x.ga=!1;x.T=null;x.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),dt(this,"tick"),this.ga&&(_y(this),this.start()))}};x.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function _y(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}x.N=function(){Bd.$.N.call(this),_y(this),delete this.g};function wy(t,e,n){if(typeof t=="function")n&&(t=gt(t,n));else if(t&&typeof t.handleEvent=="function")t=gt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:K.setTimeout(t,e||0)}function RT(t){t.g=wy(()=>{t.g=null,t.i&&(t.i=!1,RT(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var ty=class extends Or{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RT(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Wa(t){Or.call(this),this.h=t,this.g={}}it(Wa,Or);var uT=[];function NT(t,e,n,r){Array.isArray(n)||(n&&(uT[0]=n.toString()),n=uT);for(var i=0;i<n.length;i++){var o=CT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function PT(t){hy(t.g,function(e,n){this.g.hasOwnProperty(n)&&py(e)},t),t.g={}}Wa.prototype.N=function(){Wa.$.N.call(this),PT(this)};Wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ud(){this.g=!0}Ud.prototype.Ea=function(){this.g=!1};function KV(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function QV(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Xo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ZV(t,n)+(r?" "+r:"")})}function YV(t,e){t.info(function(){return"TIMEOUT: "+e})}Ud.prototype.info=function(){};function ZV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return yy(n)}catch{return e}}var Ni={},cT=null;function $d(){return cT=cT||new rt}Ni.Ta="serverreachability";function OT(t){mt.call(this,Ni.Ta,t)}it(OT,mt);function Ka(t){let e=$d();dt(e,new OT(e))}Ni.STAT_EVENT="statevent";function kT(t,e){mt.call(this,Ni.STAT_EVENT,t),this.stat=e}it(kT,mt);function Dt(t){let e=$d();dt(e,new kT(e,t))}Ni.Ua="timingevent";function FT(t,e){mt.call(this,Ni.Ua,t),this.size=e}it(FT,mt);function Ja(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){t()},e)}var Hd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},VT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ey(){}Ey.prototype.h=null;function lT(t){return t.h||(t.h=t.i())}function LT(){}var eu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Iy(){mt.call(this,"d")}it(Iy,mt);function Dy(){mt.call(this,"c")}it(Dy,mt);var ny;function qd(){}it(qd,Ey);qd.prototype.g=function(){return new XMLHttpRequest};qd.prototype.i=function(){return{}};ny=new qd;function tu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wa(this),this.P=XV,t=Wm?125:void 0,this.V=new Bd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new jT}function jT(){this.i=null,this.g="",this.h=!1}var XV=45e3,BT={},ry={};x=tu.prototype;x.setTimeout=function(t){this.P=t};function iy(t,e,n){t.L=1,t.A=Gd(ar(e)),t.u=n,t.S=!0,UT(t,null)}function UT(t,e){t.G=Date.now(),nu(t),t.B=ar(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),QT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new jT,t.g=mb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ty(gt(t.Pa,t,t.g),t.O)),NT(t.U,t.g,"readystatechange",t.nb),e=t.I?IT(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ka(),KV(t.j,t.v,t.B,t.m,t.W,t.u)}x.nb=function(t){t=t.target;let e=this.M;e&&Nn(t)==3?e.l():this.Pa(t)};x.Pa=function(t){try{if(t==this.g)e:{let l=Nn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Wm||this.g&&(this.h.h||this.g.ja()||pT(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Ka(3):Ka(2)),zd(this);var n=this.g.da();this.ca=n;t:if($T(this)){var r=pT(this.g);t="";var i=r.length,o=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xi(this),$a(this);var s="";break t}this.h.i=new K.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,QV(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ha(a)){var c=a;break t}}c=null}if(n=c)Xo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oy(this,n);else{this.i=!1,this.s=3,Dt(12),xi(this),$a(this);break e}}this.S?(HT(this,l,s),Wm&&this.i&&l==3&&(NT(this.U,this.V,"tick",this.mb),this.V.start())):(Xo(this.j,this.m,s,null),oy(this,s)),l==4&&xi(this),this.i&&!this.J&&(l==4?hb(this.l,this):(this.i=!1,nu(this)))}else _L(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),xi(this),$a(this)}}}catch{}finally{}};function $T(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function HT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=JV(t,n),i==ry){e==4&&(t.s=4,Dt(14),r=!1),Xo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==BT){t.s=4,Dt(15),Xo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Xo(t.j,t.m,i,null),oy(t,i);$T(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Dt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xy(e),e.M=!0,Dt(11))):(Xo(t.j,t.m,n,"[Invalid Chunked Response]"),xi(t),$a(t))}x.mb=function(){if(this.g){var t=Nn(this.g),e=this.g.ja();this.o<e.length&&(zd(this),HT(this,t,e),this.i&&t!=4&&nu(this))}};function JV(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ry:(n=Number(e.substring(n,r)),isNaN(n)?BT:(r+=1,r+n>e.length?ry:(e=e.slice(r,r+n),t.o=r+n,e)))}x.cancel=function(){this.J=!0,xi(this)};function nu(t){t.Y=Date.now()+t.P,qT(t,t.P)}function qT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ja(gt(t.lb,t),e)}function zd(t){t.C&&(K.clearTimeout(t.C),t.C=null)}x.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(YV(this.j,this.B),this.L!=2&&(Ka(),Dt(17)),xi(this),this.s=2,$a(this)):qT(this,this.Y-t)};function $a(t){t.l.H==0||t.J||hb(t.l,t)}function xi(t){zd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,_y(t.V),PT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function oy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||sy(n.i,t))){if(!t.K&&sy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Nd(n),Qd(n);else break e;Sy(n),Dt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ja(gt(n.ib,n),6e3));if(1>=XT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Mi(n,11)}else if((t.K||n.g==t)&&Nd(n),!Ha(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=r.i;o.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Cy(o,o.h),o.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,De(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=gb(r,r.J?r.pa:null,r.Y),s.K){JT(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(zd(a),nu(a)),r.g=s}else lb(r);0<n.j.length&&Yd(n)}else c[0]!="stop"&&c[0]!="close"||Mi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Mi(n,7):Ay(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Ka(4)}catch{}}function eL(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Fd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function tL(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Fd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function zT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Fd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=tL(t),r=eL(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var GT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nL(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ri(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ri){this.h=t.h,Md(this,t.j),this.s=t.s,this.g=t.g,Rd(this,t.m),this.l=t.l;var e=t.i,n=new Qa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),dT(this,n),this.o=t.o}else t&&(e=String(t).match(GT))?(this.h=!1,Md(this,e[1]||"",!0),this.s=Ba(e[2]||""),this.g=Ba(e[3]||"",!0),Rd(this,e[4]),this.l=Ba(e[5]||"",!0),dT(this,e[6]||"",!0),this.o=Ba(e[7]||"")):(this.h=!1,this.i=new Qa(null,this.h))}Ri.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ua(e,hT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ua(e,hT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ua(n,n.charAt(0)=="/"?oL:iL,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ua(n,aL)),t.join("")};function ar(t){return new Ri(t)}function Md(t,e,n){t.j=n?Ba(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Rd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dT(t,e,n){e instanceof Qa?(t.i=e,uL(t.i,t.h)):(n||(e=Ua(e,sL)),t.i=new Qa(e,t.h))}function De(t,e,n){t.i.set(e,n)}function Gd(t){return De(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ua(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,rL),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rL(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var hT=/[#\/\?@]/g,iL=/[#\?:]/g,oL=/[#\?]/g,sL=/[#\?@]/g,aL=/#/g;function Qa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function kr(t){t.g||(t.g=new Map,t.h=0,t.i&&nL(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}x=Qa.prototype;x.add=function(t,e){kr(this),this.i=null,t=ts(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function WT(t,e){kr(t),e=ts(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function KT(t,e){return kr(t),e=ts(t,e),t.g.has(e)}x.forEach=function(t,e){kr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};x.ta=function(){kr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};x.Z=function(t){kr(this);let e=[];if(typeof t=="string")KT(this,t)&&(e=e.concat(this.g.get(ts(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};x.set=function(t,e){return kr(this),this.i=null,t=ts(this,t),KT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};x.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function QT(t,e,n){WT(t,e),0<n.length&&(t.i=null,t.g.set(ts(t,e),ly(n)),t.h+=n.length)}x.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ts(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function uL(t,e){e&&!t.j&&(kr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(WT(this,r),QT(this,i,n))},t)),t.j=e}var cL=class{constructor(t,e){this.g=t,this.map=e}};function YT(t){this.l=t||lL,K.PerformanceNavigationTiming?(t=K.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(K.g&&K.g.Ka&&K.g.Ka()&&K.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lL=10;function ZT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function XT(t){return t.h?1:t.g?t.g.size:0}function sy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cy(t,e){t.g?t.g.add(e):t.h=e}function JT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}YT.prototype.cancel=function(){if(this.i=eb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function eb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return ly(t.i)}var dL=class{stringify(t){return K.JSON.stringify(t,void 0)}parse(t){return K.JSON.parse(t,void 0)}};function hL(){this.g=new dL}function fL(t,e,n){let r=n||"";try{zT(t,function(i,o){let s=i;Za(i)&&(s=yy(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pL(t,e){let n=new Ud;if(K.Image){let r=new Image;r.onload=Dd(Sd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dd(Sd,n,r,"TestLoadImage: error",!1,e),r.onabort=Dd(Sd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dd(Sd,n,r,"TestLoadImage: timeout",!1,e),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Sd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ru(t){this.l=t.ec||null,this.j=t.ob||!1}it(ru,Ey);ru.prototype.g=function(){return new Wd(this.l,this.j)};ru.prototype.i=function(t){return function(){return t}}({});function Wd(t,e){rt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ty,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}it(Wd,rt);var Ty=0;x=Wd.prototype;x.open=function(t,e){if(this.readyState!=Ty)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ya(this)};x.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||K).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,iu(this)),this.readyState=Ty};x.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ya(this)),this.g&&(this.readyState=3,Ya(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function tb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}x.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?iu(this):Ya(this),this.readyState==3&&tb(this)}};x.Za=function(t){this.g&&(this.response=this.responseText=t,iu(this))};x.Ya=function(t){this.g&&(this.response=t,iu(this))};x.ka=function(){this.g&&iu(this)};function iu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ya(t)}x.setRequestHeader=function(t,e){this.v.append(t,e)};x.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};x.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ya(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var gL=K.JSON.parse;function Pe(t){rt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nb,this.L=this.M=!1}it(Pe,rt);var nb="",mL=/^https?$/i,yL=["POST","PUT"];x=Pe.prototype;x.Oa=function(t){this.M=t};x.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ny.g(),this.C=this.u?lT(this.u):lT(ny),this.g.onreadystatechange=gt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){fT(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=K.FormData&&t instanceof K.FormData,!(0<=vT(yL,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ob(this),0<this.B&&((this.L=vL(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gt(this.ua,this)):this.A=wy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){fT(this,o)}};function vL(t){return es&&typeof t.timeout=="number"&&t.ontimeout!==void 0}x.ua=function(){typeof cy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dt(this,"timeout"),this.abort(8))};function fT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rb(t),Kd(t)}function rb(t){t.F||(t.F=!0,dt(t,"complete"),dt(t,"error"))}x.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dt(this,"complete"),dt(this,"abort"),Kd(this))};x.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kd(this,!0)),Pe.$.N.call(this)};x.La=function(){this.s||(this.G||this.v||this.l?ib(this):this.kb())};x.kb=function(){ib(this)};function ib(t){if(t.h&&typeof cy<"u"&&(!t.C[1]||Nn(t)!=4||t.da()!=2)){if(t.v&&Nn(t)==4)wy(t.La,0,t);else if(dt(t,"readystatechange"),Nn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(GT)[1]||null;!i&&K.self&&K.self.location&&(i=K.self.location.protocol.slice(0,-1)),r=!mL.test(i?i.toLowerCase():"")}n=r}if(n)dt(t,"complete"),dt(t,"success");else{t.m=6;try{var o=2<Nn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",rb(t)}}finally{Kd(t)}}}}function Kd(t,e){if(t.g){ob(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||dt(t,"ready");try{n.onreadystatechange=r}catch{}}}function ob(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(K.clearTimeout(t.A),t.A=null)}x.isActive=function(){return!!this.g};function Nn(t){return t.g?t.g.readyState:0}x.da=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}};x.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};x.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),gL(e)}};function pT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function _L(t){let e={};t=(t.g&&2<=Nn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ha(t[r]))continue;var n=zV(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}UV(e,function(r){return r.join(", ")})}x.Ia=function(){return this.m};x.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function sb(t){let e="";return hy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function by(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=sb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):De(t,e,n))}function La(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ab(t){this.Ga=0,this.j=[],this.l=new Ud,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=La("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=La("baseRetryDelayMs",5e3,t),this.hb=La("retryDelaySeedMs",1e4,t),this.eb=La("forwardChannelMaxRetries",2,t),this.xa=La("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new YT(t&&t.concurrentRequestLimit),this.Ja=new hL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}x=ab.prototype;x.ra=8;x.H=1;function Ay(t){if(ub(t),t.H==3){var e=t.W++,n=ar(t.I);if(De(n,"SID",t.K),De(n,"RID",e),De(n,"TYPE","terminate"),ou(t,n),e=new tu(t,t.l,e),e.L=2,e.A=Gd(ar(n)),n=!1,K.navigator&&K.navigator.sendBeacon)try{n=K.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&K.Image&&(new Image().src=e.A,n=!0),n||(e.g=mb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),nu(e)}pb(t)}function Qd(t){t.g&&(xy(t),t.g.cancel(),t.g=null)}function ub(t){Qd(t),t.u&&(K.clearTimeout(t.u),t.u=null),Nd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&K.clearTimeout(t.m),t.m=null)}function Yd(t){if(!ZT(t.i)&&!t.m){t.m=!0;var e=t.Na;za||MT(),Ga||(za(),Ga=!0),vy.add(e,t),t.C=0}}function wL(t,e){return XT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ja(gt(t.Na,t,e),fb(t,t.C)),t.C++,!0)}x.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new tu(this,this.l,t),o=this.s;if(this.U&&(o?(o=IT(o),DT(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cb(this,i,e),n=ar(this.I),De(n,"RID",t),De(n,"CVER",22),this.F&&De(n,"X-HTTP-Session-Id",this.F),ou(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(sb(o)))+"&"+e:this.o&&by(n,this.o,o)),Cy(this.i,i),this.bb&&De(n,"TYPE","init"),this.P?(De(n,"$req",e),De(n,"SID","null"),i.aa=!0,iy(i,n,null)):iy(i,n,e),this.H=2}}else this.H==3&&(t?gT(this,t):this.j.length==0||ZT(this.i)||gT(this))};function gT(t,e){var n;e?n=e.m:n=t.W++;let r=ar(t.I);De(r,"SID",t.K),De(r,"RID",n),De(r,"AID",t.V),ou(t,r),t.o&&t.s&&by(r,t.o,t.s),n=new tu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=cb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cy(t.i,n),iy(n,r,e)}function ou(t,e){t.na&&hy(t.na,function(n,r){De(e,r,n)}),t.h&&zT({},function(n,r){De(e,r,n)})}function cb(t,e,n){n=Math.min(t.j.length,n);var r=t.h?gt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{fL(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function lb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;za||MT(),Ga||(za(),Ga=!0),vy.add(e,t),t.A=0}}function Sy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ja(gt(t.Ma,t),fb(t,t.A)),t.A++,!0)}x.Ma=function(){if(this.u=null,db(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ja(gt(this.jb,this),t)}};x.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Dt(10),Qd(this),db(this))};function xy(t){t.B!=null&&(K.clearTimeout(t.B),t.B=null)}function db(t){t.g=new tu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ar(t.wa);De(e,"RID","rpc"),De(e,"SID",t.K),De(e,"AID",t.V),De(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&De(e,"TO",t.qa),De(e,"TYPE","xmlhttp"),ou(t,e),t.o&&t.s&&by(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Gd(ar(e)),n.u=null,n.S=!0,UT(n,t)}x.ib=function(){this.v!=null&&(this.v=null,Qd(this),Sy(this),Dt(19))};function Nd(t){t.v!=null&&(K.clearTimeout(t.v),t.v=null)}function hb(t,e){var n=null;if(t.g==e){Nd(t),xy(t),t.g=null;var r=2}else if(sy(t.i,e))n=e.F,JT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=$d(),dt(r,new FT(r,n)),Yd(t)}else lb(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&wL(t,e)||r==2&&Sy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Mi(t,5);break;case 4:Mi(t,10);break;case 3:Mi(t,6);break;default:Mi(t,2)}}}function fb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Mi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=gt(t.pb,t);n||(n=new Ri("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||Md(n,"https"),Gd(n)),pL(n.toString(),r)}else Dt(2);t.H=0,t.h&&t.h.za(e),pb(t),ub(t)}x.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Dt(2)):(this.l.info("Failed to ping google.com"),Dt(1))};function pb(t){if(t.H=0,t.ma=[],t.h){let e=eb(t.i);(e.length!=0||t.j.length!=0)&&(sT(t.ma,e),sT(t.ma,t.j),t.i.i.length=0,ly(t.j),t.j.length=0),t.h.ya()}}function gb(t,e,n){var r=n instanceof Ri?ar(n):new Ri(n);if(r.g!="")e&&(r.g=e+"."+r.g),Rd(r,r.m);else{var i=K.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ri(null);r&&Md(o,r),e&&(o.g=e),i&&Rd(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&De(r,n,e),De(r,"VER",t.ra),ou(t,r),r}function mb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Pe(new ru({ob:n})):new Pe(t.va),e.Oa(t.J),e}x.isActive=function(){return!!this.h&&this.h.isActive(this)};function yb(){}x=yb.prototype;x.Ba=function(){};x.Aa=function(){};x.za=function(){};x.ya=function(){};x.isActive=function(){return!0};x.Va=function(){};function Pd(){if(es&&!(10<=Number(VV)))throw Error("Environmental error: no available transport.")}Pd.prototype.g=function(t,e){return new jt(t,e)};function jt(t,e){rt.call(this),this.g=new ab(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ha(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ha(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ns(this)}it(jt,rt);jt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Dt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=gb(t,null,t.Y),Yd(t)};jt.prototype.close=function(){Ay(this.g)};jt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=yy(t),t=n);e.j.push(new cL(e.fb++,t)),e.H==3&&Yd(e)};jt.prototype.N=function(){this.g.h=null,delete this.j,Ay(this.g),delete this.g,jt.$.N.call(this)};function vb(t){Iy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}it(vb,Iy);function _b(){Dy.call(this),this.status=1}it(_b,Dy);function ns(t){this.g=t}it(ns,yb);ns.prototype.Ba=function(){dt(this.g,"a")};ns.prototype.Aa=function(t){dt(this.g,new vb(t))};ns.prototype.za=function(t){dt(this.g,new _b)};ns.prototype.ya=function(){dt(this.g,"b")};function EL(){this.blockSize=-1}function gn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}it(gn,EL);gn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Gm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}gn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Gm(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Gm(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Gm(this,r),i=0;break}}this.h=i,this.i+=e};gn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function me(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var IL={};function My(t){return-128<=t&&128>t?OV(t,function(e){return new me([e|0],0>e?-1:0)}):new me([t|0],0>t?-1:0)}function Pn(t){if(isNaN(t)||!isFinite(t))return Jo;if(0>t)return lt(Pn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ay;return new me(e,0)}function wb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return lt(wb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Pn(Math.pow(e,8)),r=Jo,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Pn(Math.pow(e,o)),r=r.R(o).add(Pn(s))):(r=r.R(n),r=r.add(Pn(s)))}return r}var ay=4294967296,Jo=My(0),uy=My(1),mT=My(16777216);x=me.prototype;x.ea=function(){if(Zt(this))return-lt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ay+r)*e,e*=ay}return t};x.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(sr(this))return"0";if(Zt(this))return"-"+lt(this).toString(t);for(var e=Pn(Math.pow(t,6)),n=this,r="";;){var i=kd(n,e).g;n=Od(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,sr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};x.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function sr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Zt(t){return t.h==-1}x.X=function(t){return t=Od(this,t),Zt(t)?-1:sr(t)?0:1};function lt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new me(n,~t.h).add(uy)}x.abs=function(){return Zt(this)?lt(this):this};x.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new me(n,n[n.length-1]&-2147483648?-1:0)};function Od(t,e){return t.add(lt(e))}x.R=function(t){if(sr(this)||sr(t))return Jo;if(Zt(this))return Zt(t)?lt(this).R(lt(t)):lt(lt(this).R(t));if(Zt(t))return lt(this.R(lt(t)));if(0>this.X(mT)&&0>t.X(mT))return Pn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,xd(n,2*r+2*i),n[2*r+2*i+1]+=o*u,xd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,xd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,xd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new me(n,0)};function xd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ja(t,e){this.g=t,this.h=e}function kd(t,e){if(sr(e))throw Error("division by zero");if(sr(t))return new ja(Jo,Jo);if(Zt(t))return e=kd(lt(t),e),new ja(lt(e.g),lt(e.h));if(Zt(e))return e=kd(t,lt(e)),new ja(lt(e.g),e.h);if(30<t.g.length){if(Zt(t)||Zt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=uy,r=e;0>=r.X(t);)n=yT(n),r=yT(r);var i=Zo(n,1),o=Zo(r,1);for(r=Zo(r,2),n=Zo(n,2);!sr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Zo(r,1),n=Zo(n,1)}return e=Od(t,i.R(e)),new ja(i,e)}for(i=Jo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Pn(n),s=o.R(e);Zt(s)||0<s.X(t);)n-=r,o=Pn(n),s=o.R(e);sr(o)&&(o=uy),i=i.add(o),t=Od(t,s)}return new ja(i,t)}x.gb=function(t){return kd(this,t).h};x.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new me(n,this.h&t.h)};x.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new me(n,this.h|t.h)};x.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new me(n,this.h^t.h)};function yT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new me(n,t.h)}function Zo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new me(i,t.h)}Pd.prototype.createWebChannel=Pd.prototype.g;jt.prototype.send=jt.prototype.u;jt.prototype.open=jt.prototype.m;jt.prototype.close=jt.prototype.close;Hd.NO_ERROR=0;Hd.TIMEOUT=8;Hd.HTTP_ERROR=6;VT.COMPLETE="complete";LT.EventType=eu;eu.OPEN="a";eu.CLOSE="b";eu.ERROR="c";eu.MESSAGE="d";rt.prototype.listen=rt.prototype.O;Pe.prototype.listenOnce=Pe.prototype.P;Pe.prototype.getLastError=Pe.prototype.Sa;Pe.prototype.getLastErrorCode=Pe.prototype.Ia;Pe.prototype.getStatus=Pe.prototype.da;Pe.prototype.getResponseJson=Pe.prototype.Wa;Pe.prototype.getResponseText=Pe.prototype.ja;Pe.prototype.send=Pe.prototype.ha;Pe.prototype.setWithCredentials=Pe.prototype.Oa;gn.prototype.digest=gn.prototype.l;gn.prototype.reset=gn.prototype.reset;gn.prototype.update=gn.prototype.j;me.prototype.add=me.prototype.add;me.prototype.multiply=me.prototype.R;me.prototype.modulo=me.prototype.gb;me.prototype.compare=me.prototype.X;me.prototype.toNumber=me.prototype.ea;me.prototype.toString=me.prototype.toString;me.prototype.getBits=me.prototype.D;me.fromNumber=Pn;me.fromString=wb;var Eb=mn.createWebChannelTransport=function(){return new Pd},Ib=mn.getStatEventTarget=function(){return $d()},Zd=mn.ErrorCode=Hd,Db=mn.EventType=VT,Cb=mn.Event=Ni,Ry=mn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},e6=mn.FetchXmlHttpFactory=ru,su=mn.WebChannel=LT,Tb=mn.XhrIo=Pe,bb=mn.Md5=gn,Pi=mn.Integer=me;var Ab="@firebase/firestore";var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var Ns="10.7.0";var $r=new Ic("@firebase/firestore");function as(){return $r.logLevel}function bA(t){$r.setLogLevel(t)}function E(t,...e){if($r.logLevel<=En.DEBUG){let n=e.map(N_);$r.debug(`Firestore (${Ns}): ${t}`,...n)}}function Le(t,...e){if($r.logLevel<=En.ERROR){let n=e.map(N_);$r.error(`Firestore (${Ns}): ${t}`,...n)}}function Jt(t,...e){if($r.logLevel<=En.WARN){let n=e.map(N_);$r.warn(`Firestore (${Ns}): ${t}`,...n)}}function N_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function R(t="Unexpected state"){let e=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+t;throw Le(e),new Error(e)}function F(t,e){t||R()}function AA(t,e){t||R()}function M(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends EE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qe=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var uh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}},Vy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ly=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qe)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(F(typeof r.accessToken=="string"),new uh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return F(e===null||typeof e=="string"),new Ke(e)}},jy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},By=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Uy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$y=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(F(typeof n.token=="string"),this.R=n.token,new Uy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function DL(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ch=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=DL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Y(t,e){return t<e?-1:t>e?1:0}function ms(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function SA(t){return t+"\0"}var Ne=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var U=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ne(0,0))}static max(){return new t(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&R(),r===void 0?r=e.length-n:r>e.length-n&&R(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},pe=class t extends lh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},CL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,je=class t extends lh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return CL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var S=class t{constructor(e){this.path=e}static fromPath(e){return new t(pe.fromString(e))}static fromName(e){return new t(pe.fromString(e).popFirst(5))}static empty(){return new t(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new pe(e.slice()))}};var ys=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Hy(t){return t.fields.find(e=>e.kind===2)}function ki(t){return t.fields.filter(e=>e.kind!==2)}ys.UNKNOWN_ID=-1;var fs=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var vu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,en.min())}};function xA(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=U.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new en(i,S.empty(),e)}function MA(t){return new en(t.readTime,t.key,-1)}var en=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(U.min(),S.empty(),-1)}static max(){return new t(U.max(),S.empty(),-1)}};function P_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=S.comparator(t.documentKey,e.documentKey),n!==0?n:Y(t.largestBatchId,e.largestBatchId))}var RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(t){return m(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==RA)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&R(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var hh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Qe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ui(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=O_(r.target.error);this.V.reject(new Ui(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Ui(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new zy(n)}},Hr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(wc())===12.2&&Le("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Fi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ec())return!1;if(t.C())return!0;let e=wc(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return m(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Ui(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ui(e,s))},i.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return m(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=hh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(E("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},qy=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Fi(this.k.delete())}},Ui=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ei(t){return t.name==="IndexedDbTransactionError"}var zy=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fi(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Fi(this.store.add(e))}get(e){return Fi(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Fi(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Fi(this.store.count())}W(e,n){let r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){let i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{let i=this.store.getAll(r.range);return new p((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=O_(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new qy(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Fi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=O_(r.target.error);n(i)}})}var Sb=!1;function O_(t){let e=Hr.S(wc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sb||(Sb=!0,setTimeout(()=>{throw r},0)),r}}return t}var Gy=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{E("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){ei(n)?E("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Jr(n)}yield this.ee(6e4)}))}},Wy=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return E("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(E("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=MA(o);P_(s,r)>0&&(r=s)}),new en(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Bt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function $u(t){return t==null}function _u(t){return t===0&&1/t==-1/0}function NA(t){return typeof t=="number"&&Number.isInteger(t)&&!_u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ct(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xb(e)),e=TL(t.get(n),e);return xb(e)}function TL(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xb(t){return t+""}function On(t){let e=t.length;if(F(e>=2),e===2)return F(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&R(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:R()}o=s+2}return new pe(r)}var Mb=["userId","batchId"];function nh(t,e){return[t,Ct(e)]}function PA(t,e,n){return[t,Ct(e),n]}var bL={},AL=["prefixPath","collectionGroup","readTime","documentId"],SL=["prefixPath","collectionGroup","documentId"],xL=["collectionGroup","readTime","prefixPath","documentId"],ML=["canonicalId","targetId"],RL=["targetId","path"],NL=["path","targetId"],PL=["collectionId","parent"],OL=["indexId","uid"],kL=["uid","sequenceNumber"],FL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VL=["indexId","uid","orderedDocumentKey"],LL=["userId","collectionPath","documentId"],jL=["userId","collectionPath","largestBatchId"],BL=["userId","collectionGroup","largestBatchId"],OA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UL=[...OA,"documentOverlays"],kA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],FA=kA,$L=[...FA,"indexConfiguration","indexState","indexEntries"];var wu=class extends dh{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function st(t,e){let n=M(t);return Hr.M(n.ae,e)}function Rb(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ji(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ce=class t{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hs(this.root,e,this.comparator,!0)}},hs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw R();let e=this.left.check();if(e!==this.right.check())throw R();return e+(this.isRed()?0:1)}};Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw R()}get value(){throw R()}get color(){throw R()}get left(){throw R()}get right(){throw R()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var we=class t{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fh(this.data.getIterator())}getIteratorFrom(e){return new fh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},fh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function rs(t){return t.hasNext()?t.getNext():void 0}var Ut=class t{constructor(e){this.fields=e,e.sort(je.comparator)}static empty(){return new t([])}unionWith(e){let n=new we(je.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ph=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function LA(){return typeof atob<"u"}var ot=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ph("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ot.EMPTY_BYTE_STRING=new ot("");var HL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(F(!!t),typeof t=="string"){let e=0,n=HL.exec(t);if(F(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}function of(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function k_(t){let e=t.mapValue.fields.__previous_value__;return of(e)?k_(e):e}function Eu(t){let e=qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}var Ky=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Gr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rh={nullValue:"NULL_VALUE"};function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?of(t)?4:jA(t)?9007199254740991:10:R()}function jn(t,e){if(t===e)return!0;let n=$i(t);if(n!==$i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eu(t).isEqual(Eu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=qr(i.timestampValue),a=qr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return zr(i.bytesValue).isEqual(zr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?_u(s)===_u(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ms(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Rb(s)!==Rb(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!jn(s[u],a[u])))return!1;return!0}(t,e);default:return R()}}function Iu(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Wr(t,e){if(t===e)return 0;let n=$i(t),r=$i(e);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Nb(t.timestampValue,e.timestampValue);case 4:return Nb(Eu(t),Eu(e));case 5:return Y(t.stringValue,e.stringValue);case 6:return function(o,s){let a=zr(o),u=zr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=Y(a[c],u[c]);if(l!==0)return l}return Y(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Y(Oe(o.latitude),Oe(s.latitude));return a!==0?a:Y(Oe(o.longitude),Oe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=Wr(a[c],u[c]);if(l)return l}return Y(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=Y(u[d],l[d]);if(h!==0)return h;let f=Wr(a[u[d]],c[l[d]]);if(f!==0)return f}return Y(u.length,l.length)}(t.mapValue,e.mapValue);default:throw R()}}function Nb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Y(t,e);let n=qr(t),r=qr(e),i=Y(n.seconds,r.seconds);return i!==0?i:Y(n.nanos,r.nanos)}function vs(t){return Qy(t)}function Qy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return S.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Qy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Qy(n.fields[s])}`;return i+"}"}(t.mapValue):R()}function Hi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yy(t){return!!t&&"integerValue"in t}function Du(t){return!!t&&"arrayValue"in t}function Pb(t){return!!t&&"nullValue"in t}function Ob(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function fu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function qL(t){return"nullValue"in t?rh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Hi(Gr.empty(),S.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:R()}function zL(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Hi(Gr.empty(),S.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Br:R()}function kb(t,e){let n=Wr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Fb(t,e){let n=Wr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=je.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=fu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ji(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(fu(this.value))}};function BA(t){let e=[];return Ji(t.fields,(n,r)=>{let i=new je([n]);if(ih(r)){let o=BA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ut(e)}var Ye=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,U.min(),U.min(),U.min(),vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,U.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,U.min(),U.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,U.min(),U.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(U.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bn=class{constructor(e,n){this.position=e,this.inclusive=n}};function Vb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=S.comparator(S.fromName(s.referenceValue),n.key):r=Wr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}var qi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function GL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var gh=class{},ie=class t extends gh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Jy(e,n,r):n==="array-contains"?new nv(e,r):n==="in"?new mh(e,r):n==="not-in"?new rv(e,r):n==="array-contains-any"?new iv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ev(e,r):new tv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wr(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return R()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ye=class t extends gh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return _s(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function _s(t){return t.op==="and"}function Zy(t){return t.op==="or"}function F_(t){return UA(t)&&_s(t)}function UA(t){for(let e of t.filters)if(e instanceof ye)return!1;return!0}function Xy(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+vs(t.value);if(F_(t))return t.filters.map(e=>Xy(e)).join(",");{let e=t.filters.map(n=>Xy(n)).join(",");return`${t.op}(${e})`}}function $A(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$A(s,i.filters[a]),!0):!1}(t,e):void R()}function HA(t,e){let n=t.filters.concat(e);return ye.create(n,t.op)}function qA(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${vs(n.value)}`}(t):t instanceof ye?function(n){return n.op.toString()+" {"+n.getFilters().map(qA).join(" ,")+"}"}(t):"Filter"}var Jy=class extends ie{constructor(e,n,r){super(e,n,r),this.key=S.fromName(r.referenceValue)}matches(e){let n=S.comparator(e.key,this.key);return this.matchesComparison(n)}},ev=class extends ie{constructor(e,n){super(e,"in",n),this.keys=zA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},tv=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=zA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function zA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>S.fromName(r.referenceValue))}var nv=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Du(n)&&Iu(n.arrayValue,this.value)}},mh=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Iu(this.value.arrayValue,n)}},rv=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Iu(this.value.arrayValue,n)}},iv=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Iu(this.value.arrayValue,r))}};var ov=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function sv(t,e=null,n=[],r=[],i=null,o=null,s=null){return new ov(t,e,n,r,i,o,s)}function zi(t){let e=M(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vs(r)).join(",")),e.ce=n}return e.ce}function Hu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$A(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lb(t.startAt,e.startAt)&&Lb(t.endAt,e.endAt)}function yh(t){return S.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vh(t,e){return t.filters.filter(n=>n instanceof ie&&n.field.isEqual(e))}function jb(t,e,n){let r=rh,i=!0;for(let o of vh(t,e)){let s=rh,a=!0;switch(o.op){case"<":case"<=":s=qL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=rh}kb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];kb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Bb(t,e,n){let r=Br,i=!0;for(let o of vh(t,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=zL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}Fb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];Fb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function GA(t,e,n,r,i,o,s,a){return new yn(t,e,n,r,i,o,s,a)}function Ps(t){return new yn(t)}function Ub(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V_(t){return t.collectionGroup!==null}function ps(t){let e=M(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new we(je.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new qi(o,r))}),n.has(je.keyField().canonicalString())||e.le.push(new qi(je.keyField(),r))}return e.le}function Tt(t){let e=M(t);return e.he||(e.he=WL(e,ps(t))),e.he}function WL(t,e){if(t.limitType==="F")return sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new qi(i.field,o)});let n=t.endAt?new Bn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bn(t.startAt.position,t.startAt.inclusive):null;return sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function av(t,e){let n=t.filters.concat([e]);return new yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _h(t,e,n){return new yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qu(t,e){return Hu(Tt(t),Tt(e))&&t.limitType===e.limitType}function WA(t){return`${zi(Tt(t))}|lt:${t.limitType}`}function us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qA(i)).join(", ")}]`),$u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vs(i)).join(",")),`Target(${r})`}(Tt(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):S.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of ps(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=Vb(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,ps(r),i)||r.endAt&&!function(s,a,u){let c=Vb(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,ps(r),i))}(t,e)}function KA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QA(t){return(e,n)=>{let r=!1;for(let i of ps(t)){let o=KL(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function KL(t,e,n){let r=t.field.isKeyField()?S.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?Wr(u,c):R()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return R()}}var Un=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return VA(this.inner)}size(){return this.innerSize}};var QL=new Ce(S.comparator);function Pt(){return QL}var YA=new Ce(S.comparator);function du(...t){let e=YA;for(let n of t)e=e.insert(n.key,n);return e}function ZA(t){let e=YA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function kn(){return pu()}function XA(){return pu()}function pu(){return new Un(t=>t.toString(),(t,e)=>t.isEqual(e))}var YL=new Ce(S.comparator),ZL=new we(S.comparator);function Z(...t){let e=ZL;for(let n of t)e=e.add(n);return e}var XL=new we(Y);function L_(){return XL}function JA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(e)?"-0":e}}function eS(t){return{integerValue:""+t}}function tS(t,e){return NA(e)?eS(e):JA(t,e)}var ws=class{constructor(){this._=void 0}};function JL(t,e,n){return t instanceof Kr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&of(o)&&(o=k_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof lr?rS(t,e):t instanceof dr?iS(t,e):function(i,o){let s=nS(i,o),a=$b(s)+$b(i.Ie);return Yy(s)&&Yy(i.Ie)?eS(a):JA(i.serializer,a)}(t,e)}function e2(t,e,n){return t instanceof lr?rS(t,e):t instanceof dr?iS(t,e):n}function nS(t,e){return t instanceof Qr?function(r){return Yy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Kr=class extends ws{},lr=class extends ws{constructor(e){super(),this.elements=e}};function rS(t,e){let n=oS(e);for(let r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}var dr=class extends ws{constructor(e){super(),this.elements=e}};function iS(t,e){let n=oS(e);for(let r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}var Qr=class extends ws{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function $b(t){return Oe(t.integerValue||t.doubleValue)}function oS(t){return Du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Gi=class{constructor(e,n){this.field=e,this.transform=n}};function t2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lr&&i instanceof lr||r instanceof dr&&i instanceof dr?ms(r.elements,i.elements,jn):r instanceof Qr&&i instanceof Qr?jn(r.Ie,i.Ie):r instanceof Kr&&i instanceof Kr}(t.transform,e.transform)}var uv=class{constructor(e,n){this.version=e,this.transformResults=n}},ke=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Es=class{};function sS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zr(t.key,ke.none()):new Yr(t.key,t.data,ke.none());{let n=t.data,r=vt.empty(),i=new we(je.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(t.key,r,new Ut(i.toArray()),ke.none())}}function n2(t,e,n){t instanceof Yr?function(i,o,s){let a=i.value.clone(),u=qb(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vn?function(i,o,s){if(!oh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qb(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(aS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,r){return t instanceof Yr?function(o,s,a,u){if(!oh(o.precondition,s))return a;let c=o.value.clone(),l=zb(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vn?function(o,s,a,u){if(!oh(o.precondition,s))return a;let c=zb(o.fieldTransforms,u,s),l=s.data;return l.setAll(aS(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return oh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function r2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=nS(r.transform,i||null);o!=null&&(n===null&&(n=vt.empty()),n.set(r.field,o))}return n||null}function Hb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ms(r,i,(o,s)=>t2(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Yr=class extends Es{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends Es{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function aS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function qb(t,e,n){let r=new Map;F(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,e2(s,a,n[i]))}return r}function zb(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,JL(o,s,e))}return r}var Zr=class extends Es{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cu=class extends Es{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Tu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&n2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=XA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=sS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(U.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&ms(this.mutations,e.mutations,(n,r)=>Hb(n,r))&&ms(this.baseMutations,e.baseMutations,(n,r)=>Hb(n,r))}},cv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){F(e.mutations.length===r.length);let i=function(){return YL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var bu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,ce;function uS(t){switch(t){default:return R();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function cS(t){if(t===void 0)return Le("GRPC error has no .code"),g.UNKNOWN;switch(t){case Ge.OK:return g.OK;case Ge.CANCELLED:return g.CANCELLED;case Ge.UNKNOWN:return g.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return g.INTERNAL;case Ge.UNAVAILABLE:return g.UNAVAILABLE;case Ge.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Ge.NOT_FOUND:return g.NOT_FOUND;case Ge.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Ge.ABORTED:return g.ABORTED;case Ge.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Ge.DATA_LOSS:return g.DATA_LOSS;default:return R()}}(ce=Ge||(Ge={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var Gb=null;function lS(){return new TextEncoder}var i2=new Pi([4294967295,4294967295],0);function Wb(t){let e=lS().encode(t),n=new bb;return n.update(e),new Uint8Array(n.digest())}function Kb(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([i,o],0)]}var dv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bi(`Invalid padding: ${n}`);if(r<0)throw new Bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Pi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Pi.fromNumber(r)));return i.compare(i2)===1&&(i=new Pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=Wb(e),[r,i]=Kb(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=Wb(e),[r,i]=Kb(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Au=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(U.min(),i,new Ce(Y),Pt(),Z())}},Su=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Z(),Z(),Z())}};var gs=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},wh=class{constructor(e,n){this.targetId=e,this.fe=n}},Eh=class{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ih=class{constructor(){this.ge=0,this.pe=Yb(),this.ye=ot.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Z(),n=Z(),r=Z();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:R()}}),new Su(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Yb()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,F(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},hv=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Pt(),this.Qe=Qb(),this.Ke=new Ce(Y)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:R()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(yh(o))if(r===0){let s=new S(o.path);this.We(n,s,Ye.newNoDocument(s,U.min()))}else F(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}Gb?.tt(function(l,d,h,f,y){var v,_,T,L,b,H;let z={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},Q=d.unchangedNames;return Q&&(z.bloomFilter={applied:y===0,hashCount:(v=Q?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(L=(T=(_=Q?.bits)===null||_===void 0?void 0:_.bitmap)===null||T===void 0?void 0:T.length)!==null&&L!==void 0?L:0,padding:(H=(b=Q?.bits)===null||b===void 0?void 0:b.padding)!==null&&H!==void 0?H:0,mightContain:ve=>{var At;return(At=f?.mightContain(ve))!==null&&At!==void 0&&At}}),z}(s,e.fe,this.Le.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=zr(r).toUint8Array()}catch(u){if(u instanceof ph)return Jt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dv(s,i,o)}catch(u){return Jt(u instanceof Bi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&yh(a.target)){let u=new S(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,Ye.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Z();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new Au(e,n,this.Ke,this.qe,r);return this.qe=Pt(),this.Qe=Qb(),this.Ke=new Ce(Y),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ih,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new we(Y),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Ih),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Qb(){return new Ce(S.comparator)}function Yb(){return new Ce(S.comparator)}var o2=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),s2=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),a2=(()=>({and:"AND",or:"OR"}))(),fv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function pv(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function Is(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u2(t,e){return Is(t,e.toTimestamp())}function Be(t){return F(!!t),U.fromTimestamp(function(n){let r=qr(n);return new Ne(r.seconds,r.nanos)}(t))}function j_(t,e){return function(r){return new pe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function hS(t){let e=pe.fromString(t);return F(ES(e)),e}function xu(t,e){return j_(t.databaseId,e.path)}function Vn(t,e){let n=hS(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new S(pS(n))}function gv(t,e){return j_(t.databaseId,e)}function fS(t){let e=hS(t);return e.length===4?pe.emptyPath():pS(e)}function Mu(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pS(t){return F(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zb(t,e,n){return{name:xu(t,e),fields:n.value.mapValue.fields}}function gS(t,e,n){let r=Vn(t,e.name),i=Be(e.updateTime),o=e.createTime?Be(e.createTime):U.min(),s=new vt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function c2(t,e){return"found"in e?function(r,i){F(!!i.found),i.found.name,i.found.updateTime;let o=Vn(r,i.found.name),s=Be(i.found.updateTime),a=i.found.createTime?Be(i.found.createTime):U.min(),u=new vt({mapValue:{fields:i.found.fields}});return Ye.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){F(!!i.missing),F(!!i.readTime);let o=Vn(r,i.missing),s=Be(i.readTime);return Ye.newNoDocument(o,s)}(t,e):R()}function l2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:R()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(F(l===void 0||typeof l=="string"),ot.fromBase64String(l||"")):(F(l===void 0||l instanceof Uint8Array),ot.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let l=c.code===void 0?g.UNKNOWN:cS(c.code);return new w(l,c.message||"")}(s);n=new Eh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vn(t,r.document.name),o=Be(r.document.updateTime),s=r.document.createTime?Be(r.document.createTime):U.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=Ye.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new gs(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vn(t,r.document),o=r.readTime?Be(r.readTime):U.min(),s=Ye.newNoDocument(i,o),a=r.removedTargetIds||[];n=new gs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vn(t,r.document),o=r.removedTargetIds||[];n=new gs([],o,i,null)}else{if(!("filter"in e))return R();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lv(i,o),a=r.targetId;n=new wh(a,s)}}return n}function Ru(t,e){let n;if(e instanceof Yr)n={update:Zb(t,e.key,e.value)};else if(e instanceof Zr)n={delete:xu(t,e.key)};else if(e instanceof vn)n={update:Zb(t,e.key,e.data),updateMask:m2(e.fieldMask)};else{if(!(e instanceof Cu))return R();n={verify:xu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw R()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:u2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:R()}(t,e.precondition)),n}function mv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?ke.updateTime(Be(o.updateTime)):o.exists!==void 0?ke.exists(o.exists):ke.none()}(e.currentDocument):ke.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)F(a.setToServerValue==="REQUEST_TIME"),u=new Kr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new lr(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new dr(l)}else"increment"in a?u=new Qr(s,a.increment):R();let c=je.fromServerFormat(a.fieldPath);return new Gi(c,u)}(t,i)):[];if(e.update){e.update.name;let i=Vn(t,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new Ut(c.map(l=>je.fromServerFormat(l)))}(e.updateMask);return new vn(i,o,s,n,r)}return new Yr(i,o,n,r)}if(e.delete){let i=Vn(t,e.delete);return new Zr(i,n)}if(e.verify){let i=Vn(t,e.verify);return new Cu(i,n)}return R()}function d2(t,e){return t&&t.length>0?(F(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Be(i.updateTime):Be(o);return s.isEqual(U.min())&&(s=Be(o)),new uv(s,i.transformResults||[])}(n,e))):[]}function mS(t,e){return{documents:[gv(t,e.path)]}}function yS(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=gv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=gv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(u){if(u.length!==0)return wS(ye.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let o=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:cs(d.field),direction:f2(d.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let s=pv(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function vS(t){let e=fS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){F(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=_S(d);return h instanceof ye&&F_(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(y){return new qi(ls(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,$u(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new Bn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new Bn(f,h)}(n.endAt)),GA(e,i,s,o,a,"F",u,c)}function h2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _S(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ls(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ls(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ls(n.unaryFilter.field);return ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ls(n.unaryFilter.field);return ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return R()}}(t):t.fieldFilter!==void 0?function(n){return ie.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return R()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ye.create(n.compositeFilter.filters.map(r=>_S(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return R()}}(n.compositeFilter.op))}(t):R()}function f2(t){return o2[t]}function p2(t){return s2[t]}function g2(t){return a2[t]}function cs(t){return{fieldPath:t.canonicalString()}}function ls(t){return je.fromServerFormat(t.fieldPath)}function wS(t){return t instanceof ie?function(n){if(n.op==="=="){if(Ob(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(Pb(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ob(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(Pb(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:p2(n.op),value:n.value}}}(t):t instanceof ye?function(n){let r=n.getFilters().map(i=>wS(i));return r.length===1?r[0]:{compositeFilter:{op:g2(n.op),filters:r}}}(t):R()}function m2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ES(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ds=class t{constructor(e,n,r,i,o=U.min(),s=U.min(),a=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dh=class{constructor(e){this.ut=e}};function y2(t,e){let n;if(e.document)n=gS(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=S.fromSegments(e.noDocument.path),i=Ki(e.noDocument.readTime);n=Ye.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return R();{let r=S.fromSegments(e.unknownDocument.path),i=Ki(e.unknownDocument.version);n=Ye.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ne(i[0],i[1]);return U.fromTimestamp(o)}(e.readTime)),n}function Xb(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ch(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:xu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Is(o,s.version.toTimestamp()),createTime:Is(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wi(e.version)};else{if(!e.isUnknownDocument())return R();r.unknownDocument={path:n.path.toArray(),version:Wi(e.version)}}return r}function Ch(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(t){let e=new Ne(t.seconds,t.nanoseconds);return U.fromTimestamp(e)}function Vi(t,e){let n=(e.baseMutations||[]).map(o=>mv(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>mv(t.ut,o)),i=Ne.fromMillis(e.localWriteTimeMs);return new Tu(e.batchId,i,n,r)}function hu(t){let e=Ki(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ki(t.lastLimboFreeSnapshotVersion):U.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return F(o.documents.length===1),Tt(Ps(fS(o.documents[0])))}(t.query):function(o){return Tt(vS(o))}(t.query),new Ds(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function IS(t,e){let n=Wi(e.snapshotVersion),r=Wi(e.lastLimboFreeSnapshotVersion),i;i=yh(e.target)?mS(t.ut,e.target):yS(t.ut,e.target);let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function B_(t){let e=vS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}function Ny(t,e){return new bu(e.largestBatchId,mv(t.ut,e.overlayMutation))}function Jb(t,e){let n=e.path.lastSegment();return[t,Ct(e.path.popLast()),n]}function eA(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Wi(r.readTime),documentKey:Ct(r.documentKey.path),largestBatchId:r.largestBatchId}}var yv=class{getBundleMetadata(e,n){return tA(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ki(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return tA(e).put(function(i){return{bundleId:i.id,createTime:Wi(Be(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return nA(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:B_(o.bundledQuery),readTime:Ki(o.readTime)}}(r)})}saveNamedQuery(e,n){return nA(e).put(function(i){return{name:i.name,readTime:Wi(Be(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function tA(t){return st(t,"bundles")}function nA(t){return st(t,"namedQueries")}var Th=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return au(e).get(Jb(this.userId,n)).next(r=>r?Ny(this.serializer,r):null)}getOverlays(e,n){let r=kn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new bu(n,s);i.push(this.lt(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(Ct(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(au(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=kn(),o=Ct(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return au(e).W("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=Ny(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=kn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return au(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=Ny(this.serializer,c);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}lt(e,n){return au(e).put(function(i,o,s){let[a,u,c]=Jb(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ru(i.ut,s.mutation)}}(this.serializer,this.userId,n))}};function au(t){return st(t,"documentOverlays")}var ur=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),_u(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(zr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?jA(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):R()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),S.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};ur.St=new ur;function v2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rA(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=v2(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var vv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Bt(e),r=rA(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Bt(e),r=rA(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},_v=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},wv=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Li=class{constructor(){this.Wt=new vv,this.Gt=new _v(this.Wt),this.zt=new wv(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var ji=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Fr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=iA(t.arrayValue,e.arrayValue),n!==0?n:(n=iA(t.directionalValue,e.directionalValue),n!==0?n:S.comparator(t.documentKey,e.documentKey)))}function iA(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var bh=class{constructor(e){this.Jt=new we((n,r)=>je.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(F(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Hy(e);if(n!==void 0&&!this.tn(n))return!1;let r=ki(e),i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new we(je.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new fs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new fs(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new fs(r.field,r.dir==="asc"?0:1)));return new ys(ys.UNKNOWN_ID,this.collectionId,n,vu.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function DS(t){var e,n;if(F(t instanceof ie||t instanceof ye),t instanceof ie){if(t instanceof mh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ie.create(t.field,"==",o)))||[];return ye.create(i,"or")}return t}let r=t.filters.map(i=>DS(i));return ye.create(r,t.op)}function _2(t){if(t.getFilters().length===0)return[];let e=Dv(DS(t));return F(CS(e)),Ev(e)||Iv(e)?[e]:e.getFilters()}function Ev(t){return t instanceof ie}function Iv(t){return t instanceof ye&&F_(t)}function CS(t){return Ev(t)||Iv(t)||function(n){if(n instanceof ye&&Zy(n)){for(let r of n.getFilters())if(!Ev(r)&&!Iv(r))return!1;return!0}return!1}(t)}function Dv(t){if(F(t instanceof ie||t instanceof ye),t instanceof ie)return t;if(t.filters.length===1)return Dv(t.filters[0]);let e=t.filters.map(r=>Dv(r)),n=ye.create(e,t.op);return n=Ah(n),CS(n)?n:(F(n instanceof ye),F(_s(n)),F(n.filters.length>1),n.filters.reduce((r,i)=>U_(r,i)))}function U_(t,e){let n;return F(t instanceof ie||t instanceof ye),F(e instanceof ie||e instanceof ye),n=t instanceof ie?e instanceof ie?function(i,o){return ye.create([i,o],"and")}(t,e):oA(t,e):e instanceof ie?oA(e,t):function(i,o){if(F(i.filters.length>0&&o.filters.length>0),_s(i)&&_s(o))return HA(i,o.getFilters());let s=Zy(i)?i:o,a=Zy(i)?o:i,u=s.filters.map(c=>U_(c,a));return ye.create(u,"or")}(t,e),Ah(n)}function oA(t,e){if(_s(e))return HA(e,t.getFilters());{let n=e.filters.map(r=>U_(t,r));return ye.create(n,"or")}}function Ah(t){if(F(t instanceof ie||t instanceof ye),t instanceof ie)return t;let e=t.getFilters();if(e.length===1)return Ah(e[0]);if(UA(t))return t;let n=e.map(i=>Ah(i)),r=[];return n.forEach(i=>{i instanceof ie?r.push(i):i instanceof ye&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ye.create(r,t.op)}var Cv=class{constructor(){this.on=new Nu}addToCollectionParentIndex(e,n){return this.on.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(en.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(en.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Nu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new we(pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new we(pe.comparator)).toArray()}};var Xd=new Uint8Array(0),Tv=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Nu,this.an=new Un(r=>zi(r),(r,i)=>Hu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:r,parent:Ct(i)};return sA(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[SA(n),""],!1,!0);return sA(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(On(s.parent))}return r})}addFieldIndex(e,n){let r=uu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=os(e);return o.next(a=>{s.put(eA(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=uu(e),i=os(e),o=is(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=uu(e),r=is(e),i=os(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new bh(r).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=is(e),i=!0,o=new Map;return p.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Z(),a=[];return p.forEach(o,(u,c)=>{E("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(u)} to execute ${zi(n)}`);let l=function(b,H){let z=Hy(H);if(z===void 0)return null;for(let Q of vh(b,z.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(c,u),d=function(b,H){let z=new Map;for(let Q of ki(H))for(let ve of vh(b,Q.fieldPath))switch(ve.op){case"==":case"in":z.set(Q.fieldPath.canonicalString(),ve.value);break;case"not-in":case"!=":return z.set(Q.fieldPath.canonicalString(),ve.value),Array.from(z.values())}return null}(c,u),h=function(b,H){let z=[],Q=!0;for(let ve of ki(H)){let At=ve.kind===0?jb(b,ve.fieldPath,b.startAt):Bb(b,ve.fieldPath,b.startAt);z.push(At.value),Q&&(Q=At.inclusive)}return new Bn(z,Q)}(c,u),f=function(b,H){let z=[],Q=!0;for(let ve of ki(H)){let At=ve.kind===0?Bb(b,ve.fieldPath,b.endAt):jb(b,ve.fieldPath,b.endAt);z.push(At.value),Q&&(Q=At.inclusive)}return new Bn(z,Q)}(c,u),y=this.ln(u,c,h),v=this.ln(u,c,f),_=this.hn(u,c,d),T=this.Pn(u.indexId,l,y,h.inclusive,v,f.inclusive,_);return p.forEach(T,L=>r.j(L,n.limit).next(b=>{b.forEach(H=>{let z=S.fromSegments(H.documentKey);s.has(z)||(s=s.add(z),a.push(z))})}))}).next(()=>a)}return p.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=_2(ye.create(e.filters,"and")).map(r=>sv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.In(n[d/c]):Xd,f=this.Tn(e,h,r[d%c],i),y=this.En(e,h,o[d%c],s),v=a.map(_=>this.Tn(e,h,_,!0));l.push(...this.createRange(f,y,v))}return l}Tn(e,n,r,i){let o=new ji(e,S.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){let o=new ji(e,S.empty(),n,r);return i?o.Ht():o}cn(e,n){let r=new bh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.un(n);return p.forEach(i,o=>this.cn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new we(je.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new Li;for(let i of ki(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.jt(i.kind);ur.St.ht(o,s)}return r.Ut()}In(e){let n=new Li;return ur.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new Li;return ur.St.ht(Hi(this.databaseId,n),r.jt(function(o){let s=ki(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new Li);let o=0;for(let s of ki(e)){let a=r[o++];for(let u of i)if(this.Rn(n,s.fieldPath)&&Du(a))i=this.Vn(i,s,a);else{let c=u.jt(s.kind);ur.St.ht(a,c)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Li;u.seed(a.Ut()),ur.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=uu(e),i=os(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(l,d){let h=d?new vu(d.sequenceNumber,new en(Ki(d.readTime),new S(On(d.documentKey)),d.largestBatchId)):vu.empty(),f=l.fields.map(([y,v])=>new fs(je.fromServerFormat(y),v));return new ys(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Y(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=uu(e),o=os(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>o.put(eA(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.gn(e,i,u).next(c=>{let l=this.pn(o,u);return c.isEqual(l)?p.resolve():this.yn(e,o,u,c,l)}))))})}wn(e,n,r,i){return is(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return is(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=is(e),o=new we(Fr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new ji(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new we(Fr),i=this.dn(n,e);if(i==null)return r;let o=Hy(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Du(s))for(let a of s.arrayValue.values||[])r=r.add(new ji(n.indexId,e.key,this.In(a),i))}else r=r.add(new ji(n.indexId,e.key,Xd,i));return r}yn(e,n,r,i,o){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,l,d,h){let f=u.getIterator(),y=c.getIterator(),v=rs(f),_=rs(y);for(;v||_;){let T=!1,L=!1;if(v&&_){let b=l(v,_);b<0?L=!0:b>0&&(T=!0)}else v!=null?L=!0:T=!0;T?(d(_),_=rs(y)):L?(h(v),v=rs(f)):(v=rs(f),_=rs(y))}}(i,o,Fr,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),p.waitFor(s)}fn(e){let n=1;return os(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Fr(s,a)).filter((s,a,u)=>!a||Fr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Fr(s,e),u=Fr(s,n);if(a===0)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Xd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Xd,[]];o.push(IDBKeyRange.bound(a,u))}return o}bn(e,n){return Fr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(aA)}getMinOffset(e,n){return p.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||R())).next(aA)}};function sA(t){return st(t,"collectionParents")}function is(t){return st(t,"indexEntries")}function uu(t){return st(t,"indexConfiguration")}function os(t){return st(t,"indexState")}function aA(t){F(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;P_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new en(e.readTime,e.documentKey,n)}var uA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function TS(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(u.next(()=>{F(a===1)}));let c=[];for(let l of n.mutations){let d=PA(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return p.waitFor(o).next(()=>c)}function Sh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw R();e=t.noDocument}return JSON.stringify(e).length}Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);var xh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){F(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=ds(e),s=Vr(e);return s.add({}).next(a=>{F(typeof a=="number");let u=new Tu(a,n,r,i),c=function(f,y,v){let _=v.baseMutations.map(L=>Ru(f.ut,L)),T=v.mutations.map(L=>Ru(f.ut,L));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:_,mutations:T}}(this.serializer,this.userId,u),l=[],d=new we((h,f)=>Y(h.canonicalString(),f.canonicalString()));for(let h of i){let f=PA(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(c)),l.push(o.put(f,bL))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return Vr(e).get(n).next(r=>r?(F(r.userId===this.userId),Vi(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?p.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vr(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(F(a.batchId>=r),o=Vi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Vr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).W("userMutationsIndex",n).next(r=>r.map(i=>Vi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=nh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return ds(e).Y({range:i},(s,a,u)=>{let[c,l,d]=s,h=On(l);if(c===this.userId&&n.path.isEqual(h))return Vr(e).get(d).next(f=>{if(!f)throw R();F(f.userId===this.userId),o.push(Vi(this.serializer,f))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new we(Y),i=[];return n.forEach(o=>{let s=nh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=ds(e).Y({range:a},(c,l,d)=>{let[h,f,y]=c,v=On(f);h===this.userId&&o.path.isEqual(v)?r=r.add(y):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=nh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new we(Y);return ds(e).Y({range:s},(u,c,l)=>{let[d,h,f]=u,y=On(h);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Vr(e).get(o).next(s=>{if(s===null)throw R();F(s.userId===this.userId),r.push(Vi(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return TS(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ds(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=On(o[1]);i.push(u)}else a.done()}).next(()=>{F(i.length===0)})})}containsKey(e,n){return bS(e,this.userId,n)}Mn(e){return AS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function bS(t,e,n){let r=nh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ds(t).Y({range:o,J:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),c.done()}).next(()=>s)}function Vr(t){return st(t,"mutations")}function ds(t){return st(t,"documentMutations")}function AS(t){return st(t,"mutationQueues")}var Cs=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var bv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Cs(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>U.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ss(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(F(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0,o=[];return ss(e).Y((s,a)=>{let u=hu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return ss(e).Y((r,i)=>{let o=hu(i);n(o)})}Bn(e){return cA(e).get("targetGlobalKey").next(n=>(F(n!==null),n))}Ln(e,n){return cA(e).put("targetGlobalKey",n)}kn(e,n){return ss(e).put(IS(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=zi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ss(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=hu(a);Hu(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Lr(e);return n.forEach(s=>{let a=Ct(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=Lr(e);return p.forEach(n,o=>{let s=Ct(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Lr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Lr(e),o=Z();return i.Y({range:r,J:!0},(s,a,u)=>{let c=On(s[1]),l=new S(c);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=Ct(n.path),i=IDBKeyRange.bound([r],[SA(r)],!1,!0),o=0;return Lr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return ss(e).get(n).next(r=>r?hu(r):null)}};function ss(t){return st(t,"targets")}function cA(t){return st(t,"targetGlobal")}function Lr(t){return st(t,"targetDocuments")}function lA([t,e],[n,r]){let i=Y(t,n);return i===0?Y(e,r):i}var Av=class{constructor(e){this.Qn=e,this.buffer=new we(lA),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();lA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Sv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ei(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Jr(n)}yield this.Gn(3e5)}))}},xv=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Bt._e);let r=new Av(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(uA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uA):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),as()<=En.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function w2(t,e){return new xv(t,e)}var Mv=class{constructor(e,n){this.db=e,this.garbageCollector=w2(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Jd(e,r)}removeReference(e,n,r){return Jd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Jd(e,n)}Xn(e,n){return function(i,o){let s=!1;return AS(i).Z(a=>bS(i,a,o).next(u=>(u&&(s=!0),p.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let u=this.Xn(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,U.min()),Lr(e).delete(function(d){return[0,Ct(d.path)]}(s))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Jd(e,n)}Zn(e,n){let r=Lr(e),i,o=Bt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==Bt._e&&n(new S(On(i)),o),o=c,i=u):o=Bt._e}).next(()=>{o!==Bt._e&&n(new S(On(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Jd(t,e){return Lr(t).put(function(r,i){return{targetId:0,path:Ct(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Mh=class{constructor(){this.changes=new Un(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Rv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Oi(e).put(r)}removeEntry(e,n,r){return Oi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ch(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Ye.newInvalidDocument(n);return Oi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cu(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Ye.newInvalidDocument(n)};return Oi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cu(n))},(i,o)=>{r={document:this.tr(n,o),size:Sh(o)}}).next(()=>r)}getEntries(e,n){let r=Pt();return this.rr(e,n,(i,o)=>{let s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=Pt(),i=new Ce(S.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,Sh(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return p.resolve();let i=new we(fA);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(cu(i.first()),cu(i.last())),s=i.getIterator(),a=s.getNext();return Oi(e).Y({index:"documentKeyIndex",range:o},(u,c,l)=>{let d=S.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&fA(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?l.U(cu(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Ch(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oi(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let l=Pt();for(let d of c){let h=this.tr(S.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(zu(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=Pt(),s=hA(n,r),a=hA(n,en.max());return Oi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,l)=>{let d=this.tr(S.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new Nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return dA(e).get("remoteDocumentGlobalKey").next(n=>(F(!!n),n))}er(e,n){return dA(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=y2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(U.min())))return r}return Ye.newInvalidDocument(e)}};function SS(t){return new Rv(t)}var Nv=class extends Mh{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Un(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new we((o,s)=>Y(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=Xb(this._r.serializer,s);i=i.add(o.path.popLast());let c=Sh(u);r+=c-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=Xb(this._r.serializer,s.convertToNoDocument(U.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function dA(t){return st(t,"remoteDocumentGlobal")}function Oi(t){return st(t,"remoteDocumentsV14")}function cu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hA(t,e){let n=e.documentKey.path.toArray();return[t,Ch(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fA(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Y(n[o],r[o]),i)return i;return i=Y(n.length,r.length),i||(i=Y(n[n.length-2],r[r.length-2]),i||Y(n[n.length-1],r[r.length-1]))}var Pv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Rh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gu(r.mutation,i,Ut.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){let i=kn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=du();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=kn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Pt(),s=pu(),a=function(){return pu()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof vn)?o=o.insert(c.key,c):l!==void 0?(s.set(c.key,l.mutation.getFieldMask()),gu(l.mutation,c,l.mutation.getFieldMask(),Ne.now())):s.set(c.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Pv(l,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=pu(),i=new Ce((s,a)=>s-a),o=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Ut.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||Z()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=XA();l.forEach(h=>{if(!o.has(h)){let f=sS(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return S.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(kn()),a=-1,u=o;return s.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,Z())).next(l=>({batchId:a,changes:ZA(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new S(n)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=du();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,u=>{let c=function(d,h){return new yn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let l=c.getKey();s.get(l)===null&&(s=s.insert(l,Ye.newInvalidDocument(l)))});let a=du();return s.forEach((u,c)=>{let l=o.get(u);l!==void 0&&gu(l.mutation,c,Ut.empty(),Ne.now()),zu(n,c)&&(a=a.insert(u,c))}),a})}};var Ov=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return p.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Be(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:B_(i.bundledQuery),readTime:Be(i.readTime)}}(n)),p.resolve()}};var kv=class{constructor(){this.overlays=new Ce(S.comparator),this.lr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=kn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=kn(),o=n.length+1,s=new S(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ce((c,l)=>c-l),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);l===null&&(l=kn(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=kn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new bu(n,r));let o=this.lr.get(n);o===void 0&&(o=Z(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}};var Pu=class{constructor(){this.hr=new we(We.Pr),this.Ir=new we(We.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new We(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new We(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new S(new pe([])),r=new We(n,e),i=new We(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new S(new pe([])),r=new We(n,e),i=new We(n,e+1),o=Z();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new We(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return S.comparator(e.key,n.key)||Y(e.gr,n.gr)}static Tr(e,n){return Y(e.gr,n.gr)||S.comparator(e.key,n.key)}};var Fv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new we(We.Pr)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Tu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.yr=this.yr.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{let a=this.wr(s.gr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new we(Y);return n.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),p.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;S.isDocumentKey(o)||(o=o.child(""));let s=new We(new S(o),0),a=new we(Y);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},s),p.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){F(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return p.forEach(n.mutations,i=>{let o=new We(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new We(n,0),i=this.yr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Vv=class{constructor(e){this.Cr=e,this.docs=function(){return new Ce(S.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let r=Pt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ye.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Pt(),s=n.path,a=new S(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||P_(MA(l),r)<=0||(i.has(l.key)||zu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){R()}vr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Lv(this)}getSize(e){return p.resolve(this.size)}},Lv=class extends Mh{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var jv=class{constructor(e){this.persistence=e,this.Fr=new Un(n=>zi(n),Hu),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Pu,this.targetCount=0,this.Nr=Cs.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),p.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Cs(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.kn(n),p.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Or.containsKey(n))}};var Nh=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Bt(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new jv(this),this.indexManager=new Cv,this.remoteDocumentCache=function(i){return new Vv(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Dh(n),this.Kr=new Ov(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Fv(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new Bv(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return p.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Bv=class extends dh{constructor(e){super(),this.currentSequenceNumber=e}},Ph=class t{constructor(e){this.persistence=e,this.Gr=new Pu,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw R()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),p.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hr,r=>{let i=S.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,U.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return p.or([()=>p.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var Uv=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new hh("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mb,{unique:!0}),u.createObjectStore("documentMutations")}(e),pA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),pA(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:U.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").W().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mb,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:LL});c.createIndex("collectionPathOverlayIndex",jL,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",BL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:AL});c.createIndex("documentKeyIndex",SL),c.createIndex("collectionGroupIndex",xL)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:OL}).createIndex("sequenceNumberIndex",kL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:FL}).createIndex("documentKeyIndex",VL,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Sh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,u=>{F(u.userId===o.userId);let c=Vi(this.serializer,u);return TS(e,o.userId,c).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let u=new pe(s),c=function(d){return[0,Ct(d)]}(u);o.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:Ct(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:PL});let r=n.store("collectionParents"),i=new Nu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Ct(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let u=new pe(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],c)=>{let l=On(a);return o(l.popLast())}))}ni(e){let n=e.store("targets");return n.Y((r,i)=>{let o=hu(i),s=IS(this.serializer,o);return n.put(s)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new S(pe.fromString(d.document.name).popFirst(5)):d.noDocument?S.fromSegments(d.noDocument.path):d.unknownDocument?S.fromSegments(d.unknownDocument.path):R()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=SS(this.serializer),o=new Nh(Ph.jr,this.serializer.ut);return r.W().next(s=>{let a=new Map;return s.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:Z();Vi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new Ke(c),d=Th.ct(this.serializer,l),h=o.getIndexManager(l),f=xh.ct(l,this.serializer,h,o.referenceDelegate);return new Rh(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new wu(n,Bt._e),u).next()})})}};function pA(t){t.createObjectStore("targetDocuments",{keyPath:RL}).createIndex("documentTargetsIndex",NL,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ML,{unique:!0}),t.createObjectStore("targetGlobal")}var Py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$v=class t{constructor(e,n,r,i,o,s,a,u,c,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=c,this._i=l,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mv(this,i),this.Ii=n+"main",this.serializer=new Dh(u),this.Ti=new Hr(this.Ii,this.ai,new Uv(this.serializer)),this.qr=new bv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SS(this.serializer),this.Kr=new yv,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&Le("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Py);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Bt(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ei(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return lu(e).get("owner").next(n=>p.resolve(this.wi(n)))}Si(e){return eh(e).delete(this.clientId)}bi(){return m(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=st(n,"clientMetadata");return r.W().next(i=>{let o=this.Ci(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?p.resolve(!0):lu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Py);return!1}}return!(!this.networkEnabled||!this.inForeground)||eh(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new wu(e,Bt._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>eh(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return xh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tv(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Th.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===15?$L:u===14?FA:u===13?kA:u===12?UL:u===11?OA:void R()}(this.ai),s;return this.Ti.runTransaction(e,i,o,a=>(s=new wu(a,this.Lr?this.Lr.next():Bt._e),n==="readwrite-primary"?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw Le(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new w(g.FAILED_PRECONDITION,RA);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return lu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,Py)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lu(e).put("owner",n)}static D(){return Hr.D()}pi(e){let n=lu(e);return n.get("owner").next(r=>this.wi(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Le(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;wE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Le("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Le("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function lu(t){return st(t,"owner")}function eh(t){return st(t,"clientMetadata")}function $_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Hv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Z(),i=Z();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var qv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Oh=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new qv;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(as()<=En.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),p.resolve()):(as()<=En.DEBUG&&E("QueryEngine","Query:",us(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(as()<=En.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tt(n))):p.resolve())}zi(e,n){if(Ub(n))return p.resolve(null);let r=Tt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_h(n,null,"F"),r=Tt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Z(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,s,u.readTime)?this.zi(e,_h(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return Ub(n)||i.isEqual(U.min())?p.resolve(null):this.Gi.getDocuments(e,r).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,r,i)?p.resolve(null):(as()<=En.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),us(n)),this.Xi(e,s,n,xA(i,-1)).next(a=>a))})}Yi(e,n){let r=new we(QA(e));return n.forEach((i,o)=>{zu(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return as()<=En.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",us(n)),this.Gi.getDocumentsMatchingQuery(e,n,en.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var zv=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ce(Y),this.ns=new Un(o=>zi(o),Hu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function xS(t,e,n,r){return new zv(t,e,n,r)}function MS(t,e){return m(this,null,function*(){let n=M(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Z();for(let c of i){s.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of o){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})})}function E2(t,e){let n=M(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(y=>{f=f.next(()=>l.getEntry(u,y)).next(v=>{let _=c.docVersions.get(y);F(_!==null),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Z();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RS(t){let e=M(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function I2(t,e){let n=M(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ot.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,_,T){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(o,f))});let u=Pt(),c=Z();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(NS(o,s,e.documentUpdates).next(l=>{u=l.us,c=l.cs})),!r.isEqual(U.min())){let l=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ts=i,o))}function NS(t,e,n){let r=Z(),i=Z();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Pt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(U.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:s,cs:i}})}function D2(t,e){let n=M(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ts(t,e){let n=M(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Ds(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function bs(t,e,n){return m(this,null,function*(){let r=M(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ei(s))throw s;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function kh(t,e,n){let r=M(t),i=U.min(),o=Z();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){let d=M(u),h=d.ns.get(l);return h!==void 0?p.resolve(d.ts.get(h)):d.qr.getTargetData(c,l)}(r,s,Tt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:U.min(),n?o:Z())).next(a=>(kS(r,KA(e),a),{documents:a,ls:o})))}function PS(t,e){let n=M(t),r=M(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function OS(t,e){let n=M(t),r=n.rs.get(e)||U.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,xA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kS(n,e,i),i))}function kS(t,e,n){let r=t.rs.get(e)||U.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function C2(t,e,n,r){return m(this,null,function*(){let i=M(t),o=Z(),s=Pt();for(let c of n){let l=e.hs(c.metadata.name);c.document&&(o=o.add(l));let d=e.Ps(c);d.setReadTime(e.Is(c.metadata.readTime)),s=s.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield Ts(i,function(l){return Tt(Ps(pe.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>NS(c,a,s).next(l=>(a.apply(c),l)).next(l=>i.qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.us,l.cs)).next(()=>l.us)))})}function T2(r,i){return m(this,arguments,function*(t,e,n=Z()){let o=yield Ts(t,Tt(B_(e.bundledQuery))),s=M(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Be(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Kr.saveNamedQuery(a,e);let c=o.withResumeToken(ot.EMPTY_BYTE_STRING,u);return s.ts=s.ts.insert(c.targetId,c),s.qr.updateTargetData(a,c).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function gA(t,e){return`firestore_clients_${t}_${e}`}function mA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Oy(t,e){return`firestore_targets_${t}_${e}`}var Fh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Le("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},mu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(Le("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Vh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=L_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=NA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Le("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Gv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Le("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ou=class{constructor(){this.activeTargetIds=L_()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},yu=class{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ce(Y),this.started=!1,this.ps=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=gA(this.persistenceKey,this.Rs),this.ws=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Ou),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(gA(this.persistenceKey,r));if(i){let o=Vh.Ts(r,i);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Oy(this.persistenceKey,e));if(r){let i=mu.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Oy(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void Le("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(o){let s=Bt._e;if(o!=null)try{let a=JSON.parse(o);F(typeof a=="number"),s=a}catch(a){Le("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Bt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){let i=new Fh(this.currentUser,e,n,r),o=mA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){let n=mA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=Oy(this.persistenceKey,e),o=new mu(e,n,r);this.setItem(i,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return Vh.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Fh.Ts(new Ke(o),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return mu.Ts(i,n)}Ms(e){return Gv.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=L_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Lh=class{constructor(){this.eo=new Ou,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Ou,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Wv=class{ro(e){}shutdown(){}};var jh=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var th=null;function ky(){return th===null?th=function(){return 268435456+Math.round(2147483648*Math.random())}():th++,"0x"+th.toString(16)}var b2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Kv=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var yt="WebChannelConnection",Qv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){let a=ky(),u=this.So(n,r);E("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,o,s),this.Do(n,u,c,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Jt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ns}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){let i=b2[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let o=ky();return new Promise((s,a)=>{let u=new Tb;u.setWithCredentials(!0),u.listenOnce(Db.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zd.NO_ERROR:let l=u.getResponseJson();E(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Zd.TIMEOUT:E(yt,`RPC '${e}' ${o} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:let d=u.getStatus();if(E(yt,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let y=function(_){let T=_.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(T)>=0?T:g.UNKNOWN}(f.status);a(new w(y,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:R()}}finally{E(yt,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);E(yt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}vo(e,n,r){let i=ky(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Eb(),a=Ib(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=o.join("");E(yt,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=s.createWebChannel(l,u),h=!1,f=!1,y=new Kv({co:_=>{f?E(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(E(yt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(yt,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},lo:()=>d.close()}),v=(_,T,L)=>{_.listen(T,b=>{try{L(b)}catch(H){setTimeout(()=>{throw H},0)}})};return v(d,su.EventType.OPEN,()=>{f||E(yt,`RPC '${e}' stream ${i} transport opened.`)}),v(d,su.EventType.CLOSE,()=>{f||(f=!0,E(yt,`RPC '${e}' stream ${i} transport closed`),y.Ro())}),v(d,su.EventType.ERROR,_=>{f||(f=!0,Jt(yt,`RPC '${e}' stream ${i} transport errored:`,_),y.Ro(new w(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,su.EventType.MESSAGE,_=>{var T;if(!f){let L=_.data[0];F(!!L);let b=L,H=b.error||((T=b[0])===null||T===void 0?void 0:T.error);if(H){E(yt,`RPC '${e}' stream ${i} received error:`,H);let z=H.status,Q=function(jf){let vc=Ge[jf];if(vc!==void 0)return cS(vc)}(z),ve=H.message;Q===void 0&&(Q=g.INTERNAL,ve="Unknown error status: "+z+" with message "+H.message),f=!0,y.Ro(new w(Q,ve)),d.close()}else E(yt,`RPC '${e}' stream ${i} received:`,L),y.Vo(L)}}),v(a,Cb.STAT_EVENT,_=>{_.stat===Ry.PROXY?E(yt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Ry.NOPROXY&&E(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Ao()},0),y}};function FS(){return typeof window<"u"?window:null}function sh(){return typeof document<"u"?document:null}function Gu(t){return new fv(t,!0)}var ku=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var Bh=class{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ku(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return m(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return m(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return m(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Le(n.toString()),Le("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>m(this,null,function*(){this.state=0,this.start()}))}o_(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Yv=class extends Bh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=l2(this.serializer,e),r=function(o){if(!("targetChange"in o))return U.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?U.min():s.readTime?Be(s.readTime):U.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=Mu(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=yh(u)?{documents:mS(o,u)}:{query:yS(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=dS(o,s.resumeToken);let c=pv(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(U.min())>0){a.readTime=Is(o,s.snapshotVersion.toTimestamp());let c=pv(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=h2(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=Mu(this.serializer),n.removeTarget=e,this.e_(n)}},Zv=class extends Bh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(F(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=d2(e.writeResults,e.commitTime),r=Be(e.commitTime);return this.listener.I_(r,n)}return F(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=Mu(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ru(this.serializer,r))};this.e_(n)}};var Xv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new w(g.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(g.UNKNOWN,o.toString())})}terminate(){this.d_=!0}};var Jv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Le(n),this.f_=!1):E("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var e_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{r.enqueueAndForget(()=>m(this,null,function*(){ti(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let c=M(u);c.C_.add(4),yield Os(c),c.M_.set("Unknown"),c.C_.delete(4),yield Wu(c)})}(this))}))}),this.M_=new Jv(r,i)}};function Wu(t){return m(this,null,function*(){if(ti(t))for(let e of t.v_)yield e(!0)})}function Os(t){return m(this,null,function*(){for(let e of t.v_)yield e(!1)})}function sf(t,e){let n=M(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),z_(n)?q_(n):Fs(n).Ho()&&H_(n,e))}function Fu(t,e){let n=M(t),r=Fs(n);n.D_.delete(e),r.Ho()&&VS(n,e),n.D_.size===0&&(r.Ho()?r.Zo():ti(n)&&n.M_.set("Unknown"))}function H_(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(U.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fs(t).u_(e)}function VS(t,e){t.x_.Oe(e),Fs(t).c_(e)}function q_(t){t.x_=new hv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Fs(t).start(),t.M_.g_()}function z_(t){return ti(t)&&!Fs(t).jo()&&t.D_.size>0}function ti(t){return M(t).C_.size===0}function LS(t){t.x_=void 0}function A2(t){return m(this,null,function*(){t.D_.forEach((e,n)=>{H_(t,e)})})}function S2(t,e){return m(this,null,function*(){LS(t),z_(t)?(t.M_.w_(e),q_(t)):t.M_.set("Unknown")})}function x2(t,e,n){return m(this,null,function*(){if(t.M_.set("Online"),e instanceof Eh&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Uh(t,r)}else if(e instanceof gs?t.x_.$e(e):e instanceof wh?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(U.min()))try{let r=yield RS(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.x_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=o.D_.get(c);l&&o.D_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let l=o.D_.get(u);if(!l)return;o.D_.set(u,l.withResumeToken(ot.EMPTY_BYTE_STRING,l.snapshotVersion)),VS(o,u);let d=new Ds(l.target,u,c,l.sequenceNumber);H_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield Uh(t,r)}})}function Uh(t,e,n){return m(this,null,function*(){if(!ei(e))throw e;t.C_.add(1),yield Os(t),t.M_.set("Offline"),n||(n=()=>RS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Wu(t)}))})}function jS(t,e){return e().catch(n=>Uh(t,n,e))}function ks(t){return m(this,null,function*(){let e=M(t),n=Xr(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;M2(e);)try{let i=yield D2(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,R2(e,i)}catch(i){yield Uh(e,i)}BS(e)&&US(e)})}function M2(t){return ti(t)&&t.b_.length<10}function R2(t,e){t.b_.push(e);let n=Xr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function BS(t){return ti(t)&&!Xr(t).jo()&&t.b_.length>0}function US(t){Xr(t).start()}function N2(t){return m(this,null,function*(){Xr(t).E_()})}function P2(t){return m(this,null,function*(){let e=Xr(t);for(let n of t.b_)e.P_(n.mutations)})}function O2(t,e,n){return m(this,null,function*(){let r=t.b_.shift(),i=cv.from(r,e,n);yield jS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ks(t)})}function k2(t,e){return m(this,null,function*(){e&&Xr(t).h_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return uS(s)&&s!==g.ABORTED}(i.code)){let o=r.b_.shift();Xr(r).Yo(),yield jS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ks(r)}})}(t,e)),BS(t)&&US(t)})}function yA(t,e){return m(this,null,function*(){let n=M(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=ti(n);n.C_.add(3),yield Os(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Wu(n)})}function t_(t,e){return m(this,null,function*(){let n=M(t);e?(n.C_.delete(2),yield Wu(n)):e||(n.C_.add(2),yield Os(n),n.M_.set("Unknown"))})}function Fs(t){return t.O_||(t.O_=function(n,r,i){let o=M(n);return o.A_(),new Yv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:A2.bind(null,t),Io:S2.bind(null,t),a_:x2.bind(null,t)}),t.v_.push(e=>m(this,null,function*(){e?(t.O_.Yo(),z_(t)?q_(t):t.M_.set("Unknown")):(yield t.O_.stop(),LS(t))}))),t.O_}function Xr(t){return t.N_||(t.N_=function(n,r,i){let o=M(n);return o.A_(),new Zv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:N2.bind(null,t),Io:k2.bind(null,t),T_:P2.bind(null,t),I_:O2.bind(null,t)}),t.v_.push(e=>m(this,null,function*(){e?(t.N_.Yo(),yield ks(t)):(yield t.N_.stop(),t.b_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var n_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Vs(t,e){if(Le("AsyncQueue",`${e}: ${t}`),ei(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var $h=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||S.comparator(n.key,r.key):(n,r)=>S.comparator(n.key,r.key),this.keyedMap=du(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Hh=class{constructor(){this.B_=new Ce(S.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):R():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},As=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,$h.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var r_=class{constructor(){this.k_=void 0,this.listeners=[]}},i_=class{constructor(){this.queries=new Un(e=>WA(e),qu),this.onlineState="Unknown",this.q_=new Set}};function G_(t,e){return m(this,null,function*(){let n=M(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new r_),i)try{o.k_=yield n.onListen(r)}catch(s){let a=Vs(s,`Initialization of query '${us(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&K_(n)})}function W_(t,e){return m(this,null,function*(){let n=M(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function F2(t,e){let n=M(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&K_(n)}function V2(t,e,n){let r=M(t),i=r.queries.get(e);if(i)for(let o of i.listeners)o.onError(n);r.queries.delete(e)}function K_(t){t.q_.forEach(e=>{e.next()})}var Vu=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new As(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var o_=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var qh=class{constructor(e){this.serializer=e}hs(e){return Vn(this.serializer,e)}Ps(e){return e.metadata.exists?gS(this.serializer,e.document,!1):Ye.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Be(e)}},s_=class{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$S(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let r=pe.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,r=new qh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.hs(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Z()).add(o);n.set(s,a)}}return n}complete(){return m(this,null,function*(){let e=yield C2(this.localStore,new qh(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let r of this.queries)yield T2(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function $S(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var zh=class{constructor(e){this.key=e}},Gh=class{constructor(e){this.key=e}},Wh=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Z(),this.mutatedKeys=Z(),this._a=QA(e),this.aa=new $h(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new Hh,i=n?n.aa:this.aa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=zu(this.query,d)?d:null,y=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?y!==v&&(r.track({type:3,doc:f}),_=!0):this.ha(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this._a(f,u)>0||c&&this._a(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(s=s.add(f),o=v?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let s=e.la.L_();s.sort((l,d)=>function(f,y){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R()}};return v(f)-v(y)}(l.type,d.type)||this._a(l.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],u=this.oa.size===0&&this.current&&!i?1:0,c=u!==this.sa;return this.sa=u,s.length!==0||c?{snapshot:new As(this.query,e.aa,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Hh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=Z(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new Gh(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new zh(r))}),n}da(e){this.ia=e.ls,this.oa=Z();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return As.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},a_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},u_=class{constructor(e){this.key=e,this.Ra=!1}},c_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Un(a=>WA(a),qu),this.fa=new Map,this.ga=new Set,this.pa=new Ce(S.comparator),this.ya=new Map,this.wa=new Pu,this.Sa={},this.ba=new Map,this.Da=Cs.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function L2(t,e){return m(this,null,function*(){let n=J_(t),r,i,o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{let s=yield Ts(n.localStore,Tt(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield Q_(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&sf(n.remoteStore,s)}return i})}function Q_(t,e,n,r,i){return m(this,null,function*(){t.va=(d,h,f)=>function(v,_,T,L){return m(this,null,function*(){let b=_.view.ca(T);b.Zi&&(b=yield kh(v.localStore,_.query,!1).then(({documents:ve})=>_.view.ca(ve,b)));let H=L&&L.targetChanges.get(_.targetId),z=L&&L.targetMismatches.get(_.targetId)!=null,Q=_.view.applyChanges(b,v.isPrimaryClient,H,z);return l_(v,_.targetId,Q.Ta),Q.snapshot})}(t,d,h,f);let o=yield kh(t.localStore,e,!0),s=new Wh(e,o.ls),a=s.ca(o.documents),u=Su.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);l_(t,n,c.Ta);let l=new a_(e,n,s);return t.ma.set(e,l),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),c.snapshot})}function j2(t,e){return m(this,null,function*(){let n=M(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!qu(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bs(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Fu(n.remoteStore,r.targetId),Ss(n,r.targetId)}).catch(Jr))):(Ss(n,r.targetId),yield bs(n.localStore,r.targetId,!0))})}function B2(t,e,n){return m(this,null,function*(){let r=ew(t);try{let i=yield function(s,a){let u=M(s),c=Ne.now(),l=a.reduce((f,y)=>f.add(y.key),Z()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let y=Pt(),v=Z();return u.ss.getEntries(f,l).next(_=>{y=_,y.forEach((T,L)=>{L.isValidDocument()||(v=v.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,y)).next(_=>{d=_;let T=[];for(let L of a){let b=r2(L,d.get(L.key).overlayedDocument);b!=null&&T.push(new vn(L.key,b,BA(b.value.mapValue),ke.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,T,a)}).next(_=>{h=_;let T=_.applyToLocalDocumentSet(d,v);return u.documentOverlayCache.saveOverlays(f,_.batchId,T)})}).then(()=>({batchId:h.batchId,changes:ZA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Sa[s.currentUser.toKey()];c||(c=new Ce(Y)),c=c.insert(a,u),s.Sa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield pr(r,i.changes),yield ks(r.remoteStore)}catch(i){let o=Vs(i,"Failed to persist write");n.reject(o)}})}function HS(t,e){return m(this,null,function*(){let n=M(t);try{let r=yield I2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.ya.get(o);s&&(F(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?F(s.Ra):i.removedDocuments.size>0&&(F(s.Ra),s.Ra=!1))}),yield pr(n,r,e)}catch(r){yield Jr(r)}})}function vA(t,e,n){let r=M(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((o,s)=>{let a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=M(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.listeners)h.Q_(a)&&(c=!0)}),c&&K_(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function U2(t,e,n){return m(this,null,function*(){let r=M(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),o=i&&i.key;if(o){let s=new Ce(S.comparator);s=s.insert(o,Ye.newNoDocument(o,U.min()));let a=Z().add(o),u=new Au(U.min(),new Map,new Ce(Y),s,a);yield HS(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),X_(r)}else yield bs(r.localStore,e,!1).then(()=>Ss(r,e,n)).catch(Jr)})}function $2(t,e){return m(this,null,function*(){let n=M(t),r=e.batch.batchId;try{let i=yield E2(n.localStore,e);Z_(n,r,null),Y_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield pr(n,i)}catch(i){yield Jr(i)}})}function H2(t,e,n){return m(this,null,function*(){let r=M(t);try{let i=yield function(s,a){let u=M(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(F(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);Z_(r,e,n),Y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield pr(r,i)}catch(i){yield Jr(i)}})}function q2(t,e){return m(this,null,function*(){let n=M(t);ti(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=M(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){let i=Vs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Y_(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function Z_(t,e,n){let r=M(t),i=r.Sa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Ss(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||qS(t,r)})}function qS(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(Fu(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),X_(t))}function l_(t,e,n){for(let r of n)r instanceof zh?(t.wa.addReference(r.key,e),z2(t,r)):r instanceof Gh?(E("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||qS(t,r.key)):R()}function z2(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ga.add(r),X_(t))}function X_(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new S(pe.fromString(e)),r=t.Da.next();t.ya.set(r,new u_(n)),t.pa=t.pa.insert(n,r),sf(t.remoteStore,new Ds(Tt(Ps(n.path)),r,"TargetPurposeLimboResolution",Bt._e))}}function pr(t,e,n){return m(this,null,function*(){let r=M(t),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=Hv.Qi(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.Va.a_(i),yield function(u,c){return m(this,null,function*(){let l=M(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ei(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),y=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(y);l.ts=l.ts.insert(h,v)}}})}(r.localStore,o))})}function G2(t,e){return m(this,null,function*(){let n=M(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield MS(n.localStore,e);n.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(u=>{u.reject(new w(g.CANCELLED,s))})}),o.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pr(n,r._s)}})}function W2(t,e){let n=M(t),r=n.ya.get(e);if(r&&r.Ra)return Z().add(r.key);{let i=Z(),o=n.fa.get(e);if(!o)return i;for(let s of o){let a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function K2(t,e){return m(this,null,function*(){let n=M(t),r=yield kh(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&l_(n,e.targetId,i.Ta),i})}function Q2(t,e){return m(this,null,function*(){let n=M(t);return OS(n.localStore,e).then(r=>pr(n,r))})}function Y2(t,e,n,r){return m(this,null,function*(){let i=M(t),o=yield function(a,u){let c=M(a),l=M(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ks(i.remoteStore):n==="acknowledged"||n==="rejected"?(Z_(i,e,r||null),Y_(i,e),function(a,u){M(M(a).mutationQueue).Fn(u)}(i.localStore,e)):R(),yield pr(i,o)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Z2(t,e){return m(this,null,function*(){let n=M(t);if(J_(n),ew(n),e===!0&&n.Ca!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield _A(n,r.toArray());n.Ca=!0,yield t_(n.remoteStore,!0);for(let o of i)sf(n.remoteStore,o)}else if(e===!1&&n.Ca!==!1){let r=[],i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ss(n,s),bs(n.localStore,s,!0))),Fu(n.remoteStore,s)}),yield i,yield _A(n,r),function(s){let a=M(s);a.ya.forEach((u,c)=>{Fu(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ce(S.comparator)}(n),n.Ca=!1,yield t_(n.remoteStore,!1)}})}function _A(t,e,n){return m(this,null,function*(){let r=M(t),i=[],o=[];for(let s of e){let a,u=r.fa.get(s);if(u&&u.length!==0){a=yield Ts(r.localStore,Tt(u[0]));for(let c of u){let l=r.ma.get(c),d=yield K2(r,l);d.snapshot&&o.push(d.snapshot)}}else{let c=yield PS(r.localStore,s);a=yield Ts(r.localStore,c),yield Q_(r,zS(c),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i})}function zS(t){return GA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function X2(t){return function(n){return M(M(n).persistence).Bi()}(M(t).localStore)}function J2(t,e,n,r){return m(this,null,function*(){let i=M(t);if(i.Ca)return void E("SyncEngine","Ignoring unexpected query state notification.");let o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield OS(i.localStore,KA(o[0])),a=Au.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);yield pr(i,s,a);break}case"rejected":yield bs(i.localStore,e,!0),Ss(i,e,r);break;default:R()}})}function ej(t,e,n){return m(this,null,function*(){let r=J_(t);if(r.Ca){for(let i of e){if(r.fa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let o=yield PS(r.localStore,i),s=yield Ts(r.localStore,o);yield Q_(r,zS(o),s.targetId,!1,s.resumeToken),sf(r.remoteStore,s)}for(let i of n)r.fa.has(i)&&(yield bs(r.localStore,i,!1).then(()=>{Fu(r.remoteStore,i),Ss(r,i)}).catch(Jr))}})}function J_(t){let e=M(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U2.bind(null,e),e.Va.a_=F2.bind(null,e.eventManager),e.Va.Fa=V2.bind(null,e.eventManager),e}function ew(t){let e=M(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H2.bind(null,e),e}function tj(t,e,n){let r=M(t);(function(o,s,a){return m(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(f,y){let v=M(f),_=Be(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",T=>v.Kr.getBundleMetadata(T,y.id)).then(T=>!!T&&T.createTime.compareTo(_)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress($S(u));let c=new s_(u,o.localStore,s.serializer),l=yield s.Ma();for(;l;){let h=yield c.ea(l);h&&a._updateProgress(h),l=yield s.Ma()}let d=yield c.complete();return yield pr(o,d.ra,void 0),yield function(f,y){let v=M(f);return v.persistence.runTransaction("Save bundle","readwrite",_=>v.Kr.saveBundleMetadata(_,y))}(o.localStore,u),a._completeWith(d.progress),Promise.resolve(d.na)}catch(u){return Jt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Lu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xS(this.persistence,new Oh,e.initialUser,this.serializer)}createPersistence(e){return new Nh(Ph.jr,this.serializer)}createSharedClientState(e){return new Lh}terminate(){return m(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Kh=class t extends Lu{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield Bf(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield ew(this.xa.syncEngine),yield ks(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return xS(this.persistence,new Oh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Sv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Wy(n,this.persistence);return new Gy(e.asyncQueue,r)}createPersistence(e){let n=$_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new $v(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,FS(),sh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Lh}},d_=class t extends Kh{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield Bf(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof yu&&(this.sharedClientState.syncEngine={Ys:Y2.bind(null,n),Zs:J2.bind(null,n),Xs:ej.bind(null,n),Bi:X2.bind(null,n),Js:Q2.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>m(this,null,function*(){yield Z2(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=FS();if(!yu.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=$_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},ju=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G2.bind(null,this.syncEngine),yield t_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new i_}()}createDatastore(e){let n=Gu(e.databaseInfo.databaseId),r=function(o){return new Qv(o)}(e.databaseInfo);return function(o,s,a,u){return new Xv(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new e_(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vA(this.syncEngine,n,0),function(){return jh.D()?new jh:new Wv}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){let d=new c_(i,o,s,a,u,c);return l&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return m(this,null,function*(){let r=M(n);E("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Os(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};function wA(t,e=10240){let n=0;return{read(){return m(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return m(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var xs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Le("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var h_=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Qe,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){return m(this,null,function*(){return this.metadata.promise})}Ma(){return m(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return m(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);let i=yield this.Ka(r);return new o_(JSON.parse(i),e.length+r)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return m(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return m(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return m(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var f_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(i,o){return m(this,null,function*(){let s=M(i),a=Mu(s.serializer)+"/documents",u={documents:o.map(h=>xu(s.serializer,h))},c=yield s.Co("BatchGetDocuments",a,u,o.length),l=new Map;c.forEach(h=>{let f=c2(s.serializer,h);l.set(f.key.toString(),f)});let d=[];return o.forEach(h=>{let f=l.get(h.toString());F(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return m(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=S.fromPath(r);this.mutations.push(new Cu(i,this.precondition(i)))}),yield function(r,i){return m(this,null,function*(){let o=M(r),s=Mu(o.serializer)+"/documents",a={writes:i.map(u=>Ru(o.serializer,u))};yield o.wo("Commit",s,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw R();n=U.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(U.min())?ke.exists(!1):ke.updateTime(n):ke.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(U.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ke.updateTime(n)}return ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var p_=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new ku(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>m(this,null,function*(){let e=new f_(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})}))}za(e){try{let n=this.updateFunction(e);return!$u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uS(n)}return!1}};var g_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=ch.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>m(this,null,function*(){E("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){return m(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Vs(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ah(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield MS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function m_(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield tw(t);E("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>yA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>yA(e.remoteStore,o)),t._onlineComponents=e})}function GS(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function tw(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ah(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!GS(n))throw n;Jt("Error using user provided cache. Falling back to memory cache: "+n),yield ah(t,new Lu)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield ah(t,new Lu);return t._offlineComponents})}function af(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield m_(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield m_(t,new ju))),t._onlineComponents})}function WS(t){return tw(t).then(e=>e.persistence)}function nw(t){return tw(t).then(e=>e.localStore)}function KS(t){return af(t).then(e=>e.remoteStore)}function rw(t){return af(t).then(e=>e.syncEngine)}function nj(t){return af(t).then(e=>e.datastore)}function Ms(t){return m(this,null,function*(){let e=yield af(t),n=e.eventManager;return n.onListen=L2.bind(null,e.syncEngine),n.onUnlisten=j2.bind(null,e.syncEngine),n})}function rj(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield WS(t),n=yield KS(t);return e.setNetworkEnabled(!0),function(i){let o=M(i);return o.C_.delete(0),Wu(o)}(n)}))}function ij(t){return t.asyncQueue.enqueue(()=>m(this,null,function*(){let e=yield WS(t),n=yield KS(t);return e.setNetworkEnabled(!1),function(i){return m(this,null,function*(){let o=M(i);o.C_.add(0),yield Os(o),o.M_.set("Offline")})}(n)}))}function oj(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield function(c,l){let d=M(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Vs(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield nw(t),e,n)})),n.promise}function QS(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,c){let l=new xs({next:h=>{s.enqueueAndForget(()=>W_(o,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Vu(Ps(a.path),l,{includeMetadataChanges:!0,J_:!0});return G_(o,d)}(yield Ms(t),t.asyncQueue,e,n,r)})),r.promise}function sj(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o,s){return m(this,null,function*(){try{let a=yield kh(i,o,!0),u=new Wh(o,a.ls),c=u.ca(a.documents),l=u.applyChanges(c,!1);s.resolve(l.snapshot)}catch(a){let u=Vs(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield nw(t),e,n)})),n.promise}function YS(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,c){let l=new xs({next:h=>{s.enqueueAndForget(()=>W_(o,d)),h.fromCache&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Vu(a,l,{includeMetadataChanges:!0,J_:!0});return G_(o,d)}(yield Ms(t),t.asyncQueue,e,n,r)})),r.promise}function aj(t,e){let n=new xs(e);return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){M(i).q_.add(o),o.next()}(yield Ms(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(i,o){M(i).q_.delete(o)}(yield Ms(t),n)}))}}function uj(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?lS().encode(s):s,function(l,d){return new h_(l,d)}(function(l,d){if(l instanceof Uint8Array)return wA(l,d);if(l instanceof ArrayBuffer)return wA(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Gu(e));t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){tj(yield rw(t),i,r)}))}function cj(t,e){return t.asyncQueue.enqueue(()=>m(this,null,function*(){return function(r,i){let o=M(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield nw(t),e)}))}function ZS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var EA=new Map;function iw(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ow(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IA(t){if(!S.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DA(t){if(S.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":R()}function le(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=uf(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function XS(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Qh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ow("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fy;switch(r.type){case"firstParty":return new By(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=EA.get(n);r&&(E("ComponentProvider","Removing Datastore"),EA.delete(n),r.terminate())}(this),Promise.resolve()}};function JS(t,e,n,r={}){var i;let o=(t=le(t,Qi))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ke.MOCK_USER;else{a=_E(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ke(c)}t._authCredentials=new Vy(new uh(a,u))}}var ht=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ee=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ln(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ln=class t extends ht{constructor(e,n,r){super(e,n,Ps(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ee(this.firestore,null,new S(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function sw(t,e,...n){if(t=Se(t),iw("collection","path",e),t instanceof Qi){let r=pe.fromString(e,...n);return DA(r),new Ln(t,null,r)}{if(!(t instanceof Ee||t instanceof Ln))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return DA(r),new Ln(t.firestore,null,r)}}function ex(t,e){if(t=le(t,Qi),iw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(t,null,function(r){return new yn(pe.emptyPath(),r)}(e))}function Ku(t,e,...n){if(t=Se(t),arguments.length===1&&(e=ch.newId()),iw("doc","path",e),t instanceof Qi){let r=pe.fromString(e,...n);return IA(r),new Ee(t,null,new S(r))}{if(!(t instanceof Ee||t instanceof Ln))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return IA(r),new Ee(t.firestore,t instanceof Ln?t.converter:null,new S(r))}}function aw(t,e){return t=Se(t),e=Se(e),(t instanceof Ee||t instanceof Ln)&&(e instanceof Ee||e instanceof Ln)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function uw(t,e){return t=Se(t),e=Se(e),t instanceof ht&&e instanceof ht&&t.firestore===e.firestore&&qu(t._query,e._query)&&t.converter===e.converter}var y_=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ku(this,"async_queue_retry"),this.iu=()=>{let n=sh();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=sh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new Qe;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return m(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!ei(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Le("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=n_.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&R()}verifyOperationInProgress(){}uu(){return m(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function v_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var __=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var tx=-1,Ae=class extends Qi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new y_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nx(this),this._firestoreClient.terminate()}};function tt(t){return t._firestoreClient||nx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nx(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,l){return new Ky(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ZS(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new g_(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function rx(t,e){hx(t=le(t,Ae));let n=tt(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Jt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new ju;return ox(n,i,new Kh(i,r.cacheSizeBytes,e?.forceOwnership))}function ix(t){hx(t=le(t,Ae));let e=tt(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Jt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new ju;return ox(e,r,new d_(r,n.cacheSizeBytes))}function ox(t,e,n){let r=new Qe;return t.asyncQueue.enqueue(()=>m(this,null,function*(){try{yield ah(t,n),yield m_(t,e),r.resolve()}catch(i){let o=i;if(!GS(o))throw o;Jt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function sx(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Qe;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{yield function(r){return m(this,null,function*(){if(!Hr.D())return Promise.resolve();let i=r+"main";yield Hr.delete(i)})}($_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function ax(t){return function(n){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return q2(yield rw(n),r)})),r.promise}(tt(t=le(t,Ae)))}function ux(t){return rj(tt(t=le(t,Ae)))}function cx(t){return ij(tt(t=le(t,Ae)))}function lx(t,e){let n=tt(t=le(t,Ae)),r=new __;return uj(n,t._databaseId,e,r),r}function dx(t,e){return cj(tt(t=le(t,Ae)),e).then(n=>n?new ht(t,null,n.query):null)}function hx(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $n=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ot.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _n=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hr=class{constructor(e){this._methodName=e}};var Yi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}};var lj=/^__.*__$/,w_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yr(e,this.data,n,this.fieldTransforms)}},Yh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function fx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R()}}var Zh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Xh(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(fx(this.Iu)&&lj.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},E_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}pu(e,n,r,i=!1){return new Zh({Iu:e,methodName:n,gu:r,path:je.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function eo(t){let e=t._freezeSettings(),n=Gu(t._databaseId);return new E_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cf(t,e,n,r,i,o={}){let s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);dw("Data must be an object, but it was:",s,r);let a=mx(r,s),u,c;if(o.merge)u=new Ut(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=b_(e,d,n);if(!s.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);vx(l,h)||l.push(h)}u=new Ut(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new w_(new vt(a),u,c)}var Bu=class t extends hr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function px(t,e,n){return new Zh({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var I_=class t extends hr{_toFieldTransform(e){return new Gi(e.path,new Kr)}isEqual(e){return e instanceof t}},D_=class extends hr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=px(this,e,!0),r=this.yu.map(o=>to(o,n)),i=new lr(r);return new Gi(e.path,i)}isEqual(e){return this===e}},C_=class extends hr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=px(this,e,!0),r=this.yu.map(o=>to(o,n)),i=new dr(r);return new Gi(e.path,i)}isEqual(e){return this===e}},T_=class extends hr{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Qr(e.serializer,tS(e.serializer,this.wu));return new Gi(e.path,n)}isEqual(e){return this===e}};function cw(t,e,n,r){let i=t.pu(1,e,n);dw("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();Ji(r,(u,c)=>{let l=hw(e,u,n);c=Se(c);let d=i.Ru(l);if(c instanceof Bu)o.push(l);else{let h=to(c,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new Ut(o);return new Yh(s,a,i.fieldTransforms)}function lw(t,e,n,r,i,o){let s=t.pu(1,e,n),a=[b_(e,r,n)],u=[i];if(o.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(b_(e,o[h])),u.push(o[h+1]);let c=[],l=vt.empty();for(let h=a.length-1;h>=0;--h)if(!vx(c,a[h])){let f=a[h],y=u[h];y=Se(y);let v=s.Ru(f);if(y instanceof Bu)c.push(f);else{let _=to(y,v);_!=null&&(c.push(f),l.set(f,_))}}let d=new Ut(c);return new Yh(l,d,s.fieldTransforms)}function gx(t,e,n,r=!1){return to(n,t.pu(r?4:3,e))}function to(t,e){if(yx(t=Se(t)))return dw("Unsupported field value:",e,t),mx(t,e);if(t instanceof hr)return function(r,i){if(!fx(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=to(a,i.Vu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ne.fromDate(r);return{timestampValue:Is(i.serializer,o)}}if(r instanceof Ne){let o=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Is(i.serializer,o)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:dS(i.serializer,r._byteString)};if(r instanceof Ee){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:j_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${uf(r)}`)}(t,e)}function mx(t,e){let n={};return VA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(t,(r,i)=>{let o=to(i,e.Eu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function yx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Yi||t instanceof $n||t instanceof Ee||t instanceof hr)}function dw(t,e,n){if(!yx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=uf(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function b_(t,e,n){if((e=Se(e))instanceof _n)return e._internalPath;if(typeof e=="string")return hw(t,e);throw Xh("Field path arguments must be of type string or ",t,!1,void 0,n)}var dj=new RegExp("[~\\*/\\[\\]]");function hw(t,e,n){if(e.search(dj)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _n(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new w(g.INVALID_ARGUMENT,a+t+u)}function vx(t,e){return t.some(n=>n.isEqual(e))}var Zi=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},A_=class extends Zi{data(){return super.data()}};function lf(t,e){return typeof e=="string"?hw(t,e):e instanceof _n?e._internalPath:e._delegate._internalPath}function _x(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uu=class{},Xi=class extends Uu{};function gr(t,e,...n){let r=[];e instanceof Uu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof S_).length,a=o.filter(u=>u instanceof Jh).length;if(s>1||s>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Jh=class t extends Xi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return xx(e._query,n),new ht(e.firestore,e.converter,av(e._query,n))}_parse(e){let n=eo(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){TA(d,l);let f=[];for(let y of d)f.push(CA(u,o,y));h={arrayValue:{values:f}}}else h=CA(u,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||TA(d,l),h=gx(a,s,d,l==="in"||l==="not-in");return ie.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function wx(t,e,n){let r=e,i=lf("where",t);return Jh._create(i,r,n)}var S_=class t extends Uu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ye.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)xx(s,u),s=av(s,u)}(e._query,n),new ht(e.firestore,e.converter,av(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var x_=class t extends Xi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qi(o,s)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function Ex(t,e="asc"){let n=e,r=lf("orderBy",t);return x_._create(r,n)}var ef=class t extends Xi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ht(e.firestore,e.converter,_h(e._query,this._limit,this._limitType))}};function Ix(t){return XS("limit",t),ef._create("limit",t,"F")}function Dx(t){return XS("limitToLast",t),ef._create("limitToLast",t,"L")}var tf=class t extends Xi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Sx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function Cx(...t){return tf._create("startAt",t,!0)}function Tx(...t){return tf._create("startAfter",t,!1)}var nf=class t extends Xi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Sx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function bx(...t){return nf._create("endBefore",t,!1)}function Ax(...t){return nf._create("endAt",t,!0)}function Sx(t,e,n,r){if(n[0]=Se(n[0]),n[0]instanceof Zi)return function(o,s,a,u,c){if(!u)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of ps(o))if(d.field.isKeyField())l.push(Hi(s,u.key));else{let h=u.data.field(d.field);if(of(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new Bn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=eo(t.firestore);return function(s,a,u,c,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let y=0;y<l.length;y++){let v=l[y];if(h[y].field.isKeyField()){if(typeof v!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!V_(s)&&v.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);let _=s.path.child(pe.fromString(v));if(!S.isDocumentKey(_))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);let T=new S(_);f.push(Hi(a,T))}else{let _=gx(u,c,v);f.push(_)}}return new Bn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function CA(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(pe.fromString(n));if(!S.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hi(t,new S(r))}if(n instanceof Ee)return Hi(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(n)}.`)}function TA(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xx(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Rs=class{convertValue(e,n="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw R()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ji(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Yi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=k_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){let n=qr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=pe.fromString(e);F(ES(r));let i=new Gr(r.get(1),r.get(3)),o=new S(r.popFirst(5));return i.isEqual(n)||Le(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function df(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var M_=class extends Rs{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ee(this.firestore,null,n)}};var cr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tn=class extends Zi{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ur=class extends tn{data(e={}){return super.data(e)}},wn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ur(this._firestore,this._userDataWriter,r.key,r,new cr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:hj(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function hj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R()}}function fw(t,e){return t instanceof tn&&e instanceof tn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof wn&&e instanceof wn&&t._firestore===e._firestore&&uw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Mx(t){t=le(t,Ee);let e=le(t.firestore,Ae);return QS(tt(e),t._key).then(n=>yw(e,t,n))}var fr=class extends Rs{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ee(this.firestore,null,n)}};function Rx(t){t=le(t,Ee);let e=le(t.firestore,Ae),n=tt(e),r=new fr(e);return oj(n,t._key).then(i=>new tn(e,r,t._key,i,new cr(i!==null&&i.hasLocalMutations,!0),t.converter))}function Nx(t){t=le(t,Ee);let e=le(t.firestore,Ae);return QS(tt(e),t._key,{source:"server"}).then(n=>yw(e,t,n))}function Px(t){t=le(t,ht);let e=le(t.firestore,Ae),n=tt(e),r=new fr(e);return _x(t._query),YS(n,t._query).then(i=>new wn(e,r,t,i))}function Ox(t){t=le(t,ht);let e=le(t.firestore,Ae),n=tt(e),r=new fr(e);return sj(n,t._query).then(i=>new wn(e,r,t,i))}function kx(t){t=le(t,ht);let e=le(t.firestore,Ae),n=tt(e),r=new fr(e);return YS(n,t._query,{source:"server"}).then(i=>new wn(e,r,t,i))}function pw(t,e,n){t=le(t,Ee);let r=le(t.firestore,Ae),i=df(t.converter,e,n);return Ls(r,[cf(eo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ke.none())])}function gw(t,e,n,...r){t=le(t,Ee);let i=le(t.firestore,Ae),o=eo(i),s;return s=typeof(e=Se(e))=="string"||e instanceof _n?lw(o,"updateDoc",t._key,e,n,r):cw(o,"updateDoc",t._key,e),Ls(i,[s.toMutation(t._key,ke.exists(!0))])}function Fx(t){return Ls(le(t.firestore,Ae),[new Zr(t._key,ke.none())])}function Vx(t,e){let n=le(t.firestore,Ae),r=Ku(t),i=df(t.converter,e);return Ls(n,[cf(eo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ke.exists(!1))]).then(()=>r)}function mw(t,...e){var n,r,i;t=Se(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||v_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(v_(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof Ee)c=le(t.firestore,Ae),l=Ps(t._key.path),u={next:d=>{e[s]&&e[s](yw(c,t,d))},error:e[s+1],complete:e[s+2]};else{let d=le(t,ht);c=le(d.firestore,Ae),l=d._query;let h=new fr(c);u={next:f=>{e[s]&&e[s](new wn(c,h,d,f))},error:e[s+1],complete:e[s+2]},_x(t._query)}return function(h,f,y,v){let _=new xs(v),T=new Vu(f,_,y);return h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return G_(yield Ms(h),T)})),()=>{_.Na(),h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return W_(yield Ms(h),T)}))}}(tt(c),l,a,u)}function Lx(t,e){return aj(tt(t=le(t,Ae)),v_(e)?e:{next:e})}function Ls(t,e){return function(r,i){let o=new Qe;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return B2(yield rw(r),i,o)})),o.promise}(tt(t),e)}function yw(t,e,n){let r=n.docs.get(e._key),i=new fr(t);return new tn(t,i,e._key,r,new cr(n.hasPendingWrites,n.fromCache),e.converter)}var fj={maxAttempts:5};var rf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eo(e)}set(e,n,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=df(i.converter,n,r),s=cf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ke.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(n=Se(n))=="string"||n instanceof _n?lw(this._dataReader,"WriteBatch.update",o._key,n,r,i):cw(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,ke.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Zr(n._key,ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(t,e){if((t=Se(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var R_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=eo(n)}get(n){let r=jr(n,this._firestore),i=new M_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return R();let s=o[0];if(s.isFoundDocument())return new Zi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Zi(this._firestore,i,r._key,null,r.converter);throw R()})}set(n,r,i){let o=jr(n,this._firestore),s=df(o.converter,r,i),a=cf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=jr(n,this._firestore),a;return a=typeof(r=Se(r))=="string"||r instanceof _n?lw(this._dataReader,"Transaction.update",s._key,r,i,o):cw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=jr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=jr(e,this._firestore),r=new fr(this._firestore);return super.get(e).then(i=>new tn(this._firestore,r,n._key,i._document,new cr(!1,!1),n.converter))}};function jx(t,e,n){t=le(t,Ae);let r=Object.assign(Object.assign({},fj),n);return function(o){if(o.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Qe;return o.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){let c=yield nj(o);new p_(o.asyncQueue,c,a,s,u).run()})),u.promise}(tt(t),i=>e(new R_(t,i)),r)}function Bx(){return new Bu("deleteField")}function Ux(){return new I_("serverTimestamp")}function $x(...t){return new D_("arrayUnion",t)}function Hx(...t){return new C_("arrayRemove",t)}function qx(t){return new T_("increment",t)}(function(e,n=!0){(function(i){Ns=i})(DE),Zs(new ai("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ae(new Ly(r.getProvider("auth-internal")),new $y(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gr(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mr(Ab,"4.4.0",e),mr(Ab,"4.4.0","esm2017")})();var pj="@firebase/firestore-compat",gj="0.3.23";function Dw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function zx(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function Gx(){if(!LA())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var hf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Gx(),new t($n.fromBase64String(e))}static fromUint8Array(e){return zx(),new t($n.fromUint8Array(e))}toBase64(){return Gx(),this._delegate.toBase64()}toUint8Array(){return zx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function vw(t){return mj(t,["next","error","complete"])}function mj(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var _w=class{enableIndexedDbPersistence(e,n){return rx(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return ix(e._delegate)}clearIndexedDbPersistence(e){return sx(e._delegate)}},ff=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Jt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){JS(this._delegate,e,n,r)}enableNetwork(){return ux(this._delegate)}disableNetwork(){return cx(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ow("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ax(this._delegate)}onSnapshotsInSync(e){return Lx(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Us(this,sw(this._delegate,e))}catch(n){throw bt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Hn(this,Ku(this._delegate,e))}catch(n){throw bt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new oo(this,ex(this._delegate,e))}catch(n){throw bt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jx(this._delegate,n=>e(new pf(this,n)))}batch(){return tt(this._delegate),new gf(new rf(this._delegate,e=>Ls(this._delegate,e)))}loadBundle(e){return lx(this._delegate,e)}namedQuery(e){return dx(this._delegate,e).then(n=>n?new oo(this,n):null)}},js=class extends Rs{constructor(e){super(),this.firestore=e}convertBytes(e){return new hf(new $n(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Hn.forKey(n,this.firestore,null)}};function yj(t){bA(t)}var pf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new js(e)}get(e){let n=no(e);return this._delegate.get(n).then(r=>new ro(this._firestore,new tn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=no(e);return r?(Dw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=no(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=no(e);return this._delegate.delete(n),this}},gf=class{constructor(e){this._delegate=e}set(e,n,r){let i=no(e);return r?(Dw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=no(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=no(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Bs=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ur(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new io(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new js(e),n),i.set(n,o)),o}};Bs.INSTANCES=new WeakMap;var Hn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new js(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ee(n._delegate,r,new S(e)))}static forKey(e,n,r){return new t(n,new Ee(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Us(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Us(this.firestore,sw(this._delegate,e))}catch(n){throw bt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Se(e),e instanceof Ee?aw(this._delegate,e):!1}set(e,n){n=Dw("DocumentReference.set",n);try{return n?pw(this._delegate,e,n):pw(this._delegate,e)}catch(r){throw bt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?gw(this._delegate,e):gw(this._delegate,e,n,...r)}catch(i){throw bt(i,"updateDoc()","DocumentReference.update()")}}delete(){return Fx(this._delegate)}onSnapshot(...e){let n=Wx(e),r=Kx(e,i=>new ro(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mw(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=Rx(this._delegate):e?.source==="server"?n=Nx(this._delegate):n=Mx(this._delegate),n.then(r=>new ro(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function bt(t,e,n){return t.message=t.message.replace(e,n),t}function Wx(t){for(let e of t)if(typeof e=="object"&&!vw(e))return e;return{}}function Kx(t,e){var n,r;let i;return vw(t[0])?i=t[0]:vw(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ro=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Hn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return fw(this._delegate,e._delegate)}},io=class extends ro{data(e){let n=this._delegate.data(e);return this._delegate._converter||AA(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},oo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new js(e)}where(e,n,r){try{return new t(this.firestore,gr(this._delegate,wx(e,n,r)))}catch(i){throw bt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,gr(this._delegate,Ex(e,n)))}catch(r){throw bt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,gr(this._delegate,Ix(e)))}catch(n){throw bt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,gr(this._delegate,Dx(e)))}catch(n){throw bt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,gr(this._delegate,Cx(...e)))}catch(n){throw bt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,gr(this._delegate,Tx(...e)))}catch(n){throw bt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,gr(this._delegate,bx(...e)))}catch(n){throw bt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,gr(this._delegate,Ax(...e)))}catch(n){throw bt(n,"endAt()","Query.endAt()")}}isEqual(e){return uw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=Ox(this._delegate):e?.source==="server"?n=kx(this._delegate):n=Px(this._delegate),n.then(r=>new Qu(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=Wx(e),r=Kx(e,i=>new Qu(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mw(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},ww=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new io(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Qu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new io(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new ww(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new io(this._firestore,r))})}isEqual(e){return fw(this._delegate,e._delegate)}},Us=class t extends oo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Hn(this.firestore,e):null}doc(e){try{return e===void 0?new Hn(this.firestore,Ku(this._delegate)):new Hn(this.firestore,Ku(this._delegate,e))}catch(n){throw bt(n,"doc()","CollectionReference.doc()")}}add(e){return Vx(this._delegate,e).then(n=>new Hn(this.firestore,n))}isEqual(e){return aw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function no(t){return le(t,Ee)}var Ew=class t{constructor(...e){this._delegate=new _n(...e)}static documentId(){return new t(je.keyField().canonicalString())}isEqual(e){return e=Se(e),e instanceof _n?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Iw=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Ux();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Bx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=$x(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Hx(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=qx(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var vj={Firestore:ff,GeoPoint:Yi,Timestamp:Ne,Blob:hf,Transaction:pf,WriteBatch:gf,DocumentReference:Hn,DocumentSnapshot:ro,Query:oo,QueryDocumentSnapshot:io,QuerySnapshot:Qu,CollectionReference:Us,FieldPath:Ew,FieldValue:Iw,setLogLevel:yj,CACHE_SIZE_UNLIMITED:tx};function _j(t,e){t.INTERNAL.registerComponent(new ai("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},vj)))}function wj(t){_j(t,(e,n)=>new ff(e,n,new _w)),t.registerVersion(pj,gj)}wj(St);function Ej(t,e=ta){return new J(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function Qx(t,e){return Ej(t,e)}function Ij(t,e){return Qx(t,e).pipe(fi(void 0),sa(),$(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function bw(t,e){return Qx(t,e).pipe($(n=>({payload:n,type:"query"})))}var mf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=eM(r,n);return new vf(i,o,this.afs)}snapshotChanges(){return Ij(this.ref,this.afs.schedulers.outsideAngular).pipe(Nt)}valueChanges(e={}){return this.snapshotChanges().pipe($(({payload:n})=>e.idField?fe(A({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return de(this.ref.get(e)).pipe(Nt)}};function yf(t,e){return bw(t,e).pipe(fi(void 0),sa(),$(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function Yx(t,e,n){return yf(t,n).pipe(hi((r,i)=>Dj(r,i.map(o=>o.payload),e),[]),ia(),$(r=>r.map(i=>({type:i.type,payload:i}))))}function Dj(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=Cj(t,r))}),t}function Cw(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function Cj(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Cw(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return Cw(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Cw(t,e.oldIndex,1);break}return t}function Zx(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var vf=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=yf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe($(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(fi(void 0),sa(),ut(([r,i])=>i.length>0||!r),$(([,r])=>r),Nt)}auditTrail(e){return this.stateChanges(e).pipe(hi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=Zx(e);return Yx(this.query,n,this.afs.schedulers.outsideAngular).pipe(Nt)}valueChanges(e={}){return bw(this.query,this.afs.schedulers.outsideAngular).pipe($(n=>n.payload.docs.map(r=>e.idField?fe(A({},r.data()),{[e.idField]:r.id}):r.data())),Nt)}get(e){return de(this.query.get(e)).pipe(Nt)}add(e){return this.ref.add(e)}doc(e){return new mf(this.ref.doc(e),this.afs)}},Tw=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?yf(this.query,this.afs.schedulers.outsideAngular).pipe(Nt):yf(this.query,this.afs.schedulers.outsideAngular).pipe($(n=>n.filter(r=>e.indexOf(r.type)>-1)),ut(n=>n.length>0),Nt)}auditTrail(e){return this.stateChanges(e).pipe(hi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=Zx(e);return Yx(this.query,n,this.afs.schedulers.outsideAngular).pipe(Nt)}valueChanges(e={}){return bw(this.query,this.afs.schedulers.outsideAngular).pipe($(r=>r.payload.docs.map(i=>e.idField?A({[e.idField]:i.id},i.data()):i.data())),Nt)}get(e){return de(this.query.get(e)).pipe(Nt)}},Xx=new P("angularfire2.enableFirestorePersistence"),Jx=new P("angularfire2.firestore.persistenceSettings"),Tj=new P("angularfire2.firestore.settings"),bj=new P("angularfire2.firestore.use-emulator");function eM(t,e=n=>n){return{query:e(t),ref:t}}var Aw=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,l,d,h,f,y,v,_,T,L){this.schedulers=u;let b=Fa(n,a,r),H=l;d&&Um(b,a,h,y,v,_,f,T),[this.firestore,this.persistenceEnabled$]=Ed(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{let z=a.runOutsideAngular(()=>b.firestore());if(o&&z.settings(o),H&&z.useEmulator(...H),i&&!Ai(s)){let Q=()=>{try{return de(z.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(ve){return typeof console<"u"&&console.warn(ve),j(!1)}};return[z,a.runOutsideAngular(Q)]}else return[z,j(!1)]},[o,H,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=eM(i,r),a=this.schedulers.ngZone.run(()=>o);return new vf(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new Tw(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new mf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(I(Qo),I(Yo,8),I(Xx,8),I(Tj,8),I(Vt),I(ae),I(_d),I(Jx,8),I(bj,8),I(oT,8),I(km,8),I(Fm,8),I(Vm,8),I(Lm,8),I(jm,8),I(Bm,8),I(Si,8))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),tM=(()=>{class t{constructor(){St.registerVersion("angularfire",Ko.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:Xx,useValue:!0},{provide:Jx,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ve({type:t});static \u0275inj=Fe({providers:[Aw]})}return t})();var nM={production:!1,firebase:{apiKey:"AIzaSyB0kGVUE1F7bjA_wAVCHpxAjH9pZHcUL70",authDomain:"recipe-saver-7a75d.firebaseapp.com",projectId:"recipe-saver-7a75d",storageBucket:"recipe-saver-7a75d.appspot.com",messagingSenderId:"740646292001",appId:"1:740646292001:web:d7e05dd2fa6c1cf2007160"}};var X="primary",lc=Symbol("RouteTitle"),Nw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Gs(t){return new Nw(t)}function Sj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qn(t[n],e[n]))return!1;return!0}function qn(t,e){let n=t?Pw(t):void 0,r=e?Pw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!dM(t[i],e[i]))return!1;return!0}function Pw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function dM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function hM(t){return t.length>0?t[t.length-1]:null}function oi(t){return rp(t)?t:Ti(t)?de(Promise.resolve(t)):j(t)}var Mj={exact:pM,subset:gM},fM={exact:Rj,subset:Nj,ignored:()=>!0};function rM(t,e,n){return Mj[n.paths](t.root,e.root,n.matrixParams)&&fM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Rj(t,e){return qn(t,e)}function pM(t,e,n){if(!ao(t.segments,e.segments)||!Ef(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!pM(t.children[r],e.children[r],n))return!1;return!0}function Nj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>dM(t[n],e[n]))}function gM(t,e,n){return mM(t,e,e.segments,n)}function mM(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ao(i,n)||e.hasChildren()||!Ef(i,n,r))}else if(t.segments.length===n.length){if(!ao(t.segments,n)||!Ef(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!gM(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ao(t.segments,i)||!Ef(t.segments,i,r)||!t.children[X]?!1:mM(t.children[X],e,o,r)}}function Ef(t,e,n){return e.every((r,i)=>fM[n](t[i].parameters,r.parameters))}var ni=class{constructor(e=new ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gs(this.queryParams)),this._queryParamMap}toString(){return kj.serialize(this)}},ge=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return If(this)}},so=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Gs(this.parameters)),this._parameterMap}toString(){return vM(this)}};function Pj(t,e){return ao(t,e)&&t.every((n,r)=>qn(n.parameters,e[r].parameters))}function ao(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Oj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var dc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>new nc)(),providedIn:"root"});let t=e;return t})(),nc=class{parse(e){let n=new kw(e);return new ni(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yu(e.root,!0)}`,r=Lj(e.queryParams),i=typeof e.fragment=="string"?`#${Fj(e.fragment)}`:"";return`${n}${r}${i}`}},kj=new nc;function If(t){return t.segments.map(e=>vM(e)).join("/")}function Yu(t,e){if(!t.hasChildren())return If(t);if(e){let n=t.children[X]?Yu(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${Yu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Oj(t,(r,i)=>i===X?[Yu(t.children[X],!1)]:[`${i}:${Yu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${If(t)}/${n[0]}`:`${If(t)}/(${n.join("//")})`}}function yM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _f(t){return yM(t).replace(/%3B/gi,";")}function Fj(t){return encodeURI(t)}function Ow(t){return yM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Df(t){return decodeURIComponent(t)}function iM(t){return Df(t.replace(/\+/g,"%20"))}function vM(t){return`${Ow(t.path)}${Vj(t.parameters)}`}function Vj(t){return Object.keys(t).map(e=>`;${Ow(e)}=${Ow(t[e])}`).join("")}function Lj(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${_f(n)}=${_f(i)}`).join("&"):`${_f(n)}=${_f(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var jj=/^[^\/()?;#]+/;function Sw(t){let e=t.match(jj);return e?e[0]:""}var Bj=/^[^\/()?;=#]+/;function Uj(t){let e=t.match(Bj);return e?e[0]:""}var $j=/^[^=?&#]+/;function Hj(t){let e=t.match($j);return e?e[0]:""}var qj=/^[^&#]+/;function zj(t){let e=t.match(qj);return e?e[0]:""}var kw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new ge(e,n)),r}parseSegment(){let e=Sw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new so(Df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Uj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Sw(this.remaining);i&&(r=i,this.capture(r))}e[Df(n)]=Df(r)}parseQueryParam(e){let n=Hj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=zj(this.remaining);s&&(r=s,this.capture(r))}let i=iM(n),o=iM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Sw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[X]:new ge([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function _M(t){return t.segments.length>0?new ge([],{[X]:t}):t}function wM(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],o=wM(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ge(t.segments,e);return Gj(n)}function Gj(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new ge(t.segments.concat(e.segments),e.children)}return t}function Ws(t){return t instanceof ni}function Wj(t,e,n=null,r=null){let i=EM(t);return IM(i,e,n,r)}function EM(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new ge(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=_M(r);return e??i}function IM(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return xw(i,i,i,n,r);let o=Kj(e);if(o.toRoot())return xw(i,i,new ge([],{}),n,r);let s=Qj(o,i,t),a=s.processChildren?Ju(s.segmentGroup,s.index,o.commands):CM(s.segmentGroup,s.index,o.commands);return xw(i,s.segmentGroup,a,n,r)}function Cf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function rc(t){return typeof t=="object"&&t!=null&&t.outlets}function xw(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=DM(t,e,n);let a=_M(wM(s));return new ni(a,o,i)}function DM(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=DM(o,e,n)}),new ge(t.segments,r)}var Tf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Cf(r[0]))throw new V(4003,!1);let i=r.find(rc);if(i&&i!==hM(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Kj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Tf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Tf(n,e,r)}var qs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Qj(t,e,n){if(t.isAbsolute)return new qs(e,!0,0);if(!n)return new qs(e,!1,NaN);if(n.parent===null)return new qs(n,!0,0);let r=Cf(t.commands[0])?0:1,i=n.segments.length-1+r;return Yj(n,i,t.numberOfDoubleDots)}function Yj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new qs(r,!1,i-o)}function Zj(t){return rc(t[0])?t[0].outlets:{[X]:t}}function CM(t,e,n){if(t||(t=new ge([],{})),t.segments.length===0&&t.hasChildren())return Ju(t,e,n);let r=Xj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ge(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new ge(t.segments.slice(r.pathIndex),t.children),Ju(o,0,i)}else return r.match&&i.length===0?new ge(t.segments,{}):r.match&&!t.hasChildren()?Fw(t,e,n):r.match?Ju(t,0,i):Fw(t,e,n)}function Ju(t,e,n){if(n.length===0)return new ge(t.segments,{});{let r=Zj(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=Ju(t.children[X],e,n);return new ge(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=CM(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(t.segments,i)}}function Xj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(rc(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!sM(u,c,s))return o;r+=2}else{if(!sM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(rc(o)){let u=Jj(o.outlets);return new ge(r,u)}if(i===0&&Cf(n[0])){let u=t.segments[e];r.push(new so(u.path,oM(n[0]))),i++;continue}let s=rc(o)?o.outlets[X]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Cf(a)?(r.push(new so(s,oM(a))),i+=2):(r.push(new so(s,{})),i++)}return new ge(r,{})}function Jj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Fw(new ge([],{}),0,r))}),e}function oM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sM(t,e,n){return t==n.path&&qn(e,n.parameters)}var ec="imperative",nn=class{constructor(e,n){this.id=e,this.url=n}},Ks=class extends nn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zn=class extends nn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ri=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},ic=class extends nn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bf=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vw=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class extends nn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jw=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bw=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uw=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$w=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hw=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qw=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zw=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gw=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Af=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},oc=class{},sc=class{constructor(e){this.url=e}};var Ww=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new hc,this.attachRef=null}},hc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Ww,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Kw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Kw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Qw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qw(e,this._root).map(n=>n.value)}};function Kw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Kw(t,n);if(r)return r}return null}function Qw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Qw(t,n);if(r.length)return r.unshift(e),r}return[]}var $t=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Hs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var xf=class extends Sf{constructor(e,n){super(e),this.snapshot=n,oE(this,e)}toString(){return this.snapshot.toString()}};function TM(t,e){let n=eB(t,e),r=new at([new so("",{})]),i=new at({}),o=new at({}),s=new at({}),a=new at(""),u=new uo(r,i,s,a,o,X,e,n.root);return u.snapshot=n.root,new xf(new $t(u,[]),n)}function eB(t,e){let n={},r={},i={},o="",s=new ac([],n,i,o,r,X,e,null,{});return new Mf("",new $t(s,[]))}var uo=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe($(c=>c[lc]))??j(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($(e=>Gs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($(e=>Gs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function iE(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:A(A({},e.params),t.params),data:A(A({},e.data),t.data),resolve:A(A(A(A({},t.data),e.data),i?.data),t._resolvedData)}:r={params:t.params,data:t.data,resolve:A(A({},t.data),t._resolvedData??{})},i&&AM(i)&&(r.resolve[lc]=i.title),r}var ac=class{get title(){return this.data?.[lc]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gs(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Mf=class extends Sf{constructor(e,n){super(n),this.url=e,oE(this,n)}toString(){return bM(this._root)}};function oE(t,e){e.value._routerState=t,e.children.forEach(n=>oE(t,n))}function bM(t){let e=t.children.length>0?` { ${t.children.map(bM).join(", ")} } `:"";return`${t.value}${e}`}function Mw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),qn(e.params,n.params)||t.paramsSubject.next(n.params),xj(e.url,n.url)||t.urlSubject.next(n.url),qn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Yw(t,e){let n=qn(t.params,e.params)&&Pj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Yw(t.parent,e.parent))}function AM(t){return typeof t.title=="string"||t.title===null}var sE=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new xe,this.deactivateEvents=new xe,this.attachEvents=new xe,this.detachEvents=new xe,this.parentContexts=N(hc),this.location=N(Uo),this.changeDetector=N(Bo),this.environmentInjector=N(kt),this.inputBinder=N(kf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Zw(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[hn]});let t=e;return t})(),Zw=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===uo?this.route:e===hc?this.childContexts:this.parent.get(e,n)}},kf=new P(""),aM=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=na([i.queryParams,i.params,i.data]).pipe(Te(([s,a,u],c)=>(u=A(A(A({},s),a),u),c===0?j(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=GD(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function tB(t,e,n){let r=uc(t,e._root,n?n._root:void 0);return new xf(r,e)}function uc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=nB(t,e,n);return new $t(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>uc(t,a)),s}}let r=rB(e.value),i=e.children.map(o=>uc(t,o));return new $t(r,i)}}function nB(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return uc(t,r,i);return uc(t,r)})}function rB(t){return new uo(new at(t.url),new at(t.params),new at(t.queryParams),new at(t.fragment),new at(t.data),t.outlet,t.component,t)}var SM="ngNavigationCancelingError";function xM(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ws(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=MM(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function MM(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[SM]=!0,r.cancellationCode=e,n&&(r.url=n),r}function iB(t){return RM(t)&&Ws(t.url)}function RM(t){return t&&t[SM]}var oB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[VD],decls:1,vars:0,template:function(i,o){i&1&&ze(0,"router-outlet")},dependencies:[sE],encapsulation:2});let t=e;return t})();function sB(t,e){return t.providers&&!t._injector&&(t._injector=Wl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function aE(t){let e=t.children&&t.children.map(aE),n=e?fe(A({},t),{children:e}):A({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=oB),n}function Gn(t){return t.outlet||X}function aB(t,e){let n=t.filter(r=>Gn(r)===e);return n.push(...t.filter(r=>Gn(r)!==e)),n}function fc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var uB=(t,e,n,r)=>$(i=>(new Xw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xw=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Mw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Hs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hs(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hs(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Hs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Gw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Mw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Mw(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=fc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Rf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zs=class{constructor(e,n){this.component=e,this.route=n}};function cB(t,e,n){let r=t._root,i=e?e._root:null;return Zu(r,i,n,[r.value])}function lB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ys(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jI(t)?t:e.get(t):r}function Zu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hs(e);return t.children.forEach(s=>{dB(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tc(a,n.getContext(s),i)),i}function dB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=hB(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Rf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zu(t,e,a?a.children:null,r,i):Zu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zs(a.outlet.component,s))}else s&&tc(e,a,i),i.canActivateChecks.push(new Rf(r)),o.component?Zu(t,null,a?a.children:null,r,i):Zu(t,null,n,r,i);return i}function hB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ao(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ao(t.url,e.url)||!qn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yw(t,e)||!qn(t.queryParams,e.queryParams);case"paramsChange":default:return!Yw(t,e)}}function tc(t,e,n){let r=Hs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tc(s,e.children.getContext(o),n):tc(s,null,n):tc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new zs(e.outlet.component,i)):n.canDeactivateChecks.push(new zs(null,i)):n.canDeactivateChecks.push(new zs(null,i))}function pc(t){return typeof t=="function"}function fB(t){return typeof t=="boolean"}function pB(t){return t&&pc(t.canLoad)}function gB(t){return t&&pc(t.canActivate)}function mB(t){return t&&pc(t.canActivateChild)}function yB(t){return t&&pc(t.canDeactivate)}function vB(t){return t&&pc(t.canMatch)}function NM(t){return t instanceof Kn||t?.name==="EmptyError"}var wf=Symbol("INITIAL_VALUE");function Qs(){return Te(t=>na(t.map(e=>e.pipe(Qn(1),fi(wf)))).pipe($(e=>{for(let n of e)if(n!==!0){if(n===wf)return wf;if(n===!1||n instanceof ni)return n}return!0}),ut(e=>e!==wf),Qn(1)))}function _B(t,e){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?j(fe(A({},n),{guardsResult:!0})):wB(s,r,i,t).pipe(He(a=>a&&fB(a)?EB(r,o,t,e):j(a)),$(a=>fe(A({},n),{guardsResult:a})))})}function wB(t,e,n,r){return de(t).pipe(He(i=>bB(i.component,i.route,n,e,r)),qt(i=>i!==!0,!0))}function EB(t,e,n,r){return de(e).pipe(di(i=>wo(DB(i.route.parent,r),IB(i.route,r),TB(t,i.path,n),CB(t,i.route,n))),qt(i=>i!==!0,!0))}function IB(t,e){return t!==null&&e&&e(new zw(t)),j(!0)}function DB(t,e){return t!==null&&e&&e(new Hw(t)),j(!0)}function CB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return j(!0);let i=r.map(o=>Wc(()=>{let s=fc(e)??n,a=Ys(o,s),u=gB(a)?a.canActivate(e,t):Sr(s,()=>a(e,t));return oi(u).pipe(qt())}));return j(i).pipe(Qs())}function TB(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>lB(s)).filter(s=>s!==null).map(s=>Wc(()=>{let a=s.guards.map(u=>{let c=fc(s.node)??n,l=Ys(u,c),d=mB(l)?l.canActivateChild(r,t):Sr(c,()=>l(r,t));return oi(d).pipe(qt())});return j(a).pipe(Qs())}));return j(o).pipe(Qs())}function bB(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return j(!0);let s=o.map(a=>{let u=fc(e)??i,c=Ys(a,u),l=yB(c)?c.canDeactivate(t,e,n,r):Sr(u,()=>c(t,e,n,r));return oi(l).pipe(qt())});return j(s).pipe(Qs())}function AB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return j(!0);let o=i.map(s=>{let a=Ys(s,t),u=pB(a)?a.canLoad(e,n):Sr(t,()=>a(e,n));return oi(u)});return j(o).pipe(Qs(),PM(r))}function PM(t){return Zf(qe(e=>{if(Ws(e))throw xM(t,e)}),$(e=>e===!0))}function SB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return j(!0);let o=i.map(s=>{let a=Ys(s,t),u=vB(a)?a.canMatch(e,n):Sr(t,()=>a(e,n));return oi(u)});return j(o).pipe(Qs(),PM(r))}var cc=class{constructor(e){this.segmentGroup=e||null}},Nf=class extends Error{constructor(e){super(),this.urlTree=e}};function $s(t){return _o(new cc(t))}function xB(t){return _o(new V(4e3,!1))}function MB(t){return _o(MM(!1,3))}var Jw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return j(r);if(i.numberOfChildren>1||!i.children[X])return xB(e.redirectTo);i=i.children[X]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Nf(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ni(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ge(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},eE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RB(t,e,n,r,i){let o=uE(t,e,n);return o.matched?(r=sB(e,r),SB(r,e,n,i).pipe($(s=>s===!0?o:A({},eE)))):j(o)}function uE(t,e,n){if(e.path==="**")return NB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?A({},eE):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Sj)(n,t,e);if(!i)return A({},eE);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?A(A({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function NB(t){return{matched:!0,parameters:t.length>0?hM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function uM(t,e,n,r){return n.length>0&&kB(t,n,r)?{segmentGroup:new ge(e,OB(r,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&FB(t,n,r)?{segmentGroup:new ge(t.segments,PB(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function PB(t,e,n,r,i){let o={};for(let s of r)if(Ff(t,n,s)&&!i[Gn(s)]){let a=new ge([],{});o[Gn(s)]=a}return A(A({},i),o)}function OB(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&Gn(r)!==X){let i=new ge([],{});n[Gn(r)]=i}return n}function kB(t,e,n){return n.some(r=>Ff(t,e,r)&&Gn(r)!==X)}function FB(t,e,n){return n.some(r=>Ff(t,e,r))}function Ff(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function VB(t,e,n,r){return Gn(t)!==r&&(r===X||!Ff(e,n,t))?!1:uE(e,t,n).matched}function LB(t,e,n){return e.length===0&&!t.children[n]}var tE=class{};function jB(t,e,n,r,i,o,s="emptyOnly"){return new nE(t,e,n,r,i,s,o).recognize()}var BB=31,nE=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Jw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=uM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(n=>{let r=new ac([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),i=new $t(r,n),o=new Mf("",i),s=Wj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,X).pipe(vr(r=>{if(r instanceof Nf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof cc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=iE(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe($(o=>o instanceof $t?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return de(i).pipe(di(o=>{let s=r.children[o],a=aB(n,o);return this.processSegmentGroup(e,a,s,o)}),hi((o,s)=>(o.push(...s),o)),_r(null),sp(),He(o=>{if(o===null)return $s(r);let s=OM(o);return UB(s),j(s)}))}processSegment(e,n,r,i,o,s){return de(n).pipe(di(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(vr(u=>{if(u instanceof cc)return j(null);throw u}))),qt(a=>!!a),vr(a=>{if(NM(a))return LB(r,i,o)?j(new tE):$s(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return VB(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):$s(i):$s(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=uE(n,i,o);if(!a)return $s(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BB&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(He(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=RB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Te(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Te(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new ac(l,h,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,HB(r),Gn(r),r.component??r._loadedComponent??null,r,qB(r)),{segmentGroup:y,slicedSegments:v}=uM(n,l,d,u);if(v.length===0&&y.hasChildren())return this.processChildren(c,u,y).pipe($(T=>T===null?null:new $t(f,T)));if(u.length===0&&v.length===0)return j(new $t(f,[]));let _=Gn(r)===o;return this.processSegment(c,u,y,v,_?X:o,!0).pipe($(T=>new $t(f,T instanceof $t?[T]:[])))}))):$s(n)))}getChildConfig(e,n,r){return n.children?j({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?j({routes:n._loadedRoutes,injector:n._loadedInjector}):AB(e,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,n).pipe(qe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):MB(n))):j({routes:[],injector:e})}};function UB(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function $B(t){let e=t.value.routeConfig;return e&&e.path===""}function OM(t){let e=[],n=new Set;for(let r of t){if(!$B(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=OM(r.children);e.push(new $t(r.value,i))}return e.filter(r=>!n.has(r))}function HB(t){return t.data||{}}function qB(t){return t.resolve||{}}function zB(t,e,n,r,i,o){return He(s=>jB(t,e,n,r,s.extractedUrl,i,o).pipe($(({state:a,tree:u})=>fe(A({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function GB(t,e){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return j(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of kM(u))s.add(c);let a=0;return de(s).pipe(di(u=>o.has(u)?WB(u,r,t,e):(u.data=iE(u,u.parent,t).resolve,j(void 0))),qe(()=>a++),Eo(1),He(u=>a===s.size?j(n):xt))})}function kM(t){let e=t.children.map(n=>kM(n)).flat();return[t,...e]}function WB(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!AM(i)&&(o[lc]=i.title),KB(o,t,e,r).pipe($(s=>(t._resolvedData=s,t.data=iE(t,t.parent,n).resolve,null)))}function KB(t,e,n,r){let i=Pw(t);if(i.length===0)return j({});let o={};return de(i).pipe(He(s=>QB(t[s],e,n,r).pipe(qt(),qe(a=>{o[s]=a}))),Eo(1),op(o),vr(s=>NM(s)?xt:_o(s)))}function QB(t,e,n,r){let i=fc(e)??r,o=Ys(t,i),s=o.resolve?o.resolve(e,n):Sr(i,()=>o(e,n));return oi(s)}function Rw(t){return Te(e=>{let n=t(e);return n?de(n).pipe($(()=>e)):j(e)})}var FM=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===X);return i}getResolvedTitleForRoute(r){return r.data[lc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>N(YB))(),providedIn:"root"});let t=e;return t})(),YB=(()=>{let e=class e extends FM{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(I(hm))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gc=new P("",{providedIn:"root",factory:()=>({})}),Pf=new P("ROUTES"),cE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(Yl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return j(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=oi(r.loadComponent()).pipe($(VM),qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),oa(()=>{this.componentLoaders.delete(r)})),o=new go(i,()=>new $e).pipe(po());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return j({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=ZB(i,this.compiler,r,this.onLoadEndListener).pipe(oa(()=>{this.childrenLoaders.delete(i)})),a=new go(s,()=>new $e).pipe(po());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZB(t,e,n,r){return oi(t.loadChildren()).pipe($(VM),He(i=>i instanceof va||Array.isArray(i)?j(i):de(e.compileModuleAsync(i))),$(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Pf,[],{optional:!0,self:!0}).flat()),{routes:s.map(aE),injector:o}}))}function XB(t){return t&&typeof t=="object"&&"default"in t}function VM(t){return XB(t)?t.default:t}var lE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>N(JB))(),providedIn:"root"});let t=e;return t})(),JB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),LM=new P(""),jM=new P("");function eU(t,e,n){let r=t.get(jM),i=t.get(It);return t.get(ae).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),tU(t))),{onViewTransitionCreated:u}=r;return u&&Sr(t,()=>u({transition:a,from:e,to:n})),s})}function tU(t){return new Promise(e=>{Ug(e,{injector:t})})}var dE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=N(cE),this.environmentInjector=N(kt),this.urlSerializer=N(dc),this.rootContexts=N(hc),this.location=N(Ho),this.inputBindingEnabled=N(kf,{optional:!0})!==null,this.titleStrategy=N(FM),this.options=N(gc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(lE),this.createViewTransition=N(LM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>j(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Uw(o)),i=o=>this.events.next(new $w(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(fe(A(A({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new at({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ec,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(s=>s.id!==0),$(s=>fe(A({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Te(s=>{this.currentTransition=s;let a=!1,u=!1;return j(s).pipe(qe(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Te(c=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new ii(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),xt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return j(c).pipe(Te(h=>{let f=this.transitions?.getValue();return this.events.next(new Ks(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?xt:Promise.resolve(h)}),zB(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=fe(A({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new bf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:y,restoredState:v,extras:_}=c,T=new Ks(h,this.urlSerializer.serialize(f),y,v);this.events.next(T);let L=TM(f,this.rootComponentType).snapshot;return this.currentTransition=s=fe(A({},c),{targetSnapshot:L,urlAfterRedirects:f,extras:fe(A({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,j(s)}else{let h="";return this.events.next(new ii(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),xt}}),qe(c=>{let l=new Vw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),$(c=>(this.currentTransition=s=fe(A({},c),{guards:cB(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),_B(this.environmentInjector,c=>this.events.next(c)),qe(c=>{if(s.guardsResult=c.guardsResult,Ws(c.guardsResult))throw xM(this.urlSerializer,c.guardsResult);let l=new Lw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ut(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),Rw(c=>{if(c.guards.canActivateChecks.length)return j(c).pipe(qe(l=>{let d=new jw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Te(l=>{let d=!1;return j(l).pipe(GB(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),qe(l=>{let d=new Bw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Rw(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(qe(f=>{d.component=f}),$(()=>{})));for(let f of d.children)h.push(...l(f));return h};return na(l(c.targetSnapshot.root)).pipe(_r(),Qn(1))}),Rw(()=>this.afterPreactivation()),Te(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?de(d).pipe($(()=>s)):j(s)}),$(c=>{let l=tB(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(A({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),qe(()=>{this.events.next(new oc)}),uB(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Qn(1),qe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),up(this.transitionAbortSubject.pipe(qe(c=>{throw c}))),oa(()=>{if(!a&&!u){let c="";this.cancelNavigationTransition(s,c,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),vr(c=>{if(u=!0,RM(c))this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),iB(c)?this.events.next(new sc(c.url)):s.resolve(!1);else{this.events.next(new ic(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(l){s.reject(l)}}return xt}))}))}cancelNavigationTransition(r,i,o){let s=new ri(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nU(t){return t!==ec}var rU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>N(iU))(),providedIn:"root"});let t=e;return t})(),rE=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},iU=(()=>{let e=class e extends rE{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ii(e)))(o||e)}})(),e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>(()=>N(oU))(),providedIn:"root"});let t=e;return t})(),oU=(()=>{let e=class e extends BM{constructor(){super(...arguments),this.location=N(Ho),this.urlSerializer=N(dc),this.options=N(gc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(lE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ni,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=TM(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ks)this.stateMemento=this.createStateMemento();else if(r instanceof ii)this.rawUrlTree=i.initialUrl;else if(r instanceof bf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof oc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ri&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof ic?this.restoreHistory(i,!0):r instanceof zn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=A(A({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=A(A({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ii(e)))(o||e)}})(),e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Xu||{});function UM(t,e){t.events.pipe(ut(n=>n instanceof zn||n instanceof ri||n instanceof ic||n instanceof ii),$(n=>n instanceof zn||n instanceof ii?Xu.COMPLETE:(n instanceof ri?n.code===0||n.code===1:!1)?Xu.REDIRECTING:Xu.FAILED),ut(n=>n!==Xu.REDIRECTING),Qn(1)).subscribe(()=>{e()})}function sU(t){throw t}var aU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=N(Ql),this.stateManager=N(BM),this.options=N(gc,{optional:!0})||{},this.pendingTasks=N(qg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(dE),this.urlSerializer=N(dc),this.location=N(Ho),this.urlHandlingStrategy=N(lE),this._events=new $e,this.errorHandler=this.options.errorHandler||sU,this.navigated=!1,this.routeReuseStrategy=N(rU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(Pf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(kf,{optional:!0}),this.eventsSubscription=new Ue,this.isNgZoneEnabled=N(ae)instanceof ae&&ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof ri&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof zn)this.navigated=!0;else if(i instanceof sc){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||nU(o.source)};this.scheduleNavigation(a,ec,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}lU(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=A({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(aE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=A(A({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=EM(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return IM(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Ws(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ec,null,i)}navigate(r,i={skipLocationChange:!1}){return cU(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=A({},aU):i===!1?o=A({},uU):o=i,Ws(r))return rM(this.currentUrlTree,r,o);let s=this.parseUrl(r);return rM(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return UM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}function lU(t){return!(t instanceof oc)&&!(t instanceof sc)}var $M=(()=>{let e=class e{constructor(r,i,o,s,a,u){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof zn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:iD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(q(rn),q(uo),wg("tabindex"),q(Di),q(xr),q(ir))},e.\u0275dir=Je({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&ue("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ta("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Mr],skipLocationChange:["skipLocationChange","skipLocationChange",Mr],replaceUrl:["replaceUrl","replaceUrl",Mr],routerLink:"routerLink"},standalone:!0,features:[Hg,hn]});let t=e;return t})();var Of=class{};var dU=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ut(r=>r instanceof zn),di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Wl(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return de(o).pipe(yr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=j(null);let s=o.pipe(He(a=>a===null?j(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return de([s,a]).pipe(yr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(I(rn),I(Yl),I(kt),I(Of),I(cE))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),HM=new P(""),hU=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof zn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof ii&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Af&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Af(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){dD()},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function fU(t){return t.routerState.root}function mc(t,e){return{\u0275kind:t,\u0275providers:e}}function pU(){let t=N(Yt);return e=>{let n=t.get($o);if(e!==n.components[0])return;let r=t.get(rn),i=t.get(qM);t.get(hE)===1&&r.initialNavigation(),t.get(zM,null,ne.Optional)?.setUpPreloading(),t.get(HM,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qM=new P("",{factory:()=>new $e}),hE=new P("",{providedIn:"root",factory:()=>1});function gU(){return mc(2,[{provide:hE,useValue:0},{provide:Jl,multi:!0,deps:[Yt],useFactory:e=>{let n=e.get(XD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(rn),o=e.get(qM);UM(i,()=>{r(!0)}),e.get(dE).afterPreactivation=()=>(r(!0),o.closed?j(void 0):o),i.initialNavigation()}))}}])}function mU(){return mc(3,[{provide:Jl,multi:!0,useFactory:()=>{let e=N(rn);return()=>{e.setUpLocationChangeListener()}}},{provide:hE,useValue:2}])}var zM=new P("");function yU(t){return mc(0,[{provide:zM,useExisting:dU},{provide:Of,useExisting:t}])}function vU(){return mc(8,[aM,{provide:kf,useExisting:aM}])}function _U(t){let e=[{provide:LM,useValue:eU},{provide:jM,useValue:A({skipNextTransition:!!t?.skipInitialTransition},t)}];return mc(9,e)}var cM=new P("ROUTER_FORROOT_GUARD"),wU=[Ho,{provide:dc,useClass:nc},rn,hc,{provide:uo,useFactory:fU,deps:[rn]},cE,[]],fE=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[wU,[],{provide:Pf,multi:!0,useValue:r},{provide:cM,useFactory:CU,deps:[[rn,new jo,new Ig]]},{provide:gc,useValue:i||{}},i?.useHash?IU():DU(),EU(),i?.preloadingStrategy?yU(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?TU(i):[],i?.bindToComponentInputs?vU().\u0275providers:[],i?.enableViewTransitions?_U().\u0275providers:[],bU()]}}static forChild(r){return{ngModule:e,providers:[{provide:Pf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(I(cM,8))},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({});let t=e;return t})();function EU(){return{provide:HM,useFactory:()=>{let t=N(iC),e=N(ae),n=N(gc),r=N(dE),i=N(dc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new hU(i,r,t,e,n)}}}function IU(){return{provide:ir,useClass:eC}}function DU(){return{provide:ir,useClass:rm}}function CU(t){return"guarded"}function TU(t){return[t.initialNavigation==="disabled"?mU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?gU().\u0275providers:[]]}var lM=new P("");function bU(){return[{provide:lM,useFactory:pU},{provide:Wg,multi:!0,useExisting:lM}]}var si=(()=>{let e=class e{constructor(r){this.db=r,this.dbPath="/recipes",this.recipesRef=r.collection(this.dbPath)}getAll(){return this.recipesRef}create(r){return this.recipesRef.add(A({},r))}update(r,i){return this.recipesRef.doc(r).update(i)}delete(r){return this.recipesRef.doc(r).delete()}};e.\u0275fac=function(i){return new(i||e)(I(Aw))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AU(t,e){if(t&1&&(D(0,"div")(1,"p"),O(2),C()()),t&2){let n=e.$implicit;B(2),Rt(n)}}function SU(t,e){if(t&1&&(D(0,"div",2)(1,"div",3)(2,"h2",4),O(3),C(),ze(4,"img",5),D(5,"table")(6,"tr")(7,"td"),O(8,"Date Added:"),C(),D(9,"td"),O(10),C(),D(11,"td",6),O(12,"Link:"),C(),D(13,"td",7)(14,"a",8),O(15),C()()(),D(16,"tr")(17,"td"),O(18,"Rating:"),C(),D(19,"td"),O(20),C(),D(21,"td",6),O(22,"Servings:"),C(),D(23,"td"),O(24),C()(),D(25,"tr")(26,"td"),O(27,"Category:"),C(),D(28,"td"),O(29),C(),D(30,"td",6),O(31,"Time:"),C(),D(32,"td"),O(33),C()()()(),D(34,"div",9)(35,"h3"),O(36,"Ingredients"),C(),pt(37,AU,3,1,"div",10),ze(38,"hr"),C(),D(39,"div",11)(40,"h3"),O(41,"Instructions"),C(),D(42,"P"),O(43),C(),ze(44,"hr"),C(),D(45,"h3"),O(46,"Notes"),C(),D(47,"P"),O(48),C()()),t&2){let n=he();B(3),Rt(n.currentRecipe.title),B(1),nr("src",n.currentRecipe.image,er),B(6),Rt(n.currentRecipe.date),B(4),nr("href",n.currentRecipe.link,er),B(1),ct(" ",n.currentRecipe.link," "),B(5),ct("",n.currentRecipe.rating,"/5"),B(4),Rt(n.currentRecipe.servings),B(5),Rt(n.currentRecipe.category),B(4),Rt(n.currentRecipe.time),B(4),se("ngForOf",n.currentRecipe.ingredientsArr),B(6),ct(" ",n.currentRecipe.instructions," "),B(5),ct(" ",n.currentRecipe.notes," ")}}var Lf=(()=>{let e=class e{constructor(r){this.recipeService=r,this.refreshList=new xe,this.currentRecipe={title:"",link:"",servings:"",time:"",rating:0,image:"",category:"",ingredients:"",instructions:"",notes:"",ingredientsArr:[]},this.message="",this.editForm=!1}ngOnInit(){this.message=""}ngOnChanges(){let r=this.recipe?.ingredients?.split(",");this.message="",this.currentRecipe=fe(A({},this.recipe),{ingredientsArr:r})}editRecipe(){this.editForm=!0}updateRecipe(){let r={title:this.currentRecipe.title,link:this.currentRecipe.link,servings:this.currentRecipe.servings,time:this.currentRecipe.time,rating:this.currentRecipe.rating,image:this.currentRecipe.image,category:this.currentRecipe.category,ingredients:this.currentRecipe.ingredients,instructions:this.currentRecipe.instructions,notes:this.currentRecipe.notes};this.currentRecipe.id&&this.recipeService.update(this.currentRecipe.id,r).then(()=>this.message="Your recipe was updated successfully!").catch(i=>console.log(i))}deleteRecipe(){this.currentRecipe.id&&this.recipeService.delete(this.currentRecipe.id).then(()=>{this.refreshList.emit(),this.message="The recipe was successfully deleted."}).catch(r=>console.log(r))}};e.\u0275fac=function(i){return new(i||e)(q(si))},e.\u0275cmp=nt({type:e,selectors:[["app-recipe-detailed"]],inputs:{recipe:"recipe"},outputs:{refreshList:"refreshList"},features:[hn],decls:5,vars:2,consts:[["class","recipe-detailed-cont",4,"ngIf"],[1,"btn","bg-danger","border","border-black","mt-2","delete-btn",3,"click"],[1,"recipe-detailed-cont"],[1,"top-card-cont"],[1,"my-3"],["alt","Recipe Image",3,"src"],[1,"col2"],[1,"link-cont"],[3,"href"],[1,"ingredients-cont"],[4,"ngFor","ngForOf"],[1,".instructions-cont"]],template:function(i,o){i&1&&(pt(0,SU,49,12,"div",0),D(1,"button",1),ue("click",function(){return o.deleteRecipe()}),O(2,` Delete Recipe
`),C(),D(3,"p"),O(4),C()),i&2&&(se("ngIf",o.currentRecipe),B(4),Rt(o.message))},dependencies:[Mn,Rr],styles:[".recipe-detailed-cont[_ngcontent-%COMP%]{border:1.5px solid black;border-radius:10px;display:flex;flex-wrap:wrap;padding-bottom:20px}.recipe-detailed-cont[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;width:100%}.recipe-detailed-cont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px;width:600px;margin:0 auto;border-radius:10px}.recipe-detailed-cont[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:55%;margin-left:347px}.link-cont[_ngcontent-%COMP%]{max-width:250px}h3[_ngcontent-%COMP%]{width:100%;padding-left:20px;text-align:center}p[_ngcontent-%COMP%]{max-width:90%;margin:0 auto;text-align:center}.ingredients-cont[_ngcontent-%COMP%], .instructions-cont[_ngcontent-%COMP%]{text-align:center;width:100%}.ingredients-cont[_ngcontent-%COMP%]{padding-top:10px}.delete-btn[_ngcontent-%COMP%]{display:flex;margin:0 auto;font-weight:700}.top-card-cont[_ngcontent-%COMP%]{background-color:#c2c1c174;display:flex;flex-wrap:wrap;border-bottom:1.5px solid black;padding-bottom:20px}"]});let t=e;return t})();function xU(t,e){if(t&1){let n=Lt();D(0,"div",3),ue("click",function(){let i=Me(n),o=i.$implicit,s=i.index,a=he(2);return Re(a.setActiveRecipe(o,s))}),ze(1,"img",4),D(2,"h5"),O(3),C(),D(4,"p"),O(5),C(),ze(6,"br"),D(7,"p"),O(8),C()()}if(t&2){let n=e.$implicit,r=e.index,i=he(2);tr("active",r==i.currentIndex),B(1),nr("src",n.image,er),B(2),Rt(n.title),B(2),ct("Added: ",n.date,""),B(3),ct("Rating: ",n.rating,"/5")}}function MU(t,e){if(t&1&&(D(0,"div")(1,"h2"),O(2,"Recipes"),C(),D(3,"h3"),O(4,"All Recipes"),C(),D(5,"div",1),pt(6,xU,9,6,"div",2),C()()),t&2){let n=he();B(6),se("ngForOf",n.recipes)}}function RU(t,e){if(t&1){let n=Lt();D(0,"div")(1,"app-recipe-detailed",5),ue("refreshList",function(){Me(n);let i=he();return Re(i.refreshList())}),C()()}if(t&2){let n=he();B(1),se("recipe",n.currentRecipe)}}var WM=(()=>{let e=class e{constructor(r,i){this.recipeService=r,this.router=i,this.currentIndex=-1,this.title="",this.router.events.subscribe(o=>{i.url=="/recipes"&&(this.currentRecipe=void 0)})}ngOnInit(){this.retrieveRecipes()}refreshList(){this.currentRecipe=void 0,this.currentIndex=-1,this.retrieveRecipes()}retrieveRecipes(){this.recipeService.getAll().snapshotChanges().pipe($(r=>r.map(i=>A({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.recipes=r})}setActiveRecipe(r,i){this.currentRecipe=r,this.currentIndex=i}};e.\u0275fac=function(i){return new(i||e)(q(si),q(rn))},e.\u0275cmp=nt({type:e,selectors:[["app-all-recipes"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"recipes-cont"],["class","recipe-card",3,"active","click",4,"ngFor","ngForOf"],[1,"recipe-card",3,"click"],["alt","Recipe Image",3,"src"],[3,"recipe","refreshList"]],template:function(i,o){i&1&&pt(0,MU,7,1,"div",0)(1,RU,2,1,"div",0),i&2&&(se("ngIf",!o.currentRecipe),B(1),se("ngIf",o.currentRecipe))},dependencies:[Mn,Rr,Lf],styles:[".form-group[_ngcontent-%COMP%]{display:inline-flex!important;left:800px;position:relative;height:35px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:200px}.recipe-card[_ngcontent-%COMP%]{margin:20px 10px 20px 13px;border:1px solid gray;border-radius:10px;width:300px;height:300px;display:flex;flex-wrap:wrap;float:inline-start}.recipe-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:250px;align-self:center;margin:0 auto;border-radius:10px}.recipe-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .recipe-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 auto}.recipe-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;text-align:center}h2[_ngcontent-%COMP%]{text-align:center}.recipes-cont[_ngcontent-%COMP%]{border:1.5px solid black;border-radius:10px;display:inline-block;width:1296px;min-height:690px}.sort-cont[_ngcontent-%COMP%]{position:relative;left:1120px;margin-bottom:5px;width:200px}.sort-cont[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-left:5px;border-radius:5px}h3[_ngcontent-%COMP%]{width:200px;margin-left:5px}select[_ngcontent-%COMP%]{height:30px;border-radius:5px;margin-left:5px}"]});let t=e;return t})();var yc=class{};function NU(t,e){if(t&1){let n=Lt();D(0,"div",28)(1,"label")(2,"input",29),ue("change",function(i){Me(n);let o=he(2);return Re(o.onCheckboxChange(i))}),C(),O(3),C()()}if(t&2){let n=e.$implicit;B(2),se("value",n.name),B(1),ct(" ",n.name," ")}}function PU(t,e){if(t&1){let n=Lt();D(0,"form",3),ue("ngSubmit",function(){Me(n);let i=he();return Re(i.saveRecipe())}),D(1,"div",4)(2,"label",5),O(3,"Recipe Title:"),C(),D(4,"input",6),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.title=i)}),C()(),D(5,"div",4)(6,"label",7),O(7,"Link:"),C(),D(8,"input",8),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.link=i)}),C()(),D(9,"div",4)(10,"label",9),O(11,"Servings:"),C(),D(12,"input",10),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.servings=i)}),C()(),D(13,"div",4)(14,"label",11),O(15,"Time:"),C(),D(16,"input",12),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.time=i)}),C()(),D(17,"div",4)(18,"label",13),O(19,"Rating(1-5):"),C(),D(20,"input",14),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.rating=i)}),C()(),D(21,"div",4)(22,"label",15),O(23,"Image URL:"),C(),D(24,"input",16),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.image=i)}),C()(),D(25,"div",17)(26,"label",18),O(27,"Category (Select all that apply):"),C(),pt(28,NU,4,2,"div",19),C(),D(29,"div",4)(30,"label",20),O(31,"Ingredients:"),C(),D(32,"textarea",21),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.ingredients=i)}),O(33,"      "),C()(),D(34,"div",4)(35,"label",22),O(36,"Instructions:"),C(),D(37,"textarea",23),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.instructions=i)}),O(38,"      "),C()(),D(39,"div",4)(40,"label",24),O(41,"Notes:"),C(),D(42,"textarea",25),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.notes=i)}),O(43,"      "),C()(),D(44,"input",26),ue("ngModelChange",function(i){Me(n);let o=he();return Re(o.recipe.date=i)}),C(),D(45,"button",27),O(46," Submit Recipe "),C()()}if(t&2){let n=he();B(4),se("ngModel",n.recipe.title),B(4),se("ngModel",n.recipe.link),B(4),se("ngModel",n.recipe.servings),B(4),se("ngModel",n.recipe.time),B(4),se("ngModel",n.recipe.rating),B(4),se("ngModel",n.recipe.image),B(1),se("formGroup",n.form),B(3),se("ngForOf",n.categoryList),B(4),se("ngModel",n.recipe.ingredients),B(5),se("ngModel",n.recipe.instructions),B(5),se("ngModel",n.recipe.notes),B(2),Gl("value"," ",n.date," "),se("ngModel",n.recipe.date)}}function OU(t,e){if(t&1){let n=Lt();D(0,"div")(1,"h4"),O(2,"You submitted your recipe successfully!"),C(),D(3,"button",30),ue("click",function(){Me(n);let i=he();return Re(i.newRecipe())}),O(4," Add New Recipe "),C()()}}var KM=(()=>{let e=class e{constructor(r,i){this.recipeService=r,this.formBuilder=i,this.recipe=new yc,this.submitted=!1,this.categoryList=[{id:1,name:"Chicken"},{id:2,name:"Beef"},{id:3,name:"Seafood"},{id:4,name:"Soups/Stews"},{id:5,name:"Casseroles"},{id:6,name:"Pastas"},{id:7,name:"Salads"},{id:8,name:"Desserts"},{id:9,name:"Stir-Fry"},{id:10,name:"Snacks"},{id:11,name:"Sides"},{id:12,name:"Other"}],this.dateObj=new Date,this.day=this.dateObj.getDate().toString(),this.month=(this.dateObj.getMonth()+1).toString(),this.year=this.dateObj.getFullYear().toString(),this.dateArr=[this.month,this.day,this.year],this.date=this.dateArr.join("-"),this.form=this.formBuilder.group({category:this.formBuilder.array([])})}onCheckboxChange(r){let i=this.form.get("category");if(r.target.checked)i.push(new or(r.target.value));else{let o=i.controls.findIndex(s=>s.value===r.target.value);i.removeAt(o)}}saveRecipe(){let i=this.form.value.category.toString(" , ");this.recipe.category=i,this.recipe.date=this.date,console.log(this.recipe.ingredients?.replace(/\n/g,",")),this.recipe.ingredients=this.recipe.ingredients?.replace(/\n/g,","),console.log(this.recipe.ingredients),this.recipeService.create(this.recipe).then(()=>{console.log("Created new recipe successfully!"),this.submitted=!0})}newRecipe(){this.submitted=!1,this.recipe=new yc}};e.\u0275fac=function(i){return new(i||e)(q(si),q(yd))},e.\u0275cmp=nt({type:e,selectors:[["app-add-recipe"]],decls:5,vars:2,consts:[[1,"submit-form"],[3,"ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","link"],["type","url","id","link","name","link",1,"form-control",3,"ngModel","ngModelChange"],["for","servings"],["type","text","id","servings","name","servings",1,"form-control",3,"ngModel","ngModelChange"],["for","time"],["type","text","id","time","name","time",1,"form-control",3,"ngModel","ngModelChange"],["for","rating"],["type","number","id","rating","name","rating",1,"form-control",3,"ngModel","ngModelChange"],["for","image"],["type","url","id","image","name","image",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group",3,"formGroup"],["for","category",1,"category-label"],["class","category-checkboxes",4,"ngFor","ngForOf"],["for","ingredients"],["id","ingredients","required","","name","ingredients",1,"form-control",3,"ngModel","ngModelChange"],["for","instructions"],["id","instructions","required","","name","instructions",1,"form-control",3,"ngModel","ngModelChange"],["for","notes"],["id","notes","name","notes",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","id","date","name","date",1,"form-control",3,"ngModel","value","ngModelChange"],["type","submit",1,"btn","text-white","bg-secondary","border","border-black","submit-button"],[1,"category-checkboxes"],["type","checkbox",3,"value","change"],[1,"btn","btn","text-white","bg-secondary","border","border-black","submit-button",3,"click"]],template:function(i,o){i&1&&(D(0,"h2"),O(1,"Add New Recipe"),C(),D(2,"div",0),pt(3,PU,47,13,"form",1)(4,OU,5,0,"div",2),C()),i&2&&(B(3),se("ngIf",!o.submitted),B(1),se("ngIf",o.submitted))},dependencies:[Mn,Rr,md,dd,Tm,PC,fd,bm,Cm,Dm,ka],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.category-checkboxes[_ngcontent-%COMP%]{display:inline-flex;width:300px;margin-left:25px}.category-label[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{margin:20px auto 0;display:flex}.submit-form[_ngcontent-%COMP%]{border:1.5px solid black;border-radius:15px;padding:20px 80px 10px;background-color:#c2c1c174}"]});let t=e;return t})();function kU(t,e){if(t&1){let n=Lt();D(0,"div",8),ue("click",function(){let i=Me(n),o=i.$implicit,s=i.index,a=he(2);return Re(a.setActiveRecipe(o,s))}),ze(1,"img",9),D(2,"h5"),O(3),C(),D(4,"p"),O(5),C()()}if(t&2){let n=e.$implicit,r=e.index,i=he(2);tr("active",r==i.currentIndex),B(1),nr("src",n.image,er),B(2),Rt(n.title),B(2),ct("Added: ",n.date,"")}}function FU(t,e){if(t&1){let n=Lt();D(0,"div",8),ue("click",function(){let i=Me(n),o=i.$implicit,s=i.index,a=he(2);return Re(a.setActiveRecipe(o,s))}),ze(1,"img",9),D(2,"h5"),O(3),C(),D(4,"p"),O(5),C()()}if(t&2){let n=e.$implicit,r=e.index,i=he(2);tr("active",r==i.currentIndex),B(1),nr("src",n.image,er),B(2),Rt(n.title),B(2),ct("Rating: ",n.rating,"/5")}}function VU(t,e){if(t&1&&(D(0,"div",2)(1,"h3",3),O(2,"Recently Added Recipes"),C(),D(3,"div",4),pt(4,kU,6,5,"div",5),C(),D(5,"h3",6),O(6,"Top Rated Recipes"),C(),D(7,"div",7),pt(8,FU,6,5,"div",5),C()()),t&2){let n=he();B(4),se("ngForOf",n.recipes),B(4),se("ngForOf",n.recipes)}}function LU(t,e){if(t&1){let n=Lt();D(0,"div")(1,"app-recipe-detailed",10),ue("refreshList",function(){Me(n);let i=he();return Re(i.refreshList())}),C()()}if(t&2){let n=he();B(1),se("recipe",n.currentRecipe)}}var QM=(()=>{let e=class e{constructor(r,i){this.recipeService=r,this.router=i,this.currentIndex=-1,this.title="",this.router.events.subscribe(o=>{i.url=="/home"&&(this.currentRecipe=void 0)})}ngOnInit(){this.retrieveRecipes()}refreshList(){this.currentRecipe=void 0,this.currentIndex=-1,this.retrieveRecipes()}retrieveRecipes(){this.recipeService.getAll().snapshotChanges().pipe($(r=>r.map(i=>A({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.recipes=r})}setActiveRecipe(r,i){this.currentRecipe=r,this.currentIndex=i}};e.\u0275fac=function(i){return new(i||e)(q(si),q(rn))},e.\u0275cmp=nt({type:e,selectors:[["app-home-logged-in"]],decls:2,vars:2,consts:[["class","recipes-cont",4,"ngIf"],[4,"ngIf"],[1,"recipes-cont"],[1,"mt-2"],[1,"recent-cont"],["class","recipe-card",3,"active","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"top-recipes-cont"],[1,"recipe-card",3,"click"],["alt","Recipe Image",3,"src"],[3,"recipe","refreshList"]],template:function(i,o){i&1&&pt(0,VU,9,2,"div",0)(1,LU,2,1,"div",1),i&2&&(se("ngIf",!o.currentRecipe),B(1),se("ngIf",o.currentRecipe))},dependencies:[Mn,Rr,Lf],styles:[".recipes-cont[_ngcontent-%COMP%]{display:inline-block}.recipe-card[_ngcontent-%COMP%]{margin:20px 10px 20px 13px;border:1px solid gray;border-radius:10px;width:300px;height:270px;display:flex;align-content:center;flex-wrap:wrap;float:inline-start}.recipe-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:250px;align-self:center;margin:0 auto;border-radius:10px}.recipe-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .recipe-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 auto}.recipe-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{width:100%;text-align:center}h3[_ngcontent-%COMP%]{width:100%}.top-recipes-cont[_ngcontent-%COMP%], .recent-cont[_ngcontent-%COMP%]{border:1.5px solid black;border-radius:10px;display:inline-block;width:1296px}"]});let t=e;return t})();function jU(t,e){if(t&1){let n=Lt();D(0,"div",6)(1,"label")(2,"input",7),ue("change",function(i){Me(n);let o=he();return Re(o.onCheckboxChange(i))}),C(),O(3),C()()}if(t&2){let n=e.$implicit;B(2),se("value",n),B(1),ct(" ",n," ")}}var YM=(()=>{let e=class e{constructor(r){this.formBuilder=r,this.itemList=[],this.form=this.formBuilder.group({item:this.formBuilder.array([])})}onCheckboxChange(r){let i=this.form.get("item");if(r.target.checked){let o=i.controls.findIndex(s=>s.value===r.target.value);i.removeAt(o)}else i.push(new or(r.target.value))}addToList(){let r=this.form.get("item");console.log(r)}};e.\u0275fac=function(i){return new(i||e)(q(yd))},e.\u0275cmp=nt({type:e,selectors:[["app-shopping-list"]],decls:9,vars:2,consts:[[1,"shopping-list-cont"],[3,"formGroup","ngSubmit"],["for","add-item"],["type","text","id","add-item","name","add-item","placeholder","List item"],[1,"btn"],["class","list",4,"ngFor","ngForOf"],[1,"list"],["type","checkbox",3,"value","change"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"h2"),O(2,"Shopping List"),C(),D(3,"form",1),ue("ngSubmit",function(){return o.addToList()}),ze(4,"label",2)(5,"input",3),D(6,"button",4),O(7,"Add To List"),C()(),pt(8,jU,4,2,"div",5),C()),i&2&&(B(3),se("formGroup",o.form),B(5),se("ngForOf",o.itemList))},dependencies:[Mn,md,fd,ka]});let t=e;return t})();var BU=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:QM},{path:"recipes",component:WM},{path:"shopping",component:YM},{path:"add",component:KM}],ZM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e}),e.\u0275inj=Fe({imports:[fE.forRoot(BU),fE]});let t=e;return t})();var XM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nt({type:e,selectors:[["app-nav-bar"]],decls:17,vars:0,consts:[[1,"navbar","navbar-expand","navbar-dark","bg-secondary"],["src","../../../assets/images/recipe_logo.png","alt","Recipe Book Image","width","40","height","40"],["href","#",1,"navbar-brand","mx-1","fs-2"],[1,"navbar-nav","mr-auto","ms-5"],[1,"nav-item","mx-3"],["routerLink","home",1,"nav-link"],["routerLink","recipes",1,"nav-link"],["routerLink","add",1,"nav-link"],[1,"container","mt-3"]],template:function(i,o){i&1&&(D(0,"div")(1,"nav",0),ze(2,"img",1),D(3,"a",2),O(4,"Recipe Saver"),C(),D(5,"div",3)(6,"li",4)(7,"a",5),O(8,"HOME"),C()(),D(9,"li",4)(10,"a",6),O(11,"RECIPES"),C()(),D(12,"li",4)(13,"a",7),O(14,"ADD NEW RECIPE"),C()()()(),D(15,"div",8),ze(16,"router-outlet"),C()())},dependencies:[sE,$M]});let t=e;return t})();var JM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nt({type:e,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"navbar","sticky-bottom","navbar-expand","navbar-dark","bg-secondary","footer"],[1,"copywrite"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"p",1),O(2,"\xA9 Haylee Graham 2023"),C()())},styles:[".copywrite[_ngcontent-%COMP%]{margin:0 auto}.footer[_ngcontent-%COMP%]{margin-top:30px}"]});let t=e;return t})();var eR=(()=>{let e=class e{constructor(){this.title="recipe-saver"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nt({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){i&1&&ze(0,"app-nav-bar")(1,"app-footer")},dependencies:[XM,JM]});let t=e;return t})();var tR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ve({type:e,bootstrap:[eR]}),e.\u0275inj=Fe({imports:[fC,ZM,BC,UC,GC.initializeApp(nM.firebase),tM]});let t=e;return t})();hC().bootstrapModule(tR).catch(t=>console.error(t));
